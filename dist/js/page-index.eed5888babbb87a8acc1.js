/*! For license information please see page-index.eed5888babbb87a8acc1.js.LICENSE.txt */
(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(e(t)+" is not iterable")}function n(){var e,t,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function c(n,o,a,i){var c=o&&o.prototype instanceof d?o:d,l=Object.create(c.prototype);return r(l,"_invoke",function(n,r,o){var a,i,c,d=0,l=o||[],s=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,i=0,c=e,p.n=n,u}};function f(n,r){for(i=n,c=r,t=0;!s&&d&&!o&&t<l.length;t++){var o,a=l[t],f=p.p,w=a[2];n>3?(o=w===r)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=n<2&&f<a[1])?(i=0,p.v=r,p.n=a[1]):f<w&&(o=n<3||a[0]>r||r>w)&&(a[4]=n,a[5]=r,p.n=w,i=0))}if(o||n>1)return u;throw s=!0,r}return function(o,l,w){if(d>1)throw TypeError("Generator is already running");for(s&&1===l&&f(l,w),i=l,c=w;(t=i<2?e:c)||!s;){a||(i?i<3?(i>1&&(p.n=-1),f(i,c)):p.n=c:p.v=c);try{if(d=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(s=p.n<0)?c:n.call(r,p))!==u)break}catch(t){a=e,i=1,c=t}finally{d=1}}return{value:t,done:s}}}(n,a,i),!0),l}var u={};function d(){}function l(){}function s(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(r(t={},a,function(){return this}),t),f=s.prototype=d.prototype=Object.create(p);function w(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,r(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,r(f,"constructor",s),r(s,"constructor",l),l.displayName="GeneratorFunction",r(s,i,"GeneratorFunction"),r(f),r(f,i,"Generator"),r(f,a,function(){return this}),r(f,"toString",function(){return"[object Generator]"}),(n=function(){return{w:c,m:w}})()}function r(e,t,n,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}r=function(e,t,n,o){if(t)a?a(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n;else{var i=function(t,n){r(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},r(e,t,n,o)}function o(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,u,"next",e)}function u(e){o(i,r,a,c,u,"throw",e)}c(void 0)})}}!function(){function e(e){return r.apply(this,arguments)}function r(){return r=a(n().m(function e(t){var r,o,a,i,c,u,d=arguments;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:r=d.length>1&&void 0!==d[1]?d[1]:{},o=d.length>2&&void 0!==d[2]?d[2]:3,a=d.length>3&&void 0!==d[3]?d[3]:1500,i=0;case 1:if(!(i<o)){e.n=9;break}return e.p=2,e.n=3,fetch(t,r);case 3:if((c=e.v).ok){e.n=4;break}throw new Error("HTTP ".concat(c.status));case 4:return e.a(2,c);case 5:if(e.p=5,u=e.v,!(i<o-1)){e.n=7;break}return e.n=6,new Promise(function(e){return setTimeout(e,a)});case 6:e.n=8;break;case 7:throw u;case 8:i++,e.n=1;break;case 9:return e.a(2)}},e,null,[[2,5]])})),r.apply(this,arguments)}if(!window.__pageDelegationBound){window.__pageDelegationBound=!0,window._loadedScriptElements=window._loadedScriptElements||{};window.closeMobileMenu=function(){var e=document.getElementById("mobileNav");e&&(e.style.display="none")},window.cleanupPageScripts=function(e){if(e){var t=window._loadedScriptElements[e];if(Array.isArray(t)&&(t.forEach(function(e){try{e.remove()}catch(e){}}),delete window._loadedScriptElements[e]),document.querySelectorAll('script[data-page-script="page-'.concat(e,'.js"]')).forEach(function(e){return e.remove()}),window["pageScriptExecuted_".concat(e)]&&delete window["pageScriptExecuted_".concat(e)],window["pageInitialized_".concat(e)]&&delete window["pageInitialized_".concat(e)],window.executedInlineScripts)Array.from(window.executedInlineScripts).filter(function(t){return t.startsWith("".concat(e,"_inline_"))}).forEach(function(e){return window.executedInlineScripts.delete(e)});"home"===e&&(window.contentPageLoaded=!1,window.canvasSectionInitialized=!1,window.isTransferring=!1,window.transferLock=!1)}},window.loadPageScript=function(e,t){return new Promise(function(n){if("page-content.js"!==e||"function"!=typeof window.transferToTShirt){var r=document.querySelector('script[data-page-script="'.concat(e,'"]'));r&&r.remove();var o=document.createElement("script");o.src="/js/".concat(e),o.setAttribute("data-page-script",e),t&&(o.setAttribute("data-page-owner",t),Array.isArray(window._loadedScriptElements[t])||(window._loadedScriptElements[t]=[]),window._loadedScriptElements[t].push(o)),o.async=!1,o.onload=function(){n()},o.onerror=function(){n()},document.body.appendChild(o)}else n()})},window.loadPage=function(){var r=a(n().m(function r(o,a){var i,c,u,d,l,s,p,f,w,m,y,h;return n().w(function(r){for(;;)switch(r.p=r.n){case 0:if(a||(a={}),i=document.getElementById("dynamic-content")){r.n=1;break}return r.a(2);case 1:if("function"==typeof window.cleanupCurrentPage)try{window.cleanupCurrentPage()}catch(e){}if((c={merch:"cleanupMerchPage","merch-content":"cleanupContentPage",profile:"cleanupProfilePage",home:"cleanupHomePage"}[window.currentPage])&&"function"==typeof window[c])try{window[c]()}catch(e){}if(window.currentPage&&window.currentPage!==o)try{cleanupPageScripts(window.currentPage)}catch(e){}return i.classList.add("fade-out"),r.p=2,u="/pages/".concat(o,".html"),r.n=3,e(u);case 3:if((d=r.v).ok){r.n=4;break}throw new Error("HTTP ".concat(d.status,": ").concat(d.statusText));case 4:return r.n=5,d.text();case 5:return l=r.v,s=new DOMParser,p=s.parseFromString(l,"text/html"),document.querySelectorAll("style[data-page]").forEach(function(e){return e.remove()}),p.querySelectorAll("style").forEach(function(e){var t=document.createElement("style");t.textContent=e.textContent,t.setAttribute("data-page",o),document.head.appendChild(t)}),i.innerHTML=p.body.innerHTML||l,window.currentPage=o,window.currentPageParams=a,Array.isArray(window._loadedScriptElements[o])||(window._loadedScriptElements[o]=[]),window.scrollTo(0,0),r.n=6,new Promise(function(e){return setTimeout(e,50)});case 6:return r.n=7,loadPageScript("page-".concat(o,".js"),o);case 7:f=Array.from(p.querySelectorAll("script")),window.executedInlineScripts||(window.executedInlineScripts=new Set),w=n().m(function e(){var t,r,a;return n().w(function(e){for(;;)switch(e.n){case 0:if(!(t=f[m]).src){e.n=2;break}return e.n=1,new Promise(function(e){var n=document.createElement("script");n.src=t.getAttribute("src"),n.async=!1,n.setAttribute("data-page-owner",o),n.onload=function(){e()},n.onerror=function(){e()},document.body.appendChild(n),Array.isArray(window._loadedScriptElements[o])&&window._loadedScriptElements[o].push(n)});case 1:e.n=3;break;case 2:t.textContent&&t.textContent.trim()&&(r="".concat(o,"_inline_").concat(m),window.executedInlineScripts.has(r)||(window.executedInlineScripts.add(r),(a=document.createElement("script")).type="text/javascript",a.textContent=t.textContent,a.setAttribute("data-inline-id",r),a.setAttribute("data-page-owner",o),document.body.appendChild(a),Array.isArray(window._loadedScriptElements[o])&&window._loadedScriptElements[o].push(a)));case 3:return e.a(2)}},e)}),m=0;case 8:if(!(m<f.length)){r.n=10;break}return r.d(t(w()),9);case 9:m++,r.n=8;break;case 10:window["pageInitialized_".concat(o)]=!0,a.id&&setTimeout(function(){window.dispatchEvent(new CustomEvent("pageParamsLoaded",{detail:{page:o,params:a}}))},100),r.n=12;break;case 11:r.p=11,h=r.v,i.innerHTML="<p>页面加载失败: ".concat(h.message,"</p>");case 12:r.p=12,i.classList.remove("fade-out");try{closeMobileMenu()}catch(e){}return r.f(12);case 13:setTimeout(function(){var e=document.querySelector(".main--banner");e&&(e.scrollTop=0),i&&(i.scrollTop=0)},0),(y=document.querySelector(".languages"))&&(y.style.display="profile"===o?"none":""),"profile"===o&&setTimeout(function(){return window.dispatchEvent(new CustomEvent("profilePageLoaded"))},100),"gallery"===o&&setTimeout(function(){"function"==typeof initGallery?initGallery():setTimeout(function(){"function"==typeof initGallery&&initGallery()},500)},200);case 14:return r.a(2)}},r,null,[[2,11,12,13]])}));return function(e,t){return r.apply(this,arguments)}}(),window.whenDOMReady=function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):setTimeout(e,10)},window.whenElementReady=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,r=document.querySelector(e);if(r)t(r);else{var o=Date.now(),a=function(){var r=document.querySelector(e);r?t(r):Date.now()-o>n||setTimeout(a,50)};a()}},window.router={init:function(){this.handleSPARedirect(),window.addEventListener("popstate",this.handlePopState.bind(this)),this.handleCurrentPath()},handleSPARedirect:function(){try{var e=sessionStorage.getItem("spa_redirect");if(e){var t=JSON.parse(e);sessionStorage.removeItem("spa_redirect");var n=t.path+t.search+t.hash;window.history.replaceState(null,"",n)}}catch(e){}},handleCurrentPath:function(){var e=window.location.pathname,t=this.parsePath(e),n=t.page,r=t.params;(n!==window.currentPage||r.id)&&window.loadPage(n,r)},parsePath:function(e){var t="home",n={};if(""===(e=e.replace(/\.html$/,"").replace(/\/$/,""))||"/"===e)t="home";else{var r=e.split("/").filter(function(e){return e});r.length>0&&(t=r[0],r.length>1&&(n.id=r[1]))}return{page:t,params:n}},handlePopState:function(e){this.handleCurrentPath()},navigate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="home"===e?"/":"/".concat(e);t.id&&(n+="/".concat(t.id)),window.history.pushState({page:e,params:t},"",n),window.loadPage(e,t)}},document.addEventListener("click",function(e){var t=e.target.closest("[data-page]");if(t){e.preventDefault();var n=t.dataset.page;window.router.navigate(n)}else if("profile"!==window.currentPage||"function"!=typeof window.handleGlobalClick);else try{window.handleGlobalClick(e)}catch(e){}}),document.addEventListener("gesturestart",function(e){return e.preventDefault()}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){window.router.init()}):window.router.init();var o=["cart","gallery","home","profile","index"];window.loadPageScript=function(e,t){return new Promise(function(n){if("page-content.js"!==e||"function"!=typeof window.transferToTShirt){var r=e.match(/page-(.+)\.js/);if(r){var a=r[1];if(o.includes(a)){var i=document.querySelector('script[data-page-script="'.concat(e,'"]'));i&&i.remove();var c=document.createElement("script");c.src="/js/".concat(e),c.setAttribute("data-page-script",e),t&&(c.setAttribute("data-page-owner",t),Array.isArray(window._loadedScriptElements[t])||(window._loadedScriptElements[t]=[]),window._loadedScriptElements[t].push(c)),c.async=!1,c.onload=function(){n()},c.onerror=function(){n()},document.body.appendChild(c)}else n()}else n()}else n()})}}}()})();