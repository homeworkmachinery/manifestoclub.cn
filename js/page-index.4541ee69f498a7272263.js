(()=>{"use strict";var e,t={31099:(e,t,n)=>{var r=n(34963),a=n(44828),i=n.n(a),o=n(14607),c=n.n(o),s=n(56255),d=n.n(s),l=n(66615),u=n.n(l),p=n(86226),w=n.n(p),f=n(96319),h=n.n(f),m=n(49763),v=n.n(m),g=n(165),y=n.n(g),x=n(61240),b=n.n(x),S=n(11393),E=n.n(S),P=n(59261),k=n.n(P),C=n(11265),I=n.n(C),L=n(94870),_=n.n(L);!function(){function e(e){return t.apply(this,arguments)}function t(){return t=(0,r.A)(i().mark(function e(t){var n,r,a,o,c,s,l=arguments;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:{},r=l.length>2&&void 0!==l[2]?l[2]:3,a=l.length>3&&void 0!==l[3]?l[3]:2e3,o=0;case 1:if(!(o<r)){e.next=9;break}return e.prev=2,e.next=3,fetch(t,n);case 3:if((c=e.sent).ok){e.next=4;break}throw new Error("HTTP ".concat(c.status));case 4:return e.abrupt("return",c);case 5:if(e.prev=5,s=e.catch(2),!(o<r-1)){e.next=7;break}return e.next=6,new(b())(function(e){return d()(e,a)});case 6:e.next=8;break;case 7:throw s;case 8:o++,e.next=1;break;case 9:case"end":return e.stop()}},e,null,[[2,5]])})),t.apply(this,arguments)}!function(){var e=null;function t(){e||(e=c()(function(){window.supabase&&window.supabase.from("users").select("count").limit(1).then(function(){}).catch(function(e){n()})},3e4))}function n(){if(window.supabase)try{var e=window.supabase.constructor.createClient;e&&(window.supabase=e("https://zdahntyxdcmkmbgjtizc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpkYWhudHl4ZGNta21iZ2p0aXpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkwNDM3MjMsImV4cCI6MjA2NDYxOTcyM30.ew3haBr1qN5lSKQ8LWBRqlqrWw99b_s954GGjrK4brc"))}catch(e){}}document.addEventListener("visibilitychange",function(){document.hidden?e&&(clearInterval(e),e=null):(n(),t())}),window.addEventListener("focus",function(){n(),e||t()}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){d()(t,1e3)}):d()(t,1e3)}(),window.__pageDelegationBound||(window.__pageDelegationBound=!0,window._loadedScriptElements=window._loadedScriptElements||{},window.closeMobileMenu=function(){var e=document.getElementById("mobileNav");e&&(e.style.display="none")},window.cleanupPageScripts=function(e){var t=window._loadedScriptElements[e];u()(t)&&(w()(t).call(t,function(e){try{e.remove()}catch(e){}}),delete window._loadedScriptElements[e]);var n=document.querySelectorAll('script[data-page-script="page-'.concat(e,'.js"]'));if(w()(n).call(n,function(e){return e.remove()}),window.pageScriptExecuted&&delete window["pageScriptExecuted_".concat(e)],window["pageInitialized_".concat(e)]&&delete window["pageInitialized_".concat(e)],window.executedInlineScripts){var r,a=h()(r=v()(window.executedInlineScripts)).call(r,function(t){return y()(t).call(t,"".concat(e,"_inline_"))});w()(a).call(a,function(e){return window.executedInlineScripts.delete(e)})}"home"===e&&(window.contentPageLoaded=!1,window.canvasSectionInitialized=!1,window.isTransferring=!1,window.transferLock=!1)},window.loadPageScript=function(e,t){return new(b())(function(n){if("page-content.js"!==e||"function"!=typeof window.transferToTShirt){var r=document.querySelector('script[data-page-script="'.concat(e,'"]'));r&&r.remove();var a=document.createElement("script");a.src="/js/".concat(e),a.setAttribute("data-page-script",e),t&&(a.setAttribute("data-page-owner",t),window._loadedScriptElements[t]=window._loadedScriptElements[t]||[],window._loadedScriptElements[t].push(a)),a.async=!1,a.onload=function(){return n()},a.onerror=function(){n()},document.body.appendChild(a)}else n()})},window.loadPage=function(){var t=(0,r.A)(i().mark(function t(n,r){var a,o,c,s,l,u,p,f,h,m,g,y,x,S,P;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r||(r={}),a=document.getElementById("dynamic-content")){t.next=1;break}return t.abrupt("return");case 1:if("function"==typeof window.cleanupCurrentPage&&window.cleanupCurrentPage(),(o={merch:"cleanupMerchPage","merch-content":"cleanupContentPage",profile:"cleanupProfilePage",home:"cleanupHomePage"}[window.currentPage])&&"function"==typeof window[o])try{window[o]()}catch(e){}if(window.currentPage&&window.currentPage!==n)try{cleanupPageScripts(window.currentPage)}catch(e){}return a.classList.add("fade-out"),t.prev=2,l="/pages/".concat(n,".html"),t.next=3,e(l);case 3:if((u=t.sent).ok){t.next=4;break}throw new Error(E()(c="HTTP ".concat(u.status,": ")).call(c,u.statusText));case 4:return t.next=5,u.text();case 5:return p=t.sent,f=new DOMParser,h=f.parseFromString(p,"text/html"),w()(s=document.querySelectorAll("style[data-page]")).call(s,function(e){return e.remove()}),m=h.querySelectorAll("style"),w()(m).call(m,function(e){var t=document.createElement("style");t.textContent=e.textContent,t.setAttribute("data-page",n),document.head.appendChild(t)}),a.innerHTML=h.body.innerHTML||p,window.currentPage=n,window.currentPageParams=r,t.next=6,loadPageScript("page-".concat(n,".js"),n);case 6:g=v()(h.querySelectorAll("script")),window.executedInlineScripts||(window.executedInlineScripts=new(k())),window._loadedScriptElements[n]=window._loadedScriptElements[n]||[],y=i().mark(function e(){var t,r,a,o,c;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=g[x]).src){e.next=2;break}return e.next=1,new(b())(function(e){var t=document.createElement("script");t.src=r.getAttribute("src"),t.async=!1,t.setAttribute("data-page-owner",n),t.onload=e,t.onerror=function(){e()},document.body.appendChild(t),window._loadedScriptElements[n].push(t)});case 1:e.next=3;break;case 2:r.textContent&&I()(t=r.textContent).call(t)&&(o=E()(a="".concat(n,"_inline_")).call(a,x),window.executedInlineScripts.has(o)||(window.executedInlineScripts.add(o),(c=document.createElement("script")).type="text/javascript",c.textContent=r.textContent,c.setAttribute("data-inline-id",o),c.setAttribute("data-page-owner",n),document.body.appendChild(c),window._loadedScriptElements[n].push(c)));case 3:case"end":return e.stop()}},e)}),x=0;case 7:if(!(x<g.length)){t.next=9;break}return t.delegateYield(y(),"t0",8);case 8:x++,t.next=7;break;case 9:window["pageInitialized_".concat(n)]=!0,r.id&&d()(function(){window.dispatchEvent(new CustomEvent("pageParamsLoaded",{detail:{page:n,params:r}}))},100),t.next=11;break;case 10:t.prev=10,P=t.catch(2),a.innerHTML="<p>页面加载失败: ".concat(P.message,"</p>");case 11:t.prev=11,a.classList.remove("fade-out");try{closeMobileMenu()}catch(e){}return t.finish(11);case 12:(S=document.querySelector(".languages"))&&(S.style.display="profile"===n?"none":""),"profile"===n&&d()(function(){return window.dispatchEvent(new CustomEvent("profilePageLoaded"))},100),"gallery"===n&&d()(function(){"function"==typeof initGallery?initGallery():d()(function(){"function"==typeof initGallery&&initGallery()},500)},200);case 13:case"end":return t.stop()}},t,null,[[2,10,11,12]])}));return function(e,n){return t.apply(this,arguments)}}(),window.router={init:function(){var e;this.handleSPARedirect(),window.addEventListener("popstate",_()(e=this.handlePopState).call(e,this)),this.handleCurrentPath()},handleSPARedirect:function(){try{var e=sessionStorage.getItem("spa_redirect");if(e){var t=JSON.parse(e);sessionStorage.removeItem("spa_redirect");var n=t.path+t.search+t.hash;window.history.replaceState(null,"",n)}}catch(e){}},handleCurrentPath:function(){var e=window.location.pathname,t=this.parsePath(e),n=t.page,r=t.params;(n!==window.currentPage||r.id)&&window.loadPage(n,r)},parsePath:function(e){var t="home",n={};if(""===(e=e.replace(/\.html$/,"").replace(/\/$/,""))||"/"===e)t="home";else{var r,a=h()(r=e.split("/")).call(r,function(e){return e});a.length>0&&(t=a[0],a.length>1&&(n.id=a[1]))}return{page:t,params:n}},handlePopState:function(e){this.handleCurrentPath()},navigate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="home"===e?"/":"/".concat(e);t.id&&(n+="/".concat(t.id)),window.history.pushState({page:e,params:t},"",n),window.loadPage(e,t)}},document.addEventListener("click",function(e){var t=e.target.closest("[data-page]");if(t){e.preventDefault();var n=t.dataset.page;window.router.navigate(n)}else if("profile"!==window.currentPage||"function"!=typeof window.handleGlobalClick);else try{window.handleGlobalClick(e)}catch(e){}}),document.addEventListener("gesturestart",function(e){return e.preventDefault()}),function(){var e=0,t=0,n=!1,a=!1,o=document.createElement("div");o.id="pull-refresh-indicator",o.innerHTML='\n            <div class="refresh-spinner"></div>\n            <div class="refresh-text">下拉刷新</div>\n        ',o.style.cssText="\n            position: absolute;\n            top: -60px;\n            left: 0;\n            right: 0;\n            height: 60px;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            background: rgba(255, 255, 255, 0.95);\n            z-index: 100;\n            transition: transform 0.3s ease;\n    \n        ";var c=document.createElement("style");c.textContent="\n            .main--banner {\n                position: relative;\n                overflow: visible;\n            }\n            \n            .refresh-spinner {\n                width: 20px;\n                height: 20px;\n                border: 2px solid #f3f3f3;\n                border-top: 2px solid #3498db;\n                border-radius: 50%;\n                animation: spin 1s linear infinite;\n                opacity: 0;\n                transition: opacity 0.3s;\n            }\n            \n            .refresh-text {\n                font-size: 12px;\n                color: #666;\n                margin-top: 5px;\n            }\n            \n            #pull-refresh-indicator.active .refresh-spinner {\n                opacity: 1;\n            }\n            \n            @keyframes spin {\n                0% { transform: rotate(0deg); }\n                100% { transform: rotate(360deg); }\n            }\n        ",document.head.appendChild(c);var s=function(){var e=document.querySelector(".main--banner");e&&!document.getElementById("pull-refresh-indicator")&&e.insertBefore(o,e.firstChild)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s();var l=function(){return 0===window.scrollY||0===document.documentElement.scrollTop};document.addEventListener("touchstart",function(t){if(!a){var r=document.getElementById("dynamic-content");r&&r.contains(t.target)&&l()&&(e=t.touches[0].clientY,n=!1)}},{passive:!0}),document.addEventListener("touchmove",function(r){if(0!==e&&!a&&(document.getElementById("dynamic-content")&&l())){var i=(t=r.touches[0].clientY)-e;if(i>0){n=!0;var c=Math.min(.5*i,100);o.style.transform="translateY(".concat(c,"px)"),o.querySelector(".refresh-text").textContent=i>80?"松开刷新":"下拉刷新"}}},{passive:!0}),document.addEventListener("touchend",function(){var c=(0,r.A)(i().mark(function r(c){var l,u;return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n&&!a){r.next=1;break}return e=0,r.abrupt("return");case 1:if(!(t-e>80)){r.next=6;break}return a=!0,o.style.transform="translateY(60px)",o.classList.add("active"),o.querySelector(".refresh-text").textContent="正在刷新...",r.prev=2,l=window.currentPage||"home",u=window.currentPageParams||{},r.next=3,window.loadPage(l,u);case 3:s(),o.querySelector(".refresh-text").textContent="刷新成功",d()(function(){o.style.transform="translateY(0)",o.classList.remove("active"),a=!1},500),r.next=5;break;case 4:r.prev=4,r.catch(2),o.querySelector(".refresh-text").textContent="刷新失败",d()(function(){o.style.transform="translateY(0)",o.classList.remove("active"),a=!1},1e3);case 5:r.next=7;break;case 6:o.style.transform="translateY(0)";case 7:e=0,t=0,n=!1;case 8:case"end":return r.stop()}},r,null,[[2,4]])}));return function(e){return c.apply(this,arguments)}}(),{passive:!0})}(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){window.router.init()}):window.router.init())}()}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,a,i)=>{if(!n){var o=1/0;for(l=0;l<e.length;l++){for(var[n,a,i]=e[l],c=!0,s=0;s<n.length;s++)(!1&i||o>=i)&&Object.keys(r.O).every(e=>r.O[e](n[s]))?n.splice(s--,1):(c=!1,i<o&&(o=i));if(c){e.splice(l--,1);var d=a();void 0!==d&&(t=d)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,a,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.j=765,(()=>{var e={765:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,i,[o,c,s]=n,d=0;if(o.some(t=>0!==e[t])){for(a in c)r.o(c,a)&&(r.m[a]=c[a]);if(s)var l=s(r)}for(t&&t(n);d<o.length;d++)i=o[d],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(l)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[96],()=>r(31099));a=r.O(a)})();