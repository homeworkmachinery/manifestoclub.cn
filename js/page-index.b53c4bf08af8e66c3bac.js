/*! For license information please see page-index.b53c4bf08af8e66c3bac.js.LICENSE.txt */
(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(e(t)+" is not iterable")}function n(){var e,t,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function c(n,o,i,a){var c=o&&o.prototype instanceof d?o:d,l=Object.create(c.prototype);return r(l,"_invoke",function(n,r,o){var i,a,c,d=0,l=o||[],s=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,a=0,c=e,p.n=n,u}};function f(n,r){for(a=n,c=r,t=0;!s&&d&&!o&&t<l.length;t++){var o,i=l[t],f=p.p,w=i[2];n>3?(o=w===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=f&&((o=n<2&&f<i[1])?(a=0,p.v=r,p.n=i[1]):f<w&&(o=n<3||i[0]>r||r>w)&&(i[4]=n,i[5]=r,p.n=w,a=0))}if(o||n>1)return u;throw s=!0,r}return function(o,l,w){if(d>1)throw TypeError("Generator is already running");for(s&&1===l&&f(l,w),a=l,c=w;(t=a<2?e:c)||!s;){i||(a?a<3?(a>1&&(p.n=-1),f(a,c)):p.n=c:p.v=c);try{if(d=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(s=p.n<0)?c:n.call(r,p))!==u)break}catch(t){i=e,a=1,c=t}finally{d=1}}return{value:t,done:s}}}(n,i,a),!0),l}var u={};function d(){}function l(){}function s(){}t=Object.getPrototypeOf;var p=[][i]?t(t([][i]())):(r(t={},i,function(){return this}),t),f=s.prototype=d.prototype=Object.create(p);function w(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,r(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,r(f,"constructor",s),r(s,"constructor",l),l.displayName="GeneratorFunction",r(s,a,"GeneratorFunction"),r(f),r(f,a,"Generator"),r(f,i,function(){return this}),r(f,"toString",function(){return"[object Generator]"}),(n=function(){return{w:c,m:w}})()}function r(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}r=function(e,t,n,o){if(t)i?i(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n;else{var a=function(t,n){r(e,t,function(e){return this._invoke(t,n,e)})};a("next",0),a("throw",1),a("return",2)}},r(e,t,n,o)}function o(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function c(e){o(a,r,i,c,u,"next",e)}function u(e){o(a,r,i,c,u,"throw",e)}c(void 0)})}}!function(){function e(e){return r.apply(this,arguments)}function r(){return r=i(n().m(function e(t){var r,o,i,a,c,u,d=arguments;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:r=d.length>1&&void 0!==d[1]?d[1]:{},o=d.length>2&&void 0!==d[2]?d[2]:3,i=d.length>3&&void 0!==d[3]?d[3]:2e3,a=0;case 1:if(!(a<o)){e.n=9;break}return e.p=2,e.n=3,fetch(t,r);case 3:if((c=e.v).ok){e.n=4;break}throw new Error("HTTP ".concat(c.status));case 4:return e.a(2,c);case 5:if(e.p=5,u=e.v,!(a<o-1)){e.n=7;break}return e.n=6,new Promise(function(e){return setTimeout(e,i)});case 6:e.n=8;break;case 7:throw u;case 8:a++,e.n=1;break;case 9:return e.a(2)}},e,null,[[2,5]])})),r.apply(this,arguments)}window.__pageDelegationBound||(window.__pageDelegationBound=!0,window._loadedScriptElements=window._loadedScriptElements||{},window.closeMobileMenu=function(){var e=document.getElementById("mobileNav");e&&(e.style.display="none")},window.cleanupPageScripts=function(e){var t=window._loadedScriptElements[e];(Array.isArray(t)&&(t.forEach(function(e){try{e.remove()}catch(e){}}),delete window._loadedScriptElements[e]),document.querySelectorAll('script[data-page-script="page-'.concat(e,'.js"]')).forEach(function(e){return e.remove()}),window.pageScriptExecuted&&delete window["pageScriptExecuted_".concat(e)],window["pageInitialized_".concat(e)]&&delete window["pageInitialized_".concat(e)],window.executedInlineScripts)&&Array.from(window.executedInlineScripts).filter(function(t){return t.startsWith("".concat(e,"_inline_"))}).forEach(function(e){return window.executedInlineScripts.delete(e)});"home"===e&&(window.contentPageLoaded=!1,window.canvasSectionInitialized=!1,window.isTransferring=!1,window.transferLock=!1)},window.loadPageScript=function(e,t){return new Promise(function(n){if("page-content.js"!==e||"function"!=typeof window.transferToTShirt){var r=document.querySelector('script[data-page-script="'.concat(e,'"]'));r&&r.remove();var o=document.createElement("script");o.src="/js/".concat(e),o.setAttribute("data-page-script",e),t&&(o.setAttribute("data-page-owner",t),window._loadedScriptElements[t]=window._loadedScriptElements[t]||[],window._loadedScriptElements[t].push(o)),o.async=!1,o.onload=function(){return n()},o.onerror=function(){n()},document.body.appendChild(o)}else n()})},window.loadPage=function(){var r=i(n().m(function r(o,i){var a,c,u,d,l,s,p,f,w,h,m,y;return n().w(function(r){for(;;)switch(r.p=r.n){case 0:if(i||(i={}),a=document.getElementById("dynamic-content")){r.n=1;break}return r.a(2);case 1:if("function"==typeof window.cleanupCurrentPage&&window.cleanupCurrentPage(),(c={merch:"cleanupMerchPage","merch-content":"cleanupContentPage",profile:"cleanupProfilePage",home:"cleanupHomePage"}[window.currentPage])&&"function"==typeof window[c])try{window[c]()}catch(e){}if(window.currentPage&&window.currentPage!==o)try{cleanupPageScripts(window.currentPage)}catch(e){}return a.classList.add("fade-out"),r.p=2,u="/pages/".concat(o,".html"),r.n=3,e(u);case 3:if((d=r.v).ok){r.n=4;break}throw new Error("HTTP ".concat(d.status,": ").concat(d.statusText));case 4:return r.n=5,d.text();case 5:return l=r.v,s=new DOMParser,p=s.parseFromString(l,"text/html"),document.querySelectorAll("style[data-page]").forEach(function(e){return e.remove()}),p.querySelectorAll("style").forEach(function(e){var t=document.createElement("style");t.textContent=e.textContent,t.setAttribute("data-page",o),document.head.appendChild(t)}),a.innerHTML=p.body.innerHTML||l,window.currentPage=o,window.currentPageParams=i,r.n=6,loadPageScript("page-".concat(o,".js"),o);case 6:f=Array.from(p.querySelectorAll("script")),window.executedInlineScripts||(window.executedInlineScripts=new Set),window._loadedScriptElements[o]=window._loadedScriptElements[o]||[],w=n().m(function e(){var t,r,i;return n().w(function(e){for(;;)switch(e.n){case 0:if(!(t=f[h]).src){e.n=2;break}return e.n=1,new Promise(function(e){var n=document.createElement("script");n.src=t.getAttribute("src"),n.async=!1,n.setAttribute("data-page-owner",o),n.onload=e,n.onerror=function(){e()},document.body.appendChild(n),window._loadedScriptElements[o].push(n)});case 1:e.n=3;break;case 2:t.textContent&&t.textContent.trim()&&(r="".concat(o,"_inline_").concat(h),window.executedInlineScripts.has(r)||(window.executedInlineScripts.add(r),(i=document.createElement("script")).type="text/javascript",i.textContent=t.textContent,i.setAttribute("data-inline-id",r),i.setAttribute("data-page-owner",o),document.body.appendChild(i),window._loadedScriptElements[o].push(i)));case 3:return e.a(2)}},e)}),h=0;case 7:if(!(h<f.length)){r.n=9;break}return r.d(t(w()),8);case 8:h++,r.n=7;break;case 9:window["pageInitialized_".concat(o)]=!0,i.id&&setTimeout(function(){window.dispatchEvent(new CustomEvent("pageParamsLoaded",{detail:{page:o,params:i}}))},100),r.n=11;break;case 10:r.p=10,y=r.v,a.innerHTML="<p>页面加载失败: ".concat(y.message,"</p>");case 11:r.p=11,a.classList.remove("fade-out");try{closeMobileMenu()}catch(e){}return r.f(11);case 12:setTimeout(function(){window.innerWidth;window.scrollTo({top:0,behavior:"smooth"});var e=document.querySelector(".main--banner");e&&(e.scrollTop=0),a&&(a.scrollTop=0)},0),(m=document.querySelector(".languages"))&&(m.style.display="profile"===o?"none":""),"profile"===o&&setTimeout(function(){return window.dispatchEvent(new CustomEvent("profilePageLoaded"))},100),"gallery"===o&&setTimeout(function(){"function"==typeof initGallery?initGallery():setTimeout(function(){"function"==typeof initGallery&&initGallery()},500)},200);case 13:return r.a(2)}},r,null,[[2,10,11,12]])}));return function(e,t){return r.apply(this,arguments)}}(),window.router={init:function(){this.handleSPARedirect(),window.addEventListener("popstate",this.handlePopState.bind(this)),this.handleCurrentPath()},handleSPARedirect:function(){try{var e=sessionStorage.getItem("spa_redirect");if(e){var t=JSON.parse(e);sessionStorage.removeItem("spa_redirect");var n=t.path+t.search+t.hash;window.history.replaceState(null,"",n)}}catch(e){}},handleCurrentPath:function(){var e=window.location.pathname,t=this.parsePath(e),n=t.page,r=t.params;(n!==window.currentPage||r.id)&&window.loadPage(n,r)},parsePath:function(e){var t="home",n={};if(""===(e=e.replace(/\.html$/,"").replace(/\/$/,""))||"/"===e)t="home";else{var r=e.split("/").filter(function(e){return e});r.length>0&&(t=r[0],r.length>1&&(n.id=r[1]))}return{page:t,params:n}},handlePopState:function(e){this.handleCurrentPath()},navigate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="home"===e?"/":"/".concat(e);t.id&&(n+="/".concat(t.id)),window.history.pushState({page:e,params:t},"",n),window.loadPage(e,t)}},document.addEventListener("click",function(e){var t=e.target.closest("[data-page]");if(t){e.preventDefault();var n=t.dataset.page;window.router.navigate(n)}else if("profile"!==window.currentPage||"function"!=typeof window.handleGlobalClick);else try{window.handleGlobalClick(e)}catch(e){}}),document.addEventListener("gesturestart",function(e){return e.preventDefault()}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){window.router.init()}):window.router.init())}()})();