(()=>{"use strict";var e,t={31099:(e,t,n)=>{var r=n(34963),a=n(44828),o=n.n(a),c=n(14607),i=n.n(c),d=n(66615),l=n.n(d),u=n(86226),s=n.n(u),w=n(96319),p=n.n(w),f=n(49763),g=n.n(f),h=n(165),m=n.n(h),v=n(61240),y=n.n(v),x=n(8628),b=n.n(x),S=n(11393),E=n.n(S),_=n(59261),P=n.n(_),A=n(11265),k=n.n(A),C=n(56255),O=n.n(C);!function(){function e(e){return t.apply(this,arguments)}function t(){return t=(0,r.A)(o().mark(function e(t){var n,r,a,c,i,d,l=arguments;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:{},r=l.length>2&&void 0!==l[2]?l[2]:3,a=l.length>3&&void 0!==l[3]?l[3]:2e3,c=0;case 1:if(!(c<r)){e.next=9;break}return e.prev=2,e.next=3,fetch(t,n);case 3:if((i=e.sent).ok){e.next=4;break}throw new Error("HTTP ".concat(i.status));case 4:return e.abrupt("return",i);case 5:if(e.prev=5,d=e.catch(2),!(c<r-1)){e.next=7;break}return e.next=6,new(y())(function(e){return O()(e,a)});case 6:e.next=8;break;case 7:throw d;case 8:c++,e.next=1;break;case 9:case"end":return e.stop()}},e,null,[[2,5]])})),t.apply(this,arguments)}i()(function(){window.SUPABASE_URL&&window.SUPABASE_ANON_KEY&&fetch("".concat(window.SUPABASE_URL,"/rest/v1/"),{method:"HEAD",headers:{apikey:window.SUPABASE_ANON_KEY,Authorization:"Bearer ".concat(window.SUPABASE_ANON_KEY)}}).catch(function(){})},6e4),window.__pageDelegationBound||(window.__pageDelegationBound=!0,window._loadedScriptElements=window._loadedScriptElements||{},window.closeMobileMenu=function(){var e=document.getElementById("mobileNav");e&&(e.style.display="none")},window.cleanupPageScripts=function(e){var t=window._loadedScriptElements[e];l()(t)&&(s()(t).call(t,function(e){try{e.remove()}catch(e){}}),delete window._loadedScriptElements[e]);var n=document.querySelectorAll('script[data-page-script="page-'.concat(e,'.js"]'));if(s()(n).call(n,function(e){return e.remove()}),window.pageScriptExecuted&&delete window["pageScriptExecuted_".concat(e)],window["pageInitialized_".concat(e)]&&delete window["pageInitialized_".concat(e)],window.executedInlineScripts){var r,a=p()(r=g()(window.executedInlineScripts)).call(r,function(t){return m()(t).call(t,"".concat(e,"_inline_"))});s()(a).call(a,function(e){return window.executedInlineScripts.delete(e)})}"home"===e&&(window.contentPageLoaded=!1,window.canvasSectionInitialized=!1,window.isTransferring=!1,window.transferLock=!1)},window.loadPageScript=function(e,t){return new(y())(function(n){if("page-content.js"!==e||"function"!=typeof window.transferToTShirt){var r=document.querySelector('script[data-page-script="'.concat(e,'"]'));r&&r.remove();var a=document.createElement("script");a.src="/js/".concat(e),a.setAttribute("data-page-script",e),t&&(a.setAttribute("data-page-owner",t),window._loadedScriptElements[t]=window._loadedScriptElements[t]||[],window._loadedScriptElements[t].push(a)),a.async=!1,a.onload=function(){return n()},a.onerror=function(){n()},document.body.appendChild(a)}else n()})},window.loadPage=function(){var t=(0,r.A)(o().mark(function t(n){var r,a,c,i,d,l,u,w,p,f,h,m,v,x,S;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=document.getElementById("dynamic-content")){t.next=1;break}return t.abrupt("return");case 1:if("function"==typeof window.cleanupCurrentPage&&window.cleanupCurrentPage(),(a={merch:"cleanupMerchPage",content:"cleanupContentPage",profile:"cleanupProfilePage",home:"cleanupHomePage"}[window.currentPage])&&"function"==typeof window[a])try{window[a]()}catch(e){}if(window.currentPage&&window.currentPage!==n)try{cleanupPageScripts(window.currentPage)}catch(e){}return r.classList.add("fade-out"),t.prev=2,l=b()(c=["localhost","127.0.0.1"]).call(c,window.location.hostname)?"/pages/".concat(n,".html"):"".concat(n,".html"),t.next=3,e(l);case 3:if((u=t.sent).ok){t.next=4;break}throw new Error(E()(i="HTTP ".concat(u.status,": ")).call(i,u.statusText));case 4:return t.next=5,u.text();case 5:return w=t.sent,p=new DOMParser,f=p.parseFromString(w,"text/html"),s()(d=document.querySelectorAll("style[data-page]")).call(d,function(e){return e.remove()}),h=f.querySelectorAll("style"),s()(h).call(h,function(e){var t=document.createElement("style");t.textContent=e.textContent,t.setAttribute("data-page",n),document.head.appendChild(t)}),r.innerHTML=f.body.innerHTML||w,window.currentPage=n,t.next=6,loadPageScript("page-".concat(n,".js"),n);case 6:m=g()(f.querySelectorAll("script")),window.executedInlineScripts||(window.executedInlineScripts=new(P())),window._loadedScriptElements[n]=window._loadedScriptElements[n]||[],v=o().mark(function e(){var t,r,a,c,i;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=m[x]).src){e.next=2;break}return e.next=1,new(y())(function(e){var t=document.createElement("script");t.src=r.getAttribute("src"),t.async=!1,t.setAttribute("data-page-owner",n),t.onload=e,t.onerror=function(){e()},document.body.appendChild(t),window._loadedScriptElements[n].push(t)});case 1:e.next=3;break;case 2:r.textContent&&k()(t=r.textContent).call(t)&&(c=E()(a="".concat(n,"_inline_")).call(a,x),window.executedInlineScripts.has(c)||(window.executedInlineScripts.add(c),(i=document.createElement("script")).type="text/javascript",i.textContent=r.textContent,i.setAttribute("data-inline-id",c),i.setAttribute("data-page-owner",n),document.body.appendChild(i),window._loadedScriptElements[n].push(i)));case 3:case"end":return e.stop()}},e)}),x=0;case 7:if(!(x<m.length)){t.next=9;break}return t.delegateYield(v(),"t0",8);case 8:x++,t.next=7;break;case 9:window["pageInitialized_".concat(n)]=!0,t.next=11;break;case 10:t.prev=10,S=t.catch(2),r.innerHTML="<p>页面加载失败: ".concat(S.message,"</p>");case 11:t.prev=11,r.classList.remove("fade-out");try{closeMobileMenu()}catch(e){}return t.finish(11);case 12:"profile"===n&&O()(function(){return window.dispatchEvent(new CustomEvent("profilePageLoaded"))},100),"gallery"===n&&O()(function(){"function"==typeof initGallery?initGallery():O()(function(){"function"==typeof initGallery&&initGallery()},500)},200);case 13:case"end":return t.stop()}},t,null,[[2,10,11,12]])}));return function(e){return t.apply(this,arguments)}}(),document.addEventListener("click",function(e){var t=e.target.closest("[data-page]");if(t)return e.preventDefault(),void window.loadPage(t.dataset.page);if("profile"!==window.currentPage||"function"!=typeof window.handleGlobalClick);else try{window.handleGlobalClick(e)}catch(e){}}),document.addEventListener("gesturestart",function(e){return e.preventDefault()}),window.loadPage("home"))}()}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,n,a,o)=>{if(!n){var c=1/0;for(u=0;u<e.length;u++){for(var[n,a,o]=e[u],i=!0,d=0;d<n.length;d++)(!1&o||c>=o)&&Object.keys(r.O).every(e=>r.O[e](n[d]))?n.splice(d--,1):(i=!1,o<c&&(c=o));if(i){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,a,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.j=765,(()=>{var e={765:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[c,i,d]=n,l=0;if(c.some(t=>0!==e[t])){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(d)var u=d(r)}for(t&&t(n);l<c.length;l++)o=c[l],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[96],()=>r(31099));a=r.O(a)})();