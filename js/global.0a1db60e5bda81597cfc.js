(()=>{"use strict";var e,t={15230:(e,t,r)=>{var a=r(5773),n=r(39653),s=r(56213),i=r(34963),o=r(44828),u=r.n(o),c=r(11265),l=r.n(c),d=r(56255),p=r.n(d),g=r(54929),m=r.n(g),h=r(18979),b=r.n(h),f=r(61240),y=r.n(f),v=r(29550),w=r.n(v),k=r(11393),x=r.n(k),E=r(74707),I=r.n(E),C=r(86226),S=r.n(C),A=r(15413),B=r.n(A),D=r(66512),L=r.n(D),_=r(8628),M=r.n(_),j=r(49763),T=r.n(j),q=r(48079),O=r.n(q),U=r(71426),P=r.n(U),F=r(86129),R=r.n(F);function z(){var e,t,r,a=document.getElementById("manifesto"),n=(e=(0,i.A)(u().mark(function e(){var t,r;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=l()(t=this.value).call(t))){e.next=2;break}return e.next=1,H(r);case 1:e.next=3;break;case 2:return e.next=3,H("MANIFESTOCLUB");case 3:case"end":return e.stop()}},e,this)})),t=300,function(){var a=this,n=arguments;clearTimeout(r),r=p()(function(){e.apply(a,n)},t)});a.addEventListener("input",n)}function H(e){return N.apply(this,arguments)}function N(){return N=(0,i.A)(u().mark(function e(t){var r,a,n,s,i,o=arguments;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:"barcode",a="ManifestoClub",n="MANIFESTOCLUB",!t||"MANIFESTOCLUB"===t){e.next=2;break}return e.next=1,G(t);case 1:s=e.sent,a=b()(s).call(s,0,15),n=s,e.next=4;break;case 2:return e.next=3,G("MANIFESTOCLUB");case 3:n=e.sent;case 4:try{(i=document.getElementById(r)).innerHTML="",R(),R()(i,n,{format:"CODE128",displayValue:!0,text:a,font:'"Lucida Console"',width:2,height:80,margin:0}),i.setAttribute("data-barcode",n)}catch(e){}return e.abrupt("return",n);case 5:case"end":return e.stop()}},e)})),N.apply(this,arguments)}function G(e){return V.apply(this,arguments)}function V(){return(V=(0,i.A)(u().mark(function e(t){var r,a,n,s,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"==typeof crypto||!crypto.subtle){e.next=4;break}return e.prev=1,r=new TextEncoder,a=r.encode(t),e.next=2,crypto.subtle.digest("SHA-256",a);case 2:return n=e.sent,s=T()(new Uint8Array(n)),i=O()(s).call(s,function(e){var t;return m()(t=e.toString(16)).call(t,2,"0")}).join(""),e.abrupt("return",b()(i).call(i,0,15));case 3:return e.prev=3,e.catch(1),e.abrupt("return",Y(t));case 4:return e.abrupt("return",Y(t));case 5:case"end":return e.stop()}},e,null,[[1,3]])}))).apply(this,arguments)}function Y(e){for(var t,r=0,a=e+"MANIFESTOCLUB_SALT",n=0;n<a.length;n++){r=(r<<5)-r+a.charCodeAt(n),r&=r}for(var s=Math.abs(r),i=m()(t=s.toString(16)).call(t,8,"0");i.length<15;)i+=s.toString(16);return b()(i).call(i,0,15)}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;return new(y())(function(r,a){var n=document.getElementById(e);if(n)r(n);else{var s=w()(),i=function(){var n,o=document.getElementById(e);o?r(o):w()()-s>t?a(new Error(x()(n="Element ".concat(e," not found within ")).call(n,t,"ms"))):p()(i,50)};i()}})}window.addEventListener("load",function(){H("MANIFESTOCLUB"),z()});var K=new(function(){return(0,s.A)(function e(){(0,n.A)(this,e),this.cache=new(I()),this.isReady=!0},[{key:"generateBarcodeImage",value:(r=(0,i.A)(u().mark(function e(t,r){var a,n,s,i=arguments;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:"member-barcode-complete",e.prev=1,e.next=2,Q(a,5e3);case 2:return n=e.sent,e.next=3,this.createBarcodeCanvas(t,r,n);case 3:return s=e.sent,n&&s&&(n.style.width="100%",n.style.height="auto",n.style.objectFit="contain",n.style.display="block"),e.abrupt("return",s);case 4:e.prev=4,e.catch(1);case 5:case"end":return e.stop()}},e,this,[[1,4]])})),function(e,t){return r.apply(this,arguments)})},{key:"createBarcodeCanvas",value:(t=(0,i.A)(u().mark(function e(t,r,a){var n,s,i,o,c,d,p,g,m,h,b,f,y,v,w,k,E,I,C,A,D;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=x()(n="barcode_".concat(t,"_")).call(n,r),!this.cache.has(s)){e.next=1;break}return i=this.cache.get(s),a.src=i,a.style.display="block",e.abrupt("return",i);case 1:if(e.prev=1,o=function(e,t,r,a,n,s){for(var i=t.split(" "),o="",u=[],d=0;d<i.length;d++){var p=o+i[d]+" ";e.measureText(p).width>n&&d>0?(u.push(l()(o).call(o)),o=i[d]+" "):o=p}u.push(l()(o).call(o));var g=[];S()(u).call(u,function(t){if(e.measureText(t).width>n){for(var r="",a=0;a<t.length;a++){var s=r+t[a];e.measureText(s).width>n&&r.length>0?(g.push(r),r=t[a]):r=s}r&&g.push(r)}else g.push(t)});var m=g.length*s,h=a-m/2+s/2,b=c.width,f=0;return S()(g).call(g,function(t,a){var n=h+a*s;e.fillText(t,r,n);var i=e.measureText(t).width,o=r-i/2,u=r+i/2;b=Math.min(b,o),f=Math.max(f,u)}),{endY:h+m,minX:b,maxX:f,startY:h,height:m}},c=document.createElement("canvas"),d=c.getContext("2d"),c.width=1500,c.height=800,d.fillStyle="#000000",d.font="".concat(90,"px Arial, sans-serif"),d.textAlign="center",p=c.width,g=o(d,t,c.width/2,200,p,108),m=Math.max(g.endY-65,-200),(h=document.createElement("canvas")).width=1500,h.height=500,h.getContext("2d").clearRect(0,0,h.width,h.height),R()(h,r,{format:"CODE128",displayValue:!0,width:10,height:300,margin:0,background:"transparent",font:'"Lucida Console"',fontSize:100}),b=(c.width-h.width)/2,d.drawImage(h,b,m),!(f=this.getContentBounds(d,c.width,c.height))){e.next=2;break}return y=Math.max(0,f.minX-20),v=Math.max(0,f.minY-20),w=Math.min(c.width,f.maxX+20)-y,k=Math.min(c.height,f.maxY+20)-v,(E=document.createElement("canvas")).width=w,E.height=k,E.getContext("2d").drawImage(c,y,v,w,k,0,0,w,k),I=E.toDataURL("image/png"),this.cache.size>50&&(A=B()(C=this.cache).call(C).next().value,this.cache.delete(A)),this.cache.set(s,I),a.src=I,a.style.display="block",e.abrupt("return",I);case 2:return D=c.toDataURL("image/png"),this.cache.set(s,D),a.src=D,a.style.display="block",e.abrupt("return",D);case 3:return e.prev=3,e.catch(1),e.abrupt("return",null);case 4:case"end":return e.stop()}},e,this,[[1,3]])})),function(e,r,a){return t.apply(this,arguments)})},{key:"getContentBounds",value:function(e,t,r){try{for(var a=e.getImageData(0,0,t,r).data,n=t,s=0,i=r,o=0,u=!1,c=0;c<r;c++)for(var l=0;l<t;l++){var d=4*(c*t+l),p=a[d],g=a[d+1],m=a[d+2];a[d+3]>0&&(p<250||g<250||m<250)&&(u=!0,n=Math.min(n,l),s=Math.max(s,l),i=Math.min(i,c),o=Math.max(o,c))}return u?{minX:n,maxX:s,minY:i,maxY:o}:null}catch(e){return null}}},{key:"preloadBarcode",value:(e=(0,i.A)(u().mark(function e(t,r){var a,n,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=x()(a="barcode_".concat(t,"_")).call(a,r),this.cache.has(n)){e.next=1;break}return s=document.createElement("img"),e.next=1,this.createBarcodeCanvas(t,r,s);case 1:case"end":return e.stop()}},e,this)})),function(t,r){return e.apply(this,arguments)})}]);var e,t,r}());function X(){return W.apply(this,arguments)}function W(){return(W=(0,i.A)(u().mark(function e(){var t,r,a,n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"undefined"!=typeof supabase){e.next=1;break}return e.abrupt("return");case 1:return e.next=2,supabase.auth.getUser();case 2:if(t=e.sent,r=t.data.user){e.next=3;break}return e.abrupt("return");case 3:return e.next=4,supabase.from("profiles").select("manifesto, barcode").eq("user_id",r.id).single();case 4:if(a=e.sent,n=a.data,!a.error){e.next=5;break}return e.abrupt("return");case 5:if(!n||!n.barcode){e.next=7;break}return e.next=6,K.generateBarcodeImage(n.manifesto||"No manifesto",n.barcode,"member-barcode-complete");case 6:case 7:e.next=9;break;case 8:e.prev=8,e.catch(0);case 9:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function $(){return($=(0,i.A)(u().mark(function e(){var t,r,a,n,s,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,H("MANIFESTOCLUB");case 1:return z(),e.next=2,J();case 2:if(t=window.location.hash,!M()(t).call(t,"access_token")&&!M()(t).call(t,"refresh_token")){e.next=4;break}return e.next=3,supabase.auth.getSession();case 3:r=e.sent,a=r.data,r.error||a.session&&(n=new(L())(window.location.search),s="password_update"===n.get("type"),i=n.get("email"),s&&i&&Ce(decodeURIComponent(i))),window.history.replaceState({},"",window.location.pathname);case 4:xe(),Le(),e.next=6;break;case 5:e.prev=5,e.catch(0);case 6:case"end":return e.stop()}},e,null,[[0,5]])}))).apply(this,arguments)}function J(){return Z.apply(this,arguments)}function Z(){return(Z=(0,i.A)(u().mark(function e(){var t,r,a,n,s,o,c,d,g,m,h,b,f,y,v,w,k,x,E;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return document.documentElement.classList.remove("lock"),e.next=1,supabase.auth.getUser();case 1:t=e.sent,r=t.data.user,a=document.querySelector(".header__nav li:last-child"),n=document.querySelector(".header__nav--mobile ul"),r?(a&&(a.innerHTML='\n        <div class="user-menu">\n          <span class="user-menu-trigger">(ME)</span>\n          <div class="user-dropdown" id="user-dropdown" style="display: none;">\n            <div class="user-info">\n              <a class="profile" href="profile" data-page="profile">Profile</a>\n            </div>\n            <div class="user-actions">\n              <span class="logout-btn">LOGOUT</span>\n            </div>\n          </div>\n        </div>\n      '),n&&(s=n.querySelector("li .profile"),o=n.querySelector("li .logout-btn"),c=n.querySelector("li .cart-link"),s&&o&&c||(g=P()(d=T()(n.querySelectorAll("li"))).call(d,function(e){var t,r=e.querySelector("span");return r&&"LOGIN"===l()(t=r.textContent).call(t)}),c||((m=document.createElement("li")).innerHTML='\n   <div class="cart-link" href="cart" data-page="cart">CART(<span id="cartBadgeMobile">0</span>)</div>',g.insertAdjacentElement("beforebegin",m)),g&&(g.innerHTML='<a class="profile" href="profile" data-page="profile">PROFILE</a>',o||((h=document.createElement("li")).innerHTML='<span class="logout-btn">LOGOUT</span>',n.appendChild(h))))),p()((0,i.A)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,X();case 1:case"end":return e.stop()}},e)})),100)):(a&&(a.innerHTML='<span id="login-trigger">Login</span>'),n&&(w=null===(b=n.querySelector("li .profile"))||void 0===b?void 0:b.parentElement,k=null===(f=n.querySelector("li .logout-btn"))||void 0===f?void 0:f.parentElement,w&&w.remove(),k&&k.remove(),"LOGIN"===(null===(y=n.querySelector("li span"))||void 0===y?void 0:l()(v=y.textContent).call(v))||((x=document.createElement("li")).innerHTML="<span>LOGIN</span>",n.appendChild(x))),(E=document.getElementById("member-barcode-complete"))&&(E.style.display="none",E.src=""));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ee(){return te.apply(this,arguments)}function te(){return(te=(0,i.A)(u().mark(function e(){var t,r,a,n,s,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=document.getElementById("manifesto"),a=document.querySelector(".check-manifesto"),(n=document.getElementById("manifesto-error")).style.display="none",a.innerHTML="",l()(t=r.value).call(t)){e.next=1;break}return n.textContent="Please enter your manifesto",n.style.display="block",e.abrupt("return",!1);case 1:return e.next=2,re(r.value);case 2:return s=e.sent,(i=a.querySelector("img"))||((i=document.createElement("img")).alt=s?"Valid":"Invalid",a.appendChild(i)),s?(i.src="/images/yes.png",n.style.display="none"):(i.src="/images/no.png",n.textContent="This manifesto already exists",n.style.display="block"),e.abrupt("return",s);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(e){return ae.apply(this,arguments)}function ae(){return(ae=(0,i.A)(u().mark(function e(t){var r,a;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l()(t).call(t)){e.next=1;break}return e.abrupt("return",!1);case 1:return e.next=2,supabase.from("profiles").select("manifesto").eq("manifesto",t);case 2:if(r=e.sent,a=r.data,!r.error){e.next=3;break}return e.abrupt("return",!1);case 3:return e.abrupt("return",0===a.length);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ne(){return se.apply(this,arguments)}function se(){return(se=(0,i.A)(u().mark(function e(){var t,r,a,n,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("signup-email"),r=document.querySelector(".check-email"),a=document.getElementById("email-error"),r.innerHTML="",a.style.display="none",e.next=1,ie(t.value);case 1:if((n=e.sent).valid){e.next=7;break}s=n.reason,e.next="empty"===s?2:"invalid_format"===s?3:"registered"===s?4:5;break;case 2:return e.abrupt("return",!1);case 3:return a.textContent="Please enter a valid email address",e.abrupt("continue",6);case 4:return a.textContent="This email is already registered",e.abrupt("continue",6);case 5:a.textContent="Validation error";case 6:return a.style.display="block",r.innerHTML='<img src="/images/no.png" alt="Invalid">',e.abrupt("return",!1);case 7:return r.innerHTML='<img src="/images/yes.png" alt="Valid">',e.abrupt("return",!0);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ie(e){return oe.apply(this,arguments)}function oe(){return(oe=(0,i.A)(u().mark(function e(t){var r,a;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l()(t).call(t)){e.next=1;break}return e.abrupt("return",{valid:!1,reason:"empty"});case 1:if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){e.next=2;break}return e.abrupt("return",{valid:!1,reason:"invalid_format"});case 2:return e.next=3,supabase.from("profiles").select("email").eq("email",t);case 3:if(r=e.sent,a=r.data,!r.error){e.next=4;break}return e.abrupt("return",{valid:!1,reason:"error"});case 4:return e.abrupt("return",{valid:0===a.length,reason:0===a.length?"available":"registered"});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(){return ce.apply(this,arguments)}function ce(){return(ce=(0,i.A)(u().mark(function e(){var t,r,a,n,s,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=document.getElementById("signup-password"),a=document.querySelector(".check-password"),n=document.getElementById("password-error"),a.innerHTML="",n.style.display="none",0!==(s=l()(t=r.value).call(t)).length){e.next=1;break}return e.abrupt("return",!1);case 1:return(i=s.length>=8)?a.innerHTML='<img src="/images/yes.png" alt="Valid">':(a.innerHTML='<img src="/images/no.png" alt="Invalid">',n.textContent="Password must be longer than 8 characters",n.style.display="block"),e.abrupt("return",i);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function le(){return de.apply(this,arguments)}function de(){return(de=(0,i.A)(u().mark(function e(){var t,r,n,s,i,o,c,l,d,g,m,h,b,f,v;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,y().all([ee(),ne(),ue()]);case 1:if(t=e.sent,r=(0,a.A)(t,3),n=r[0],s=r[1],i=r[2],n&&s&&i){e.next=2;break}return o=function(e){e.style.display="none",p()(function(){return e.style.display="block"},10)},n||(o(document.getElementById("manifesto-error")),document.getElementById("manifesto").focus()),s||(o(document.getElementById("email-error")),document.getElementById("signup-email").focus()),i||(o(document.getElementById("password-error")),document.getElementById("signup-password").focus()),e.abrupt("return");case 2:return c=document.getElementById("signup-email").value,l=document.getElementById("signup-password").value,d=document.getElementById("manifesto").value,e.next=3,H(d);case 3:return g=e.sent,e.next=4,supabase.auth.signUp({email:c,password:l,options:{data:{manifesto:d,barcode:g}}});case 4:if(m=e.sent,h=m.data,!(b=m.error)){e.next=5;break}throw b;case 5:return e.next=6,supabase.from("profiles").upsert({user_id:h.user.id,email:c,manifesto:d,barcode:g,created_at:new Date});case 6:if(f=e.sent,!(v=f.error)){e.next=7;break}throw v;case 7:pe({email:c,manifesto:d});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(e){document.querySelector(".auth-modal-header").style.display="none",document.getElementById("login-form").style.display="none",document.getElementById("signup-form").style.display="none",document.getElementById("password-reset-form").style.display="none",document.getElementById("signup-success-form").style.display="block",document.getElementById("manifesto-code").textContent=e.manifesto,document.getElementById("success-email").textContent=e.email,H(e.manifesto,"barcode-success")}function ge(){return me.apply(this,arguments)}function me(){return(me=(0,i.A)(u().mark(function e(){var t,r,a,n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("success-email").textContent,r=document.getElementById("resend-button"),e.prev=1,r.disabled=!0,r.textContent="Sending...",e.next=2,new(y())(function(e){return p()(e,50)});case 2:return e.next=3,supabase.auth.resend({type:"signup",email:t});case 3:if(a=e.sent,!(n=a.error)){e.next=4;break}throw n;case 4:r.textContent="✓ Email Resent",e.next=6;break;case 5:e.prev=5,e.catch(1),r.textContent="Resend Verification Email",r.disabled=!1;case 6:case"end":return e.stop()}},e,null,[[1,5]])}))).apply(this,arguments)}function he(){document.getElementById("auth-modal").style.display="none",be()}function be(){var e,t;document.querySelector(".auth-modal-header").style.display="block",document.getElementById("login-form").style.display="block",document.getElementById("signup-form").style.display="none",document.getElementById("signup-success-form").style.display="none",document.getElementById("password-reset-form").style.display="none",document.getElementById("signup-email").value="",document.getElementById("signup-password").value="",document.getElementById("manifesto").value="",document.getElementById("login-email").value="",document.getElementById("login-password").value="",S()(e=document.querySelectorAll(".check-icon")).call(e,function(e){e.innerHTML=""}),S()(t=document.querySelectorAll(".error-message")).call(t,function(e){e.style.display="none"}),H("MANIFESTOCLUB")}function fe(){document.getElementById("login-form").style.display="none",document.getElementById("password-reset-form").style.display="block"}function ye(){document.getElementById("login-form").style.display="block",document.getElementById("signup-form").style.display="none",document.getElementById("password-reset-form").style.display="none",document.getElementById("update-password-form").style.display="none"}function ve(){document.getElementById("login-form").style.display="none",document.getElementById("signup-form").style.display="block"}document.addEventListener("visibilitychange",function(){document.hidden||"profile"!==window.currentPage||p()((0,i.A)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,X();case 1:case"end":return e.stop()}},e)})),100)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".member-code-container");e&&(e.style.width="100%",e.style.boxSizing="border-box");var t=document.querySelector(".barcode-wrapper");t&&(t.style.width="100%")}),document.addEventListener("DOMContentLoaded",function(){return $.apply(this,arguments)}),"undefined"!=typeof window&&(window.barcodeGenerator=K,window.generateBarcode=H),window.openAuthModal=function(){var e=document.getElementById("auth-modal");if(e){e.style.display="block";var t=sessionStorage.getItem("resetEmail"),r=new(L())(window.location.search),a="password_update"===r.get("type"),n=r.get("email");a&&n?(Ce(decodeURIComponent(n)),window.history.replaceState({},document.title,window.location.pathname)):t?Ce(t):r.has("login")&&ye()}},window.handleModalClick=function(e){e.target===document.getElementById("auth-modal")&&(document.getElementById("auth-modal").style.display="none",be())};var we,ke=sessionStorage.getItem("resetEmail")||"";function xe(){var e=new(L())(window.location.search),t=e.get("email"),r="password_update"===e.get("type");t&&r&&(ke=decodeURIComponent(t),sessionStorage.setItem("resetEmail",ke),Ce(ke),window.history.replaceState({},"",window.location.pathname))}function Ee(){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,i.A)(u().mark(function e(){var t,r,a,n,s,i,o,c,d,g;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l()(t=document.getElementById("reset-email").value).call(t),a=document.getElementById("reset-link"),(n=document.getElementById("reset-error")).style.display="none",n.textContent="",r){e.next=1;break}return n.textContent="Please enter your email address",n.style.display="block",e.abrupt("return");case 1:if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)){e.next=2;break}return n.textContent="Please enter a valid email address",n.style.display="block",e.abrupt("return");case 2:return e.prev=2,a.disabled=!0,a.textContent="Sending...",e.next=3,supabase.from("profiles").select("email").eq("email",r).single();case 3:if(o=e.sent,c=o.data,!o.error&&c){e.next=4;break}throw n.textContent="This email is not registered",n.style.display="block",new Error("Email not registered");case 4:return e.next=5,supabase.auth.resetPasswordForEmail(r,{redirectTo:x()(s=x()(i="".concat(window.location.origin)).call(i,window.location.pathname,"?type=password_update&email=")).call(s,encodeURIComponent(r))});case 5:if(d=e.sent,!(g=d.error)){e.next=6;break}throw g;case 6:a.textContent="✓ Email Sent",sessionStorage.setItem("resetEmail",r),p()(function(){a.textContent="SEND RESET LINK",a.disabled=!1},3e3),e.next=8;break;case 7:e.prev=7,e.catch(2),n.textContent="Failed to send reset link. Please try again.",n.style.display="block",a.textContent="SEND RESET LINK",a.disabled=!1;case 8:case"end":return e.stop()}},e,null,[[2,7]])}))).apply(this,arguments)}function Ce(e){document.getElementById("login-form").style.display="none",document.getElementById("signup-form").style.display="none",document.getElementById("password-reset-form").style.display="none",document.getElementById("update-password-form").style.display="block",document.getElementById("reset-email-display").value=e,document.getElementById("new-password").value="",document.getElementById("confirm-password").value="",document.getElementById("update-password-error").style.display="none",document.getElementById("confirm-password-error").style.display="none",Se()}function Se(){var e=document.getElementById("new-password").value,t=document.getElementById("confirm-password").value,r=document.querySelector(".check-new-password"),a=document.querySelector(".check-confirm-password"),n=document.getElementById("update-password-error"),s=document.getElementById("confirm-password-error"),i=document.getElementById("update-password");n.style.display="none",s.style.display="none",r.innerHTML="",a.innerHTML="";var o=!0;return e.length>0&&e.length<8?(Ae(r,!1),n.textContent="Password must be at least 8 characters",n.style.display="block",o=!1):e.length>=8&&Ae(r,!0),e&&t&&e!==t?(Ae(a,!1),s.textContent="Passwords do not match",s.style.display="block",o=!1):t&&e===t&&Ae(a,!0),i.disabled=!o,o}function Ae(e,t){e.innerHTML="";var r=document.createElement("img");r.src=t?".../images/yes.png":".../images/no.png",r.alt=t?"Valid":"Invalid",e.appendChild(r)}function Be(){return De.apply(this,arguments)}function De(){return(De=(0,i.A)(u().mark(function e(){var t,r,a,n,s,i,o,c,l,d;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Se()){e.next=1;break}return e.abrupt("return");case 1:return t=document.getElementById("new-password").value,r=document.getElementById("update-password"),a=document.getElementById("update-password-error"),e.prev=2,r.disabled=!0,r.textContent="Updating...",e.next=3,supabase.auth.getSession();case 3:if(n=e.sent,s=n.data.session,!n.error&&s){e.next=4;break}throw new Error("Your password reset link has expired. Please request a new one.");case 4:return e.next=5,supabase.auth.updateUser({password:t});case 5:if(i=e.sent,!(o=i.error)){e.next=6;break}throw o;case 6:r.textContent="✓ Password Updated",sessionStorage.removeItem("resetEmail"),p()(function(){ye(),document.getElementById("new-password").value="",document.getElementById("confirm-password").value="",alert("Password updated successfully! Please log in with your new password.")},1500),e.next=8;break;case 7:e.prev=7,d=e.catch(2),a.textContent=M()(c=d.message).call(c,"expired")||M()(l=d.message).call(l,"Auth session missing")?"Your password reset link has expired. Please request a new one.":"Error: ".concat(d.message),a.style.display="block",r.textContent="UPDATE PASSWORD",r.disabled=!1;case 8:case"end":return e.stop()}},e,null,[[2,7]])}))).apply(this,arguments)}function Le(){document.getElementById("new-password").addEventListener("input",function(){clearTimeout(we),we=p()(Se,300)}),document.getElementById("confirm-password").addEventListener("input",function(){clearTimeout(we),we=p()(Se,300)})}function _e(){return Me.apply(this,arguments)}function Me(){return(Me=(0,i.A)(u().mark(function e(){var t,r,a,n,s,i,o,c,d,p;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l()(t=document.getElementById("login-email").value).call(t),a=document.getElementById("login-password").value,document.getElementById("login-error"),Te(),r&&a){e.next=1;break}return je("Please enter both email/manifesto and password"),e.abrupt("return");case 1:if(e.prev=1,n=r,M()(r).call(r,"@")){e.next=4;break}return e.next=2,supabase.from("profiles").select("email").eq("manifesto",r).single();case 2:if(s=e.sent,i=s.data,!s.error&&i){e.next=3;break}return je("Manifesto not found. Please check your manifesto or use your email instead."),e.abrupt("return");case 3:n=i.email;case 4:return e.next=5,supabase.auth.signInWithPassword({email:n,password:a});case 5:if(o=e.sent,o.data,!(c=o.error)){e.next=6;break}M()(d=c.message).call(d,"Invalid login credentials")?je("Invalid credentials. Please check your password."):M()(p=c.message).call(p,"Email not confirmed")?je("Please verify your email address first."):je("Login failed: "+c.message),e.next=7;break;case 6:return Te(),he(),e.next=7,J();case 7:e.next=9;break;case 8:e.prev=8,e.catch(1),je("An error occurred during login. Please try again.");case 9:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function je(e){var t=document.getElementById("login-error");t&&(t.textContent=e,t.style.display="block",t.style.opacity="0",p()(function(){t.style.opacity="1"},10))}function Te(){var e=document.getElementById("login-error");e&&(e.style.display="none",e.textContent="")}function qe(){var e=document.getElementById("login-email"),t=document.getElementById("login-password");e&&(e.addEventListener("blur",function(){var e,t=function(e){if(!l()(e).call(e))return{valid:!1,message:"Please enter your email or manifesto"};if(M()(e).call(e,"@")&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return{valid:!1,message:"Please enter a valid email address"};return{valid:!0}}(this.value);!t.valid&&l()(e=this.value).call(e)&&je(t.message)}),e.addEventListener("input",function(){Te()})),t&&t.addEventListener("input",function(){Te()})}function Oe(){return(Oe=(0,i.A)(u().mark(function e(){var t,r;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,supabase.auth.signOut();case 1:if(t=e.sent,!(r=t.error)){e.next=2;break}throw r;case 2:return e.next=3,J();case 3:e.next=5;break;case 4:e.prev=4,e.catch(0);case 5:case"end":return e.stop()}},e,null,[[0,4]])}))).apply(this,arguments)}document.addEventListener("DOMContentLoaded",(0,i.A)(u().mark(function e(){var t,r,a,n,s,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,J();case 1:if(t=window.location.hash,!M()(t).call(t,"access_token")&&!M()(t).call(t,"refresh_token")){e.next=6;break}return e.prev=2,e.next=3,supabase.auth.getSession();case 3:r=e.sent,a=r.data,r.error||a.session&&(n=new(L())(window.location.search),s="password_update"===n.get("type"),i=n.get("email"),s&&i&&Ce(decodeURIComponent(i))),e.next=5;break;case 4:e.prev=4,e.catch(2);case 5:window.history.replaceState({},"",window.location.pathname);case 6:xe(),Le();case 7:case"end":return e.stop()}},e,null,[[2,4]])}))),document.addEventListener("DOMContentLoaded",function(){qe()}),document.addEventListener("click",function(e){var t=document.querySelector(".user-menu"),r=document.getElementById("user-dropdown");t&&!t.contains(e.target)&&r&&(r.style.display="none")}),document.addEventListener("DOMContentLoaded",function(){document.addEventListener("keydown",function(e){if("Enter"===e.code||"Enter"===e.key){var t=document.getElementById("auth-modal"),r=document.getElementById("login-form"),a=t&&"block"===t.style.display,n=r&&"none"!==r.style.display,s=document.activeElement,i=s&&("login-email"===s.id||"login-password"===s.id);a&&n&&i&&(e.preventDefault(),_e())}});var e=document.getElementById("auth-modal"),t=document.querySelector(".auth-modal-container");function r(){var e=document.getElementById("auth-modal");e&&(e.style.display="none"),be(),document.documentElement.classList.remove("lock")}e&&t&&(e.addEventListener("click",function(t){t.target===e&&r()}),t.addEventListener("click",function(e){e.stopPropagation()})),document.addEventListener("click",function(t){var r,a,n=t.target.closest("#login-trigger"),s=t.target.closest(".header__nav--mobile span");if(n||s&&M()(r=s.textContent).call(r,"LOGIN"))return t.preventDefault(),e&&(e.style.display="block",document.documentElement.classList.add("lock")),void closeMobileMenu();if(t.target.closest(".user-menu-trigger"))return t.preventDefault(),void("none"===(a=document.getElementById("user-dropdown")).style.display||""===a.style.display?a.style.display="block":a.style.display="none");if(t.target.closest(".logout-btn"))return t.preventDefault(),function(){Oe.apply(this,arguments)}(),void closeMobileMenu();if(t.target.closest(".header__nav--mobile .profile"))closeMobileMenu();else if(t.target.closest(".header__mob-toggle")){var i=document.getElementById("mobileNav");i&&(i.style.display="block"===i.style.display?"none":"block")}});var a=document.getElementById("login-button");a&&a.addEventListener("click",_e);var n=document.querySelector(".auth-form-toggle.signup");n&&n.addEventListener("click",ve);var s=document.getElementById("signup-button");s&&s.addEventListener("click",le);var i=document.querySelector("#signup-form .auth-form-toggle");i&&i.addEventListener("click",ye);var o=document.querySelector(".forgot-password-link");o&&o.addEventListener("click",fe);var u=document.getElementById("reset-link");u&&u.addEventListener("click",Ee);var c=document.querySelector("#password-reset-form .auth-form-toggle");c&&c.addEventListener("click",ye);var l=document.getElementById("update-password");l&&l.addEventListener("click",Be);var d=document.getElementById("resend-button");d&&d.addEventListener("click",ge);var p=document.getElementById("verify-button");p&&p.addEventListener("click",r);var g=document.getElementById("manifesto");g&&g.addEventListener("input",ee);var m=document.getElementById("signup-email");m&&m.addEventListener("input",ne);var h=document.getElementById("signup-password");h&&h.addEventListener("input",ue)}),"undefined"!=typeof window&&(window.displayUserProfile=X,window.generateBarcode=H,window.barcodeGenerator=K)},38399:(e,t,r)=>{var a,n,s,i,o,u,c,l,d,p=r(50697),g=r.n(p),m=r(26100),h=r.n(m),b=r(96319),f=r.n(b),y=r(78928),v=r.n(y),w=r(36751),k=r.n(w),x=r(25110),E=r.n(x),I=r(53930),C=r.n(I),S=r(18979),A=r.n(S),B=r(49763),D=r.n(B),L=r(16781),_=r.n(L),M=r(39841),j=r.n(M),T=r(66615),q=r.n(T),O=r(49859),U=r(34963),P=r(73363),F=r.n(P),R=r(57119),z=r.n(R),H=r(86226),N=r.n(H),G=r(165),V=r.n(G),Y=r(29550),Q=r.n(Y),K=r(11393),X=r.n(K),W=r(56255),$=r.n(W),J=r(94870),Z=r.n(J),ee=r(44828),te=r.n(ee);function re(e,t){var r=void 0!==_()&&j()(e)||e["@@iterator"];if(!r){if(q()(e)||(r=function(e,t){if(e){var r;if("string"==typeof e)return ae(e,t);var a=A()(r={}.toString.call(e)).call(r,8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?D()(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ae(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function ne(e,t){var r=g()(e);if(h()){var a=h()(e);t&&(a=f()(a).call(a,function(t){return v()(e,t).enumerable})),r.push.apply(r,a)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r,a,n=null!=arguments[t]?arguments[t]:{};t%2?N()(r=ne(Object(n),!0)).call(r,function(t){(0,O.A)(e,t,n[t])}):k()?E()(e,k()(n)):N()(a=ne(Object(n))).call(a,function(t){C()(e,t,v()(n,t))})}return e}window.CartManager||(window.TSHIRT_PRICING={blank:{white:69,black:69,colored:69},"single-sided":{white:79,black:89,colored:89},"double-sided":{white:89,black:99,colored:99}},window.CartManager=(0,O.A)((0,O.A)((0,O.A)((0,O.A)((0,O.A)((0,O.A)((0,O.A)((0,O.A)((0,O.A)((0,O.A)({initialized:!1,getCart:function(e){return(0,U.A)(te().mark(function t(){var r,a;return te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,supabase.from("cart_items").select("*").eq("user_id",e);case 1:if(r=t.sent,a=r.data,!r.error){t.next=2;break}return t.abrupt("return",[]);case 2:return t.abrupt("return",a||[]);case 3:return t.prev=3,t.catch(0),t.abrupt("return",[]);case 4:case"end":return t.stop()}},t,null,[[0,3]])}))()},generateMergeKey:function(e,t,r){return"blank-tshirt"===e?"blank-tshirt-".concat(t):r?"custom-design":"tshirt"},addOrUpdateCartItem:function(e){var t=this;return(0,U.A)(te().mark(function r(){var a,n,s,i,o,u,c,l,d,p,g,m,h,b,f,y,v,w,k,x,E,I,C,S;return te().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=e.draftId,n=e.itemData,s=e.sizes,i=e.userId,r.prev=1,u=null,!a){r.next=3;break}return r.next=2,supabase.from("cart_items").select("*").eq("user_id",i).eq("draft_id",a);case 2:c=r.sent,l=c.data,!c.error&&l&&l.length>0&&(u=l[0]);case 3:if(d=n.unitPrice||29.99,p=F()(o=z()(s)).call(o,function(e,t){return e+t},0),!u){r.next=11;break}if(0!==p){r.next=7;break}return r.next=4,supabase.from("cart_items").delete().eq("id",u.id).eq("user_id",i);case 4:if(g=r.sent,!(m=g.error)){r.next=5;break}return r.abrupt("return",{success:!1,error:m.message});case 5:return r.next=6,t.updateCartBadge();case 6:return r.abrupt("return",{success:!0,action:"removed",itemId:u.id});case 7:return h=d*p,r.next=8,supabase.from("cart_items").update({sizes:s,quantity:p,total_price:h,price:d,updated_at:(new Date).toISOString()}).eq("id",u.id).eq("user_id",i).select().single();case 8:if((b=r.sent).data,!(f=b.error)){r.next=9;break}return r.abrupt("return",{success:!1,error:f.message});case 9:return r.next=10,t.updateCartBadge();case 10:return t.showCartAddedEffect(),r.abrupt("return",{success:!0,action:"updated",itemId:u.id,totalQuantity:p});case 11:if(0!==p){r.next=12;break}return r.abrupt("return",{success:!1,error:"Please select at least one size"});case 12:return v={user_id:i,sizes:s,quantity:p,price:d,total_price:y=d*p,type:n.type,draft_id:a,added_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},r.next=13,supabase.from("cart_items").insert([v]).select().single();case 13:if(w=r.sent,k=w.data,!(x=w.error)){r.next=18;break}if("23505"!==x.code){r.next=17;break}return r.next=14,supabase.from("cart_items").update({sizes:s,quantity:p,total_price:y,price:d,updated_at:(new Date).toISOString()}).eq("user_id",i).eq("draft_id",a).select().single();case 14:if(E=r.sent,I=E.data,!(C=E.error)){r.next=15;break}return r.abrupt("return",{success:!1,error:C.message});case 15:return r.next=16,t.updateCartBadge();case 16:return t.showCartAddedEffect(),r.abrupt("return",{success:!0,action:"updated",itemId:I.id,totalQuantity:p});case 17:return r.abrupt("return",{success:!1,error:x.message});case 18:return r.next=19,t.updateCartBadge();case 19:return t.showCartAddedEffect(),r.abrupt("return",{success:!0,action:"added",itemId:k.id,totalQuantity:p});case 20:r.next=22;break;case 21:return r.prev=21,S=r.catch(1),r.abrupt("return",{success:!1,error:S.message});case 22:case"end":return r.stop()}},r,null,[[1,21]])}))()},syncDraftFromCart:function(e,t){return(0,U.A)(te().mark(function r(){var a,n,s,i,o;return te().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=1,supabase.from("cart_items").select("*").eq("id",e).single();case 1:if(a=r.sent,n=a.data,!a.error&&n){r.next=2;break}return r.abrupt("return",!1);case 2:if(!n.draft_id){r.next=7;break}return r.next=3,supabase.from("drafts").select("*").eq("id",n.draft_id).single();case 3:if(s=r.sent,i=s.data,!s.error&&i){r.next=4;break}return r.abrupt("return",!1);case 4:return o=se(se({},i.data),{},{sizeQuantities:t}),r.next=5,supabase.from("drafts").update({data:o,sizes:t,updated_at:(new Date).toISOString()}).eq("id",n.draft_id);case 5:if(!r.sent.error){r.next=6;break}return r.abrupt("return",!1);case 6:case 7:return r.abrupt("return",!0);case 8:return r.prev=8,r.catch(0),r.abrupt("return",!1);case 9:case"end":return r.stop()}},r,null,[[0,8]])}))()},updateCartItemQuantity:function(e,t){var r=this;return(0,U.A)(te().mark(function a(){var n,s,i,o,u,c,l;return te().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=1,supabase.auth.getUser();case 1:if(s=a.sent,i=s.data.user){a.next=2;break}return a.abrupt("return",!1);case 2:if(o=0,N()(n=z()(t)).call(n,function(e){o+=e}),0!==o){a.next=4;break}return a.next=3,r.syncDraftFromCart(e,{});case 3:return a.abrupt("return",r.removeFromCart(e));case 4:return a.next=5,supabase.from("cart_items").select("price").eq("id",e).single();case 5:return u=a.sent,c=u.data,l=((null==c?void 0:c.price)||29.99)*o,a.next=6,supabase.from("cart_items").update({quantity:o,sizes:t,total_price:l,updated_at:(new Date).toISOString()}).eq("id",e).eq("user_id",i.id);case 6:if(!a.sent.error){a.next=7;break}return a.abrupt("return",!1);case 7:return a.next=8,r.syncDraftFromCart(e,t);case 8:return a.next=9,r.updateCartBadge();case 9:return a.abrupt("return",!0);case 10:return a.prev=10,a.catch(0),a.abrupt("return",!1);case 11:case"end":return a.stop()}},a,null,[[0,10]])}))()},addToCart:function(e,t){var r=this;return(0,U.A)(te().mark(function a(){var n,s,i,o,u,c,l,d;return te().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=1,supabase.auth.getUser();case 1:if(s=a.sent,i=s.data.user){a.next=2;break}return alert("请先登录"),a.abrupt("return",!1);case 2:if("string"!=typeof e||!V()(e).call(e,"blank-")){a.next=4;break}return o=e.replace("blank-",""),a.next=3,r.addOrMergeItem({draftId:null,itemData:{type:"blank-tshirt",color:o,title:"空白T恤 (".concat(o,")")},sizes:t,userId:i.id});case 3:return u=a.sent,a.abrupt("return",!!u.success&&u);case 4:return a.next=5,supabase.from("drafts").select("*").eq("id",e).single();case 5:if(c=a.sent,l=c.data,!c.error&&l){a.next=6;break}return alert("无法获取产品信息"),a.abrupt("return",!1);case 6:return a.next=7,r.addOrMergeItem({draftId:e,itemData:{type:"custom-design",color:(null===(n=l.data)||void 0===n?void 0:n.color)||"white",title:l.title||"自定义T恤设计"},sizes:t||l.sizes||{default:1},userId:i.id});case 7:return d=a.sent,a.abrupt("return",!!d.success&&d);case 8:return a.prev=8,a.catch(0),alert("操作失败，请重试"),a.abrupt("return",!1);case 9:case"end":return a.stop()}},a,null,[[0,8]])}))()},getCartItems:function(){return(0,U.A)(te().mark(function e(){var t,r,a,n,s,i,o,u,c,l,d,p,g,m,h;return te().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,supabase.auth.getUser();case 1:if(t=e.sent,r=t.data.user){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=3,supabase.from("cart_items").select("*").eq("user_id",r.id).order("added_at",{ascending:!1});case 3:if(a=e.sent,n=a.data,!a.error){e.next=4;break}return e.abrupt("return",[]);case 4:s=[],i=re(n),e.prev=5,i.s();case 6:if((o=i.n()).done){e.next=11;break}if(c=o.value,l=se({},c),!c.draft_id){e.next=8;break}return e.next=7,supabase.from("drafts").select("*").eq("id",c.draft_id).single();case 7:d=e.sent,(p=d.data)&&(l.draft=p,l.title=p.title||"自定义T恤设计",l.previewImage=p.front_preview_image,l.color=(null===(g=p.data)||void 0===g?void 0:g.color)||"white"),e.next=9;break;case 8:c.type&&V()(u=c.type).call(u,"blank-tshirt-")&&(m=c.type.replace("blank-tshirt-",""),l.title="空白T恤 (".concat(m,")"),l.color=m,l.previewImage=null,l.isBlankTshirt=!0);case 9:s.push(l);case 10:e.next=6;break;case 11:e.next=13;break;case 12:e.prev=12,h=e.catch(5),i.e(h);case 13:return e.prev=13,i.f(),e.finish(13);case 14:return e.abrupt("return",s);case 15:return e.prev=15,e.catch(0),e.abrupt("return",[]);case 16:case"end":return e.stop()}},e,null,[[0,15],[5,12,13,14]])}))()},getCartCount:function(){return(0,U.A)(te().mark(function e(){var t,r,a,n;return te().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,supabase.auth.getUser();case 1:if(t=e.sent,r=t.data.user){e.next=2;break}return e.abrupt("return",0);case 2:return e.next=3,supabase.from("cart_items").select("quantity").eq("user_id",r.id);case 3:if(a=e.sent,n=a.data,!a.error&&n){e.next=4;break}return e.abrupt("return",0);case 4:return e.abrupt("return",F()(n).call(n,function(e,t){return e+(t.quantity||0)},0));case 5:return e.prev=5,e.catch(0),e.abrupt("return",0);case 6:case"end":return e.stop()}},e,null,[[0,5]])}))()}},"updateCartItemQuantity",function(e,t){var r=this;return(0,U.A)(te().mark(function a(){var n,s,i,o,u,c,l;return te().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=1,supabase.auth.getUser();case 1:if(s=a.sent,i=s.data.user){a.next=2;break}return a.abrupt("return",!1);case 2:if(o=0,N()(n=z()(t)).call(n,function(e){o+=e}),0!==o){a.next=3;break}return a.abrupt("return",r.removeFromCart(e));case 3:return a.next=4,supabase.from("cart_items").select("price").eq("id",e).single();case 4:return u=a.sent,c=u.data,l=((null==c?void 0:c.price)||29.99)*o,a.next=5,supabase.from("cart_items").update({quantity:o,sizes:t,total_price:l,updated_at:(new Date).toISOString()}).eq("id",e).eq("user_id",i.id);case 5:if(!a.sent.error){a.next=6;break}return a.abrupt("return",!1);case 6:return a.next=7,r.updateCartBadge();case 7:return a.abrupt("return",!0);case 8:return a.prev=8,a.catch(0),a.abrupt("return",!1);case 9:case"end":return a.stop()}},a,null,[[0,8]])}))()}),"removeFromCart",function(e){var t=this;return(0,U.A)(te().mark(function r(){var a,n;return te().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=1,supabase.auth.getUser();case 1:if(a=r.sent,n=a.data.user){r.next=2;break}return r.abrupt("return",!1);case 2:if(confirm("确定要从购物车中移除这个商品吗？")){r.next=3;break}return r.abrupt("return",!1);case 3:return r.next=4,supabase.from("cart_items").delete().eq("id",e).eq("user_id",n.id);case 4:if(!r.sent.error){r.next=5;break}return r.abrupt("return",!1);case 5:return r.next=6,t.updateCartBadge();case 6:return r.abrupt("return",!0);case 7:return r.prev=7,r.catch(0),r.abrupt("return",!1);case 8:case"end":return r.stop()}},r,null,[[0,7]])}))()}),"clearCart",function(){var e=this;return(0,U.A)(te().mark(function t(){var r,a;return te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,supabase.auth.getUser();case 1:if(r=t.sent,a=r.data.user){t.next=2;break}return t.abrupt("return",!1);case 2:if(confirm("确定要清空购物车吗？")){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=4,supabase.from("cart_items").delete().eq("user_id",a.id);case 4:if(!t.sent.error){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=6,e.updateCartBadge();case 6:return t.abrupt("return",!0);case 7:return t.prev=7,t.catch(0),t.abrupt("return",!1);case 8:case"end":return t.stop()}},t,null,[[0,7]])}))()}),"getCartTotal",function(){return(0,U.A)(te().mark(function e(){var t,r,a,n;return te().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,supabase.auth.getUser();case 1:if(t=e.sent,r=t.data.user){e.next=2;break}return e.abrupt("return",0);case 2:return e.next=3,supabase.from("cart_items").select("total_price").eq("user_id",r.id);case 3:if(a=e.sent,n=a.data,!a.error&&n){e.next=4;break}return e.abrupt("return",0);case 4:return e.abrupt("return",F()(n).call(n,function(e,t){return e+(t.total_price||0)},0));case 5:return e.prev=5,e.catch(0),e.abrupt("return",0);case 6:case"end":return e.stop()}},e,null,[[0,5]])}))()}),"checkout",function(){var e=this;return(0,U.A)(te().mark(function t(){var r,a,n,s,i,o,u,c;return te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,supabase.auth.getUser();case 1:if(a=t.sent,n=a.data.user){t.next=2;break}return alert("请先登录"),t.abrupt("return",null);case 2:return t.next=3,e.getCartItems();case 3:if(0!==(s=t.sent).length){t.next=4;break}return alert("购物车是空的"),t.abrupt("return",null);case 4:return t.next=5,e.getCartTotal();case 5:return i=t.sent,o="ORD-"+Q()()+"-"+Math.random().toString(36).substr(2,9).toUpperCase(),t.next=6,supabase.from("orders").insert([{user_id:n.id,order_number:o,items:s,total_amount:i,status:"pending"}]).select().single();case 6:if(u=t.sent,c=u.data,!u.error){t.next=7;break}return alert("创建订单失败"),t.abrupt("return",null);case 7:return t.next=8,supabase.from("cart_items").delete().eq("user_id",n.id);case 8:return t.next=9,e.updateCartBadge();case 9:return alert(X()(r="订单创建成功！\n订单号: ".concat(o,"\n总金额: ¥")).call(r,i.toFixed(2))),t.abrupt("return",c);case 10:return t.prev=10,t.catch(0),alert("结账失败，请重试"),t.abrupt("return",null);case 11:case"end":return t.stop()}},t,null,[[0,10]])}))()}),"initCartIcon",function(){var e=this;return(0,U.A)(te().mark(function t(){return te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.initialized){t.next=1;break}return t.abrupt("return");case 1:return t.prev=2,t.next=3,supabase.auth.getUser();case 3:if(t.sent.data.user){t.next=4;break}return e.hideCartIcon(),e.initialized=!0,t.abrupt("return");case 4:return t.next=5,e.updateCartBadge();case 5:e.initialized=!0,supabase.auth.onAuthStateChange(function(){var t=(0,U.A)(te().mark(function t(r,a){return te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.next=1,e.updateCartBadge();case 1:t.next=3;break;case 2:e.hideCartIcon();case 3:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}()),t.next=7;break;case 6:t.prev=6,t.catch(2),e.hideCartIcon(),e.initialized=!0;case 7:case"end":return t.stop()}},t,null,[[2,6]])}))()}),"updateCartBadge",function(){var e=this;return(0,U.A)(te().mark(function t(){var r,a,n,s;return te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,e.getCartCount();case 1:r=t.sent,a=document.getElementById("cartIcon"),n=document.getElementById("cartBadge"),s=document.getElementById("cartBadgeMobile"),n&&(n.textContent=r,n.classList.add("updated"),$()(function(){n.classList.remove("updated")},200)),a&&(r>0?e.showCartIcon():e.hideCartIcon()),s&&(s.textContent=r,s.classList.add("updated"),$()(function(){return s.classList.remove("updated")},200)),t.next=3;break;case 2:t.prev=2,t.catch(0),e.hideCartIcon();case 3:case"end":return t.stop()}},t,null,[[0,2]])}))()}),"showCartIcon",function(){var e=document.getElementById("cartIcon");window.innerWidth<=899?e&&(e.style.display="none"):e&&(e.style.display="block",e.classList.add("show"),e.classList.add("bounce"),$()(function(){e.classList.remove("bounce")},300))}),"hideCartIcon",function(){var e=document.getElementById("cartIcon");window.innerWidth<=899?e&&(e.style.display="none"):e&&(e.style.display="none",e.classList.remove("show"))}),"showCartAddedEffect",function(){var e=document.createElement("div");e.className="cart-notification",e.textContent="Added to cart!",e.style.cssText="\n            position: fixed;\n            top: 0px;\n            right: 0px;\n            background: black;\n            color: white;\n            z-index: 9999;\n            font-size: 20px;\n            animation: slideIn 0.3s ease-out;\n            ",document.body.appendChild(e),$()(function(){e.style.animation="slideOut 0.3s ease",$()(function(){document.body.contains(e)&&document.body.removeChild(e)},300)},2e3)}),window.addToCart=Z()(a=CartManager.addToCart).call(a,CartManager),window.getCartItems=Z()(n=CartManager.getCartItems).call(n,CartManager),window.getCartCount=Z()(s=CartManager.getCartCount).call(s,CartManager),window.updateCartItemQuantity=Z()(i=CartManager.updateCartItemQuantity).call(i,CartManager),window.removeFromCart=Z()(o=CartManager.removeFromCart).call(o,CartManager),window.clearCart=Z()(u=CartManager.clearCart).call(u,CartManager),window.getCartTotal=Z()(c=CartManager.getCartTotal).call(c,CartManager),window.checkout=Z()(l=CartManager.checkout).call(l,CartManager),window.updateCartBadge=Z()(d=CartManager.updateCartBadge).call(d,CartManager)),document.addEventListener("DOMContentLoaded",function(){$()((0,U.A)(te().mark(function e(){return te().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CartManager||"function"!=typeof window.CartManager.initCartIcon){e.next=2;break}return e.next=1,window.CartManager.initCartIcon();case 1:e.next=3;break;case 2:case 3:case"end":return e.stop()}},e)})),500)}),"loading"!==document.readyState&&$()((0,U.A)(te().mark(function e(){return te().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CartManager||"function"!=typeof window.CartManager.initCartIcon){e.next=1;break}return e.next=1,window.CartManager.initCartIcon();case 1:case"end":return e.stop()}},e)})),100)},72238:(e,t,r)=>{var a,n=r(49859),s=r(96319),i=r.n(s),o=r(57119),u=r.n(o);window.BOOKS_DATA||(window.BOOKS_DATA=(a={"1001-563":{id:"1001-563",title:"共产党宣言",imgSrc:"/images/books/1001-563.png",author:"[德国] 卡尔·马克思",publisher:"人民出版社",publishDate:"1963-4",pages:86,category:"law"},9787301328569:{id:"9787301328569",title:"知识产权法学（第八版）",imgSrc:"/images/books/9787301328569.jpg",author:"吴汉东 / 等",publisher:"北京大学出版社",publishDate:"2022-3",pages:548,category:"law"},9787301248355:{id:"9787301248355",title:"著作权法",imgSrc:"/images/books/9787301248355.jpg",author:"崔国斌",publisher:"北京大学出版社",publishDate:"2014-9-1",pages:914,category:"law"},9787100107129:{id:"9787100107129",title:"软件与互联网法（上册）",imgSrc:"/images/books/9787100107129.jpg",author:"[美]马克·A.莱姆利",translator:"张韬略",publisher:"商务印书馆",publishDate:"2014-10-1",pages:510,category:"law"},9787100129275:{id:"9787100129275",title:"软件与互联网法(下共2册)",imgSrc:"/images/books/9787100129275.jpg",author:"[美]马克·A.莱姆利",translator:"张韬略",publisher:"商务印书馆",publishDate:"2017-4",pages:1473,category:"law"},9787565728778:{id:"9787565728778",title:"版权战争",imgSrc:"/images/books/9787565728778.jpg",author:"[美] 彼得·鲍德温",translator:"王志刚",publisher:"中国传媒大学出版社",publishDate:"2022-3",pages:435,category:"law"},9787513051934:{id:"9787513051934",title:"版权战争",imgSrc:"/images/books/9787513051934.jpg",author:"杨延超",publisher:"知识产权出版社",publishDate:"2017-10-30",pages:300,category:"law"},9787100106382:{id:"9787100106382",title:"娱乐法",imgSrc:"/images/books/9787100106382.jpg",author:"宋海燕",publisher:"商务印书馆",publishDate:"2014-9",pages:321,category:"law"},9787514617283:{id:"9787514617283",title:"科幻编年史",imgSrc:"/images/books/9787514617283.jpg",author:"[英]盖伊·哈雷（Guy Haley） / 盖伊·哈雷",publisher:"中信出版社",publishDate:"2019-6",pages:560,category:"culture"},9787508657196:{id:"9787508657196",title:"摇滚编年史",imgSrc:"/images/books/9787508657196.jpg",author:"[英] 戴维·罗伯茨 / David Roberts",publisher:"中信出版社",publishDate:"2016-4",pages:576,category:"culture"},9787111452478:{id:"9787111452478",title:"大教堂与集市",imgSrc:"/images/books/9787111452478.jpg",author:"[美] Eric S. Raymond",translator:"卫剑钒",publisher:"机械工业出版社",publishDate:"2014-5",pages:194,category:"culture"},9787115349002:{id:"9787115349002",title:"算法帝国",imgSrc:"/images/books/9787115349002.jpg",author:"人民邮电出版社",publishDate:"2014-6",pages:232,category:"culture"},9787508652085:{id:"9787508652085",title:"免费:商业的未来",imgSrc:"/images/books/9787508652085.png",author:"[美] Chris Anderson",publisher:"中信出版社",publishDate:"2015-10-1",pages:352,category:"culture"},9787544527682:{id:"9787544527682",title:"荣格文集",imgSrc:"/images/books/9787544527682.jpg",author:"[瑞士] 卡尔·荣格",publisher:"长春出版社",publishDate:"2014-1-1",pages:2532,category:"culture"},9787544779852:{id:"9787544779852",title:"炼金术之梦",imgSrc:"/images/books/9787544779852.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2019-11",pages:278,category:"culture"},9787544761987:{id:"9787544761987",title:"哲学树",imgSrc:"/images/books/9787544761987.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2019-4",pages:145,category:"culture"},9787544773355:{id:"9787544773355",title:"伊雍：自性现象学研究",imgSrc:"/images/books/9787544773355.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2018-04",pages:378,category:"culture"},9787544781824:{id:"9787544781824",title:"心理学与炼金术",imgSrc:"/images/books/9787544781824.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2020-07",pages:385,category:"culture"}},(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)(a,"9787544779852",{id:"9787544779852",title:"炼金术之梦",imgSrc:"/images/books/9787544779852.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2019-11",pages:278,category:"culture"}),"9787544779845",{id:"9787544779845",title:"移情心理学",imgSrc:"/images/books/9787544779845.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2019-11",pages:219,category:"culture"}),"9787511738776",{id:"9787511738776",title:"金花的秘密",imgSrc:"/images/books/9787511738776.jpg",author:"[德] 卫礼贤 / [瑞士] 荣格",publisher:"中央编译出版社",publishDate:"2020-11",pages:163,category:"culture"}),"9787544779333",{id:"9787544779333",title:"东方的智慧",imgSrc:"/images/books/9787544779333.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2019-08",pages:183,category:"culture"}),"9787108063632",{id:"9787108063632",title:"纽伦堡审判与罗夏墨迹测验",imgSrc:"/images/books/9787108063632.jpg",author:"[美] 乔尔·迪姆斯代尔",publisher:"生活·读书·新知三联书店",publishDate:"2019-4",pages:291,category:"culture"}),"9787115534897",{id:"9787115534897",title:"从巴甫洛夫的狗到罗夏墨迹测验",imgSrc:"/images/books/9787115534897.jpg",author:"[美] 迈克尔·A.布里特（Michael A. Britt）",publisher:"人民邮电出版社",publishDate:"2020-4",pages:243,category:"culture"}),"9787513352109",{id:"9787513352109",title:"早期中国的鬼",imgSrc:"/images/books/9787513352109.jpg",author:"蒲慕州",publisher:"新星出版社",publishDate:"2023-5",pages:252,category:"culture"}),"9787520125154",{id:"9787520125154",title:"左道",imgSrc:"/images/books/9787520125154.jpg",author:"[美]万志英（Richard von Glahn）",publisher:"社会科学文献出版社",publishDate:"2018-8",pages:440,category:"culture"}),"9787108038265",{id:"9787108038265",title:"神话与传说",imgSrc:"/images/books/9787108038265.jpg",author:"[英] 菲利普·威尔金森",publisher:"生活·读书·新知三联书店",publishDate:"2012-5",pages:348,category:"culture"}),"9787513937931",{id:"9787513937931",title:"魔法四万年",imgSrc:"/images/books/9787513937931.jpg",author:"[英] 克里斯·戈斯登",publisher:"民主与建设出版社",publishDate:"2022-9",pages:424,category:"culture"}),(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)(a,"9787505752900",{id:"9787505752900",title:"恶魔幻影志",imgSrc:"/images/books/9787505752900.jpg",author:"[日]涩泽龙彦",publisher:"中国友谊出版公司",publishDate:"2021-10",pages:184,category:"culture"}),"9787559828934",{id:"9787559828934",title:"黑魔法手帖",imgSrc:"/images/books/9787559828934.jpg",author:"[日]涩泽龙彦",publisher:"广西师范大学出版社",publishDate:"2020-7",pages:240,category:"culture"}),"9787561360064",{id:"9787561360064",title:"超古代文明",imgSrc:"/images/books/9787561360064.jpg",author:"古代文明研究会",publisher:"陕西师范大学出版社",publishDate:"2012-5",pages:372,category:"culture"}),"9787561363959",{id:"9787561363959",title:"超宇宙文明",imgSrc:"/images/books/9787561363959.jpg",author:"深泽久夫",publisher:"陕西师范大学出版社",publishDate:"2012-8",pages:269,category:"culture"}),"9787561363966",{id:"9787561363966",title:"超古代文物",imgSrc:"/images/books/9787561363966.jpg",author:"并木伸一郎",publisher:"陕西师范大学出版社",publishDate:"2012-8",pages:264,category:"culture"}),"9787561369203",{id:"9787561369203",title:"不可思议的世界之谜TOP100",imgSrc:"/images/books/9787561369203.jpg",author:"日本探索历史之谜会",publisher:"陕西师范大学出版社",publishDate:"2013-4",pages:243,category:"culture"}),"13214-55",{id:"13214-55",title:"西方伪科学种种",imgSrc:"/images/books/13214-55.jpg",author:"[美] 马丁·加德纳",publisher:"知识出版社",publishDate:"1984",pages:359,category:"culture"}),"9787535777485",{id:"9787535777485",title:"浩瀚的宇宙",imgSrc:"/images/books/9787535777485.jpg",author:"马特·特维德",publisher:"湖南科学技术出版社",publishDate:"2013-8-1",pages:72,category:"culture"}),"9787535789808",{id:"9787535789808",title:"纺织",imgSrc:"/images/books/9787535789808.jpg",author:"克里斯蒂安•马汀",publisher:"湖南科学技术出版社",publishDate:"2016-11-1",pages:57,category:"culture"}),"9787535789792",{id:"9787535789792",title:"神奇的树",imgSrc:"/images/books/9787535789792.jpg",author:"奥拉维•胡达瑞",publisher:"湖南科学技术出版社",publishDate:"2016-11-1",pages:61,category:"culture"}),(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)(a,"9787535739643",{id:"9787535739643",title:"一生受用的公式",imgSrc:"/images/books/9787535739643.jpg",author:"M·沃特金斯 / M·特威德",publisher:"湖南科学技术出版社",publishDate:"2004-5-1",pages:61,category:"culture"}),"9787535769244",{id:"9787535769244",title:"数学证明之美",imgSrc:"/images/books/9787535769244.jpg",author:"博卡德·波斯特",publisher:"湖南科学技术出版社",publishDate:"2012-1",pages:61,category:"culture"}),"9787535769213",{id:"9787535769213",title:"几何天才的杰作",imgSrc:"/images/books/9787535769213.jpg",author:"[英] 道尔德·萨顿",publisher:"湖南科学技术出版社",publishDate:"2012-1",pages:58,category:"culture"}),"9787535769251",{id:"9787535769251",title:"透视与错觉",imgSrc:"/images/books/9787535769251.jpg",author:"佛比·麦克劳顿",publisher:"湖南科学技术出版社",publishDate:"2012-1-1",pages:58,category:"culture"}),"9787535769237",{id:"9787535769237",title:"神圣的数",imgSrc:"/images/books/9787535769237.jpg",author:"米兰达·伦迪",publisher:"湖南科学技术出版社",publishDate:"2012-1-1",pages:58,category:"culture"}),"9787535792914",{id:"9787535792914",title:"创世神话",imgSrc:"/images/books/9787535792914.jpg",author:"[英]格拉德·切谢尔",publisher:"湖南科学技术出版社",publishDate:"2017-8",pages:61,category:"culture"}),"9787535792921",{id:"9787535792921",title:"龙图腾",imgSrc:"/images/books/9787535792921.jpg",author:"[美] 乔伊斯·哈格里弗",publisher:"湖南科学技术出版社",publishDate:"2017-8",pages:65,category:"culture"}),"9787535789815",{id:"9787535789815",title:"我是谁",imgSrc:"/images/books/9787535789815.jpg",author:"奥拉维·胡达瑞",publisher:"湖南科学技术出版社",publishDate:"2016-11",pages:61,category:"culture"}),"9787535769268",{id:"9787535769268",title:"谐振仪",imgSrc:"/images/books/9787535769268.jpg",author:"安东尼·艾希顿",publisher:"湖南科学技术出版社",publishDate:"2012-1",pages:58,category:"culture"}),"9787535777478",{id:"9787535777478",title:"超越感官的探测术",imgSrc:"/images/books/9787535777478.jpg",author:"哈米斯·米勒",publisher:"湖南科学技术出版社",publishDate:"2013-9-5",pages:72,category:"culture"}),(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)(a,"9787535777461",{id:"9787535777461",title:"巨石阵",imgSrc:"/images/books/9787535777461.jpg",author:"罗宾·希思",publisher:"湖南科学技术出版社",publishDate:"2013-9-9",pages:60,category:"culture"}),"9787535789785",{id:"9787535789785",title:"UFO寻踪",imgSrc:"/images/books/9787535789785.jpg",author:"保罗•怀特海德乔治•温菲尔德",publisher:"湖南科学技术出版社",publishDate:"2016-11-1",pages:65,category:"culture"}),"9787535792907",{id:"9787535792907",title:"极简 极美",imgSrc:"/images/books/9787535792907.jpg",author:"乔纳森·霍宁",publisher:"湖南科学技术出版社",publishDate:"2017-8-1",pages:58,category:"culture"}),"9787535739636",{id:"9787535739636",title:"典雅的几何",imgSrc:"/images/books/9787535739636.jpg",author:"M·伦迪",publisher:"湖南科学技术出版社",publishDate:"2004-5-1",pages:75,category:"culture"}),"9787535769220",{id:"9787535769220",title:"玛雅历法及其它古代历法",imgSrc:"/images/books/9787535769220.jpg",author:"杰弗·斯垂伊",publisher:"湖南科学技术出版社",publishDate:"2012-1",pages:58,category:"culture"}),"9787535769206",{id:"9787535769206",title:"基本元素",imgSrc:"/images/books/9787535769206.jpg",author:"迈特·迈维德",publisher:"湖南科学技术出版社",publishDate:"2012-1-1",pages:58,category:"culture"}),"9787535739650",{id:"9787535739650",title:"太阳、月亮和地球",imgSrc:"/images/books/9787535739650.jpg",author:"R·希思",publisher:"湖南科学技术出版社",publishDate:"2004-5-1",pages:92,category:"culture"}),"9787535775894",{id:"9787535775894",title:"炼金师的厨房",imgSrc:"/images/books/9787535775894.jpg",author:"盖伊·欧吉维",publisher:"湖南科学技术出版社",publishDate:"2013-4",pages:58,category:"culture"}),"9787800096389",{id:"9787800096389",title:"PC游戏",imgSrc:"/images/books/9787800096389.png",author:"李洪",publisher:"时事出版社",publishDate:"2001-5-1",pages:401,category:"game"}),"9787806768679",{id:"9787806768679",title:"上帝掷骰子: 欧美角色扮演游戏史",imgSrc:"/images/books/9787806768679.jpg",author:"陈灼",publisher:"文汇出版社",publishDate:"2005-12",pages:272,category:"game"}),(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)(a,"9787513332750",{id:"9787513332750",title:"红白机视觉史",imgSrc:"/images/books/9787513332750.jpg",author:"Bitmap Books Ltd",translator:"林延平",publisher:"新星出版社",publishDate:"2019-2-28",pages:536,category:"game"}),"9787513338752",{id:"9787513338752",title:"超级任天堂视觉史",imgSrc:"/images/books/9787513338752.jpg",author:"Bitmap Books Ltd",translator:"林延平",publisher:"新星出版社",publishDate:"2021-7",pages:536,category:"game"}),"9780993012921",{id:"9780993012921",title:"Sinclair ZX Spectrum",imgSrc:"/images/books/9780993012921.jpg",author:"Clive Sinclair",publisher:"Bitmap Books Ltd",publishDate:"2015-9-17",pages:304,category:"game"}),"9780993012983",{id:"9780993012983",title:"Commodore 64",imgSrc:"/images/books/9780993012983.jpg",author:"Steve Jarratt / Sam Dyer",publisher:"Bitmap Books Ltd",publishDate:"2016-1-9",pages:476,category:"game"}),"9787573101242",{id:"9787573101242",title:"电子游戏微历史",imgSrc:"/images/books/9787573101242.jpg",author:"[英]伊恩·西蒙斯 / [英]詹姆斯·纽曼",translator:"陈厚力 / 王栋",publisher:"吉林出版集团股份有限公司",publishDate:"2021-9",pages:224,category:"game"}),"9787513933407",{id:"9787513933407",title:"电子游戏机完全指南",imgSrc:"/images/books/9787513933407.jpg",author:"[英]Future出版公司 编著",translator:"李龙",publisher:"民主与建设出版社",publishDate:"2021-3",pages:208,category:"game"}),"9787115327772",{id:"9787115327772",title:"通关! 游戏设计之道",imgSrc:"/images/books/9787115327772.jpg",author:"[美] Scott Rogers",translator:"孙懿",publisher:"人民邮电出版社",publishDate:"2016-3",pages:368,category:"game"}),"9787805646954",{id:"9787805646954",title:"大型电子游戏必胜玩法",imgSrc:"/images/books/9787805646954.jpg",author:"夏凉",publisher:"三环出版社(北京)",publishDate:"1991-09-01",pages:189,category:"game"}),"9787533504830",{id:"9787533504830",title:"电视游戏一点通",imgSrc:"/images/books/9787533504830.jpg",author:"傅瓒 编著",publisher:"福建科学技术出版社",publishDate:"1991-8",pages:205,category:"game"}),"9787110018095",{id:"9787110018095",title:"任天堂－游戏攻关秘诀",imgSrc:"/images/books/9787110018095.jpg",author:"傅瓒 / 献辉 / 王皓 / 赵晓叶 / 孙百英",publisher:"科学普及出版社",publishDate:"1990-10",pages:88,category:"game"}),(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)(a,"9787805067650",{id:"9787805067650",title:"MAGIC地带",imgSrc:"/images/books/9787805067650.jpg",author:"电子游戏软件杂志社",publisher:"内蒙古文化出版社",publishDate:"1999-3",pages:204,category:"game"}),"9787514352689",{id:"9787514352689",title:"第九区·社交理毛",imgSrc:"/images/books/9787514352689.jpg",author:"腾云智库 / 译言",publisher:"现代出版社",publishDate:"2016-10",pages:171,category:"game"}),"9787560896014",{id:"9787560896014",title:"街机游戏字体",imgSrc:"/images/books/9787560896014.jpg",author:"[日] 大曲都市",translator:"严安若",publisher:"同济大学出版社",publishDate:"2021-2",pages:280,category:"game"}),"9787568517577",{id:"9787568517577",title:"平面国",imgSrc:"/images/books/9787568517577.jpg",author:"[英] 埃德温·A·艾勃特",translator:"陈凤洁",publisher:"大连理工大学出版社",publishDate:"2018-11",pages:144,category:"design"}),"9787559619433",{id:"9787559619433",title:"非平面",imgSrc:"/images/books/9787559619433.jpg",author:"[美] 尼克·索萨尼斯",translator:"严安若",publisher:"北京联合出版公司",publishDate:"2018-11",pages:208,category:"design"}),"9787102028835",{id:"9787102028835",title:"平面构成",imgSrc:"/images/books/9787102028835.jpg",author:"满懿",publisher:"人民美术出版社",publishDate:"2016-3",pages:368,category:"design"}),"9787500673651",{id:"9787500673651",title:"今日文字设计",imgSrc:"/images/books/9787500673651.jpg",author:"赫尔穆特·施密德",publisher:"中国青年出版社",publishDate:"2007-6",pages:186,category:"design"}),"9787308225236",{id:"9787308225236",title:"私密感的诞生",imgSrc:"/images/books/9787308225236.jpg",author:"[法] 安尼克·帕尔代赫－加拉布隆",publisher:"浙江大学出版社",publishDate:"2022-7-1",pages:404,category:"design"}),"9787562330578",{id:"9787562330578",title:"何镜堂建筑创作",imgSrc:"/images/books/9787562330578.jpg",author:"何镜堂",publisher:"华南理工大学出版社",publishDate:"2010-4",pages:276,category:"design"}),"9787562342625",{id:"9787562342625",title:"何镜堂传",imgSrc:"/images/books/9787562342625.jpg",author:"周莉华 / 何镜堂 ",publisher:"华南理工大学出版社",publishDate:"2014-5-1",pages:328,category:"design"}),(0,n.A)((0,n.A)((0,n.A)(a,"9780500023792",{id:"9780500023792",title:"Vivienne Westwood",imgSrc:"/images/books/9780500023792.jpg",author:"Alexander Fury",publisher:"Thames & Hudson Ltd",publishDate:"2021-5",pages:632,category:"design"}),"9787533542320",{id:"9787533542320",title:"最详尽的阳台种菜教科书",imgSrc:"/images/books/9787533542320.jpg",author:"[日] 藤田智",publisher:"福建科学技术出版社",publishDate:"2013-5",pages:191,category:"design"}),"9787538181272",{id:"9787538181272",title:"最详尽的冷冻保存教科书",imgSrc:"/images/books/9787538181272.jpg",author:"[日] 吉田瑞子",publisher:"辽宁科学技术出版社",publishDate:"2013-10",pages:176,category:"design"})),window.getBooksDataByCategory=function(e){var t;return i()(t=u()(window.BOOKS_DATA)).call(t,function(t){return t.category===e})},window.getBookById=function(e){return window.BOOKS_DATA[e]||null})}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e].call(s.exports,s,s.exports,a),s.exports}a.m=t,e=[],a.O=(t,r,n,s)=>{if(!r){var i=1/0;for(l=0;l<e.length;l++){for(var[r,n,s]=e[l],o=!0,u=0;u<r.length;u++)(!1&s||i>=s)&&Object.keys(a.O).every(e=>a.O[e](r[u]))?r.splice(u--,1):(o=!1,s<i&&(i=s));if(o){e.splice(l--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[r,n,s]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.j=682,(()=>{var e={682:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[i,o,u]=r,c=0;if(i.some(t=>0!==e[t])){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(u)var l=u(a)}for(t&&t(r);c<i.length;c++)s=i[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(l)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),a.O(void 0,[96,869],()=>a(96443)),a.O(void 0,[96,869],()=>a(30001)),a.O(void 0,[96,869],()=>a(72238)),a.O(void 0,[96,869],()=>a(15230));var n=a.O(void 0,[96,869],()=>a(38399));n=a.O(n)})();