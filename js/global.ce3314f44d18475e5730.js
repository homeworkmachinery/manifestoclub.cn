/*! For license information please see global.ce3314f44d18475e5730.js.LICENSE.txt */
(()=>{var e,t,r,n={2238:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,r||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}!function(e){"use strict";window.BOOKS_DATA||(window.BOOKS_DATA=(t(t(t(t(t(t(t(t(t(t(e={9787300264684:{id:"9787300264684",title:"知识产权法教程（第六版）",imgSrc:"/images/books/9787300264684.jpg",author:"王迁",publisher:"中国人民大学出版社",publishDate:"2019-1-1",pages:567,category:"law"},9787301328569:{id:"9787301328569",title:"知识产权法学（第八版）",imgSrc:"/images/books/9787301328569.jpg",author:"吴汉东 / 等",publisher:"北京大学出版社",publishDate:"2022-3",pages:548,category:"law"},9787513079990:{id:"9787513079990",title:"商标审查审理指南",imgSrc:"/images/books/9787513079990.jpg",author:"国家知识产权局",publisher:"知识产权出版社",publishDate:"2021",pages:428,category:"law"},9787802475465:{id:"9787802475465",title:"专利审查指南",imgSrc:"/images/books/9787802475465.jpg",author:"国家知识产权局",publisher:"知识产权出版社",publishDate:"2010-1",pages:578,category:"law"},9787519758868:{id:"9787519758868",title:"商标法：原理与判例",imgSrc:"/images/books/9787519758868.jpg",author:"孔祥俊",publisher:"法律出版社",publishDate:"2021-12-1",pages:155100,category:"law"},9787301248355:{id:"9787301248355",title:"著作权法",imgSrc:"/images/books/9787301248355.jpg",author:"崔国斌",publisher:"北京大学出版社",publishDate:"2014-9-1",pages:914,category:"law"},9787301241172:{id:"9787301241172",title:"侵犯著作权犯罪典型案例评析",imgSrc:"/images/books/9787301241172.jpg",author:"张远煌 、 左坚卫 、王志祥 编",publisher:"北京大学出版社",publishDate:"2014-05",pages:343,category:"law"},9787800119231:{id:"9787800119231",title:"信息封建主义",imgSrc:"/images/books/9787800119231.jpg",author:"Peter Drahos / John Braithwaite",publisher:"知识产权出版社",publishDate:"2005-9",pages:282,category:"law"},9787503655784:{id:"9787503655784",title:"知识产权法关键词",imgSrc:"/images/books/9787503655784.jpg",author:"李琛",publisher:"法律出版社",publishDate:"2006-6",pages:271,category:"law"},9787301087220:{id:"9787301087220",title:"论知识产权法的体系化",imgSrc:"/images/books/9787301087220.jpg",author:"李琛",publisher:"北京大学出版社",publishDate:"2005-3",pages:191,category:"law"},9787503671678:{id:"9787503671678",title:"作品精神权利论",imgSrc:"/images/books/9787503671678.jpg",author:"杨延超",publisher:"法律出版社",publishDate:"2007-4",pages:403,category:"law"},9787503686764:{id:"9787503686764",title:"知识产权资本化",imgSrc:"/images/books/9787503686764.jpg",author:"杨延超",publisher:"法律出版社",publishDate:"2008",pages:419,category:"law"},9787511814999:{id:"9787511814999",title:"网络环境中的著作权保护研究",imgSrc:"/images/books/9787511814999.jpg",author:"王迁",publisher:"法律出版社",publishDate:"2011-3",pages:462,category:"law"},9787519727772:{id:"9787519727772",title:"机器人法",imgSrc:"/images/books/9787519727772.jpg",author:"杨延超",publisher:"法律出版社",publishDate:"2019-3-1",pages:419,category:"law"},9787519759858:{id:"9787519759858",title:"音乐版权",imgSrc:"/images/books/9787519759858.jpg",author:"吴登华",publisher:"法律出版社",publishDate:"2022-1",pages:98,category:"law"},9787511835802:{id:"9787511835802",title:"美国版权法与音乐产业",imgSrc:"/images/books/9787511835802.jpg",author:"黄虚峰",publisher:"法律出版社",publishDate:"2012-7",pages:240,category:"law"},9787511860965:{id:"9787511860965",title:"美国知识产权法(第2版)",imgSrc:"/images/books/9787511860965.jpg",author:"李明德",publisher:"法律出版社",publishDate:"2014-4-1",pages:1003,category:"law"},9787530633991:{id:"9787530633991",title:"中国商标史话",imgSrc:"/images/books/9787530633991.jpg",author:"左旭初",publisher:"百花文艺出版社",publishDate:"2002-05-01",pages:444,category:"law"},9787562028666:{id:"9787562028666",title:"互联网上的不正当竞争和商标",imgSrc:"/images/books/9787562028666.jpg",author:"马特斯尔斯·W·斯达切尔",publisher:"中国政法大学出版社",publishDate:"2004-12",pages:324,category:"law"},9787565304101:{id:"9787565304101",title:"互联网域名与商标冲突研究",imgSrc:"/images/books/9787565304101.jpg",author:"蒋剑鸣",publisher:"中国人民公安大学出版社",publishDate:"2011-4",pages:256,category:"law"},9787100107129:{id:"9787100107129",title:"软件与互联网法（上册）",imgSrc:"/images/books/9787100107129.jpg",author:"[美]马克·A.莱姆利",translator:"张韬略",publisher:"商务印书馆",publishDate:"2014-10-1",pages:510,category:"law"},9787100129275:{id:"9787100129275",title:"软件与互联网法(下共2册)",imgSrc:"/images/books/9787100129275.jpg",author:"[美]马克·A.莱姆利",translator:"张韬略",publisher:"商务印书馆",publishDate:"2017-4",pages:1473,category:"law"},9787509387610:{id:"9787509387610",title:"网络游戏知识产权司法保护",imgSrc:"/images/books/9787509387610.jpg",author:"孙磊 / 曹丽萍",publisher:"中国法制出版社",publishDate:"2017-9",pages:354,category:"law"},9787565728778:{id:"9787565728778",title:"版权战争",imgSrc:"/images/books/9787565728778.jpg",author:"[美] 彼得·鲍德温",translator:"王志刚",publisher:"中国传媒大学出版社",publishDate:"2022-3",pages:435,category:"law"},9787513051934:{id:"9787513051934",title:"版权战争",imgSrc:"/images/books/9787513051934.jpg",author:"杨延超",publisher:"知识产权出版社",publishDate:"2017-10-30",pages:300,category:"law"},9787511817396:{id:"9787511817396",title:"对撼法律",imgSrc:"/images/books/9787511817396.jpg",author:"斯坦·苏克",publisher:"法律出版社",publishDate:"2011-4",pages:223,category:"law"},9787100106382:{id:"9787100106382",title:"娱乐法",imgSrc:"/images/books/9787100106382.jpg",author:"宋海燕",publisher:"商务印书馆",publishDate:"2014-9",pages:321,category:"law"},9787519749491:{id:"9787519749491",title:"中国娱乐法案例评注",imgSrc:"/images/books/9787519749491.jpg",author:"孔祥俊 / 谢兰芳",publisher:"法律出版社",publishDate:"2020-11",pages:414,category:"law"},9787514617283:{id:"9787514617283",title:"科幻编年史",imgSrc:"/images/books/9787514617283.jpg",author:"[英]盖伊·哈雷（Guy Haley） / 盖伊·哈雷",publisher:"中信出版社",publishDate:"2019-6",pages:560,category:"culture"},9787508657196:{id:"9787508657196",title:"摇滚编年史",imgSrc:"/images/books/9787508657196.jpg",author:"[英] 戴维·罗伯茨 / David Roberts",publisher:"中信出版社",publishDate:"2016-4",pages:576,category:"culture"},9780525573883:{id:"9780525573883",title:"Contact High",imgSrc:"/images/books/9780525573883.jpg",author:"Vikki Tobak",publisher:"Crown Publishing Group",publishDate:"2018-10-16",pages:288,category:"culture"},9787100185684:{id:"9787100185684",title:"爵士乐史",imgSrc:"/images/books/9787100185684.png",author:"[美]泰德·乔亚（Ted Gioia）",publisher:"雅众文化",publishDate:"2020-9",pages:680,category:"culture"},9787565842733:{id:"9787565842733",title:"摇滚乐风格",imgSrc:"/images/books/9787565842733.jpg",author:"[美] 凯瑟琳·查尔顿",publisher:"鹭江出版社",publishDate:"2021-8",pages:513,category:"culture"},9787511720474:{id:"9787511720474",title:"流行音乐史上最著名的120次死亡",imgSrc:"/images/books/9787511720474.jpg",author:"[英] 罗伯特·迪默里 / [英] 布鲁诺·麦克唐纳",publisher:"中央编译出版社",publishDate:"2014-3-1",pages:256,category:"culture"},9787552030624:{id:"9787552030624",title:"别再问我什么是嘻哈①",imgSrc:"/images/books/9787552030624.jpg",author:"长谷川町藏 / 大和田俊之",publisher:"上海社会科学院出版社",publishDate:"2020-6",pages:316,category:"culture"},9787545914801:{id:"9787545914801",title:"ROCK CONNEXION",imgSrc:"/images/books/9787545914801.jpg",author:"[英] 布鲁诺·麦克唐纳",publisher:"鹭江出版社",publishDate:"2018-7",pages:288,category:"culture"},"1001-563":{id:"1001-563",title:"共产党宣言",imgSrc:"/images/books/1001-563.png",author:"[德国] 卡尔·马克思",publisher:"人民出版社",publishDate:"1963-4",pages:86,category:"culture"},"3056-26":{id:"3056-26",title:"祸国殃民的“四人帮”",imgSrc:"/images/books/3056-26.jpg",author:"北京有线电厂工人理论组",publisher:"中国少年儿童出版社",publishDate:"1977-5",pages:136,category:"culture"},9787513931854:{id:"9787513931854",title:"法国大革命思想史",imgSrc:"/images/books/9787513931854.jpg",author:"[英] 乔纳森·伊斯雷尔",publisher:"民主与建设出版社",publishDate:"2020-11",pages:816,category:"culture"},9787111452478:{id:"9787111452478",title:"大教堂与集市",imgSrc:"/images/books/9787111452478.jpg",author:"[美] Eric S. Raymond",translator:"卫剑钒",publisher:"机械工业出版社",publishDate:"2014-5",pages:194,category:"culture"},9787115349002:{id:"9787115349002",title:"算法帝国",imgSrc:"/images/books/9787115349002.jpg",author:"人民邮电出版社",publishDate:"2014-6",pages:232,category:"culture"},9787508652085:{id:"9787508652085",title:"免费:商业的未来",imgSrc:"/images/books/9787508652085.png",author:"[美] Chris Anderson",publisher:"中信出版社",publishDate:"2015-10-1",pages:352,category:"culture"},9787532132454:{id:"9787532132454",title:"做",imgSrc:"/images/books/9787532132454.jpg",author:"汉斯·乌尔里希·奥布里斯特（编） / 胡昉（编）",publisher:"上海文艺出版社",publishDate:"2007-11",pages:361,category:"culture"},9787513319133:{id:"9787513319133",title:"各种“主义”",imgSrc:"/images/books/9787513319133.jpg",author:"约翰·安德鲁斯",publisher:"新星出版社",publishDate:"2015-10",pages:235,category:"culture"},9787551421874:{id:"9787551421874",title:"行为表演艺术：从未来主义至当下",imgSrc:"/images/books/9787551421874.jpg",author:"[美]罗斯莉·格特伯格",publisher:"浙江摄影出版社",publishDate:"2018-6-1",pages:320,category:"culture"},9787544527682:{id:"9787544527682",title:"荣格文集",imgSrc:"/images/books/9787544527682.jpg",author:"[瑞士] 卡尔·荣格",publisher:"长春出版社",publishDate:"2014-1-1",pages:2532,category:"culture"},9787544779852:{id:"9787544779852",title:"炼金术之梦",imgSrc:"/images/books/9787544779852.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2019-11",pages:278,category:"culture"},9787544761987:{id:"9787544761987",title:"哲学树",imgSrc:"/images/books/9787544761987.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2019-4",pages:145,category:"culture"},9787544773355:{id:"9787544773355",title:"伊雍：自性现象学研究",imgSrc:"/images/books/9787544773355.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2018-04",pages:378,category:"culture"},9787544781824:{id:"9787544781824",title:"心理学与炼金术",imgSrc:"/images/books/9787544781824.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2020-07",pages:385,category:"culture"}},"9787544779852",{id:"9787544779852",title:"炼金术之梦",imgSrc:"/images/books/9787544779852.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2019-11",pages:278,category:"culture"}),"9787544779845",{id:"9787544779845",title:"移情心理学",imgSrc:"/images/books/9787544779845.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2019-11",pages:219,category:"culture"}),"9787511738776",{id:"9787511738776",title:"金花的秘密",imgSrc:"/images/books/9787511738776.jpg",author:"[德] 卫礼贤 / [瑞士] 荣格",publisher:"中央编译出版社",publishDate:"2020-11",pages:163,category:"culture"}),"9787544779333",{id:"9787544779333",title:"东方的智慧",imgSrc:"/images/books/9787544779333.jpg",author:"[瑞士] 卡尔·荣格",publisher:"译林出版社",publishDate:"2019-08",pages:183,category:"culture"}),"9787100214070",{id:"9787100214070",title:"化学婚仪",imgSrc:"/images/books/9787100214070.jpg",author:"[德]安德里亚",publisher:"商务印书馆",publishDate:"2022-12",pages:236,category:"culture"}),"9787108063632",{id:"9787108063632",title:"纽伦堡审判与罗夏墨迹测验",imgSrc:"/images/books/9787108063632.jpg",author:"[美] 乔尔·迪姆斯代尔",publisher:"生活·读书·新知三联书店",publishDate:"2019-4",pages:291,category:"culture"}),"9787115534897",{id:"9787115534897",title:"从巴甫洛夫的狗到罗夏墨迹测验",imgSrc:"/images/books/9787115534897.jpg",author:"[美] 迈克尔·A.布里特（Michael A. Britt）",publisher:"人民邮电出版社",publishDate:"2020-4",pages:243,category:"culture"}),"9787513352109",{id:"9787513352109",title:"早期中国的鬼",imgSrc:"/images/books/9787513352109.jpg",author:"蒲慕州",publisher:"新星出版社",publishDate:"2023-5",pages:252,category:"culture"}),"9787520125154",{id:"9787520125154",title:"左道",imgSrc:"/images/books/9787520125154.jpg",author:"[美]万志英（Richard von Glahn）",publisher:"社会科学文献出版社",publishDate:"2018-8",pages:440,category:"culture"}),"9787805631295",{id:"9787805631295",title:"寺院 宫观 神佛",imgSrc:"/images/books/9787805631295.jpg",author:"张映勤",publisher:"天津社会科学院出版社",publishDate:"1991-11",pages:225,category:"culture"}),t(t(t(t(t(t(t(t(t(t(e,"9787208005310",{id:"9787208005310",title:"中国古代算命术",imgSrc:"/images/books/9787208005310.jpg",author:"姜玉珍 / 洪丕谟",publisher:"上海人民出版社",publishDate:"1990-12",pages:327,category:"culture"}),"9787801232885",{id:"9787801232885",title:"天主教知识读本",imgSrc:"/images/books/9787801232885.jpg",author:"任延黎",publisher:"宗教文化出版社",publishDate:"2000-1",pages:133,category:"culture"}),"9787108038265",{id:"9787108038265",title:"神话与传说",imgSrc:"/images/books/9787108038265.jpg",author:"[英] 菲利普·威尔金森",publisher:"生活·读书·新知三联书店",publishDate:"2012-5",pages:348,category:"culture"}),"9787513937931",{id:"9787513937931",title:"魔法四万年",imgSrc:"/images/books/9787513937931.jpg",author:"[英] 克里斯·戈斯登",publisher:"民主与建设出版社",publishDate:"2022-9",pages:424,category:"culture"}),"9787505752900",{id:"9787505752900",title:"恶魔幻影志",imgSrc:"/images/books/9787505752900.jpg",author:"[日]涩泽龙彦",publisher:"中国友谊出版公司",publishDate:"2021-10",pages:184,category:"culture"}),"9787559828934",{id:"9787559828934",title:"黑魔法手帖",imgSrc:"/images/books/9787559828934.jpg",author:"[日]涩泽龙彦",publisher:"广西师范大学出版社",publishDate:"2020-7",pages:240,category:"culture"}),"9787561360064",{id:"9787561360064",title:"超古代文明",imgSrc:"/images/books/9787561360064.jpg",author:"古代文明研究会",publisher:"陕西师范大学出版社",publishDate:"2012-5",pages:372,category:"culture"}),"9787561363959",{id:"9787561363959",title:"超宇宙文明",imgSrc:"/images/books/9787561363959.jpg",author:"深泽久夫",publisher:"陕西师范大学出版社",publishDate:"2012-8",pages:269,category:"culture"}),"9787561363966",{id:"9787561363966",title:"超古代文物",imgSrc:"/images/books/9787561363966.jpg",author:"并木伸一郎",publisher:"陕西师范大学出版社",publishDate:"2012-8",pages:264,category:"culture"}),"9787561369203",{id:"9787561369203",title:"不可思议的世界之谜TOP100",imgSrc:"/images/books/9787561369203.jpg",author:"日本探索历史之谜会",publisher:"陕西师范大学出版社",publishDate:"2013-4",pages:243,category:"culture"}),t(t(t(t(t(t(t(t(t(t(e,"13214-55",{id:"13214-55",title:"西方伪科学种种",imgSrc:"/images/books/13214-55.jpg",author:"[美] 马丁·加德纳",publisher:"知识出版社",publishDate:"1984",pages:359,category:"culture"}),"9787213027321",{id:"9787213027321",title:"魔法时刻",imgSrc:"/images/books/9787213027321.jpg",author:"乔治·夏尔帕克 / 亨利·布洛什",publisher:"浙江人民出版社",publishDate:"2004-1-1",pages:200,category:"culture"}),"9787542407177",{id:"9787542407177",title:"科学与超自然现象",imgSrc:"/images/books/9787542407177.jpg",author:"[法] 布雷",publisher:"甘肃科学技术出版社",publishDate:"2000-8",pages:319,category:"culture"}),"9787550212893",{id:"9787550212893",title:"超自然现象全揭秘",imgSrc:"/images/books/9787550212893.jpg",author:"柳青",publisher:"北京联合出版公司",publishDate:"2013-3",pages:287,category:"culture"}),"9787544302845",{id:"9787544302845",title:"高人兰迪",imgSrc:"/images/books/9787544302845.jpg",author:"兰迪",publisher:"海南出版社",publishDate:"2001-12-1",pages:286,category:"culture"}),"9787802288935",{id:"9787802288935",title:"全球100超自然之谜",imgSrc:"/images/books/9787802288935.jpg",author:"[美] 史蒂芬·J·斯皮格纳斯",publisher:"新世界出版社",publishDate:"2008-09",pages:362,category:"culture"}),"9787805928180",{id:"9787805928180",title:"在对错之外思考",imgSrc:"/images/books/9787805928180.jpg",author:"[英] 爱德华·德·波诺",publisher:"广州出版社",publishDate:"1998",pages:152,category:"culture"}),"9787535777485",{id:"9787535777485",title:"浩瀚的宇宙",imgSrc:"/images/books/9787535777485.jpg",author:"马特·特维德",publisher:"湖南科学技术出版社",publishDate:"2013-8-1",pages:72,category:"culture"}),"9787535789808",{id:"9787535789808",title:"纺织",imgSrc:"/images/books/9787535789808.jpg",author:"克里斯蒂安•马汀",publisher:"湖南科学技术出版社",publishDate:"2016-11-1",pages:57,category:"culture"}),"9787535789792",{id:"9787535789792",title:"神奇的树",imgSrc:"/images/books/9787535789792.jpg",author:"奥拉维•胡达瑞",publisher:"湖南科学技术出版社",publishDate:"2016-11-1",pages:61,category:"culture"}),t(t(t(t(t(t(t(t(t(t(e,"9787535739643",{id:"9787535739643",title:"一生受用的公式",imgSrc:"/images/books/9787535739643.jpg",author:"M·沃特金斯 / M·特威德",publisher:"湖南科学技术出版社",publishDate:"2004-5-1",pages:61,category:"culture"}),"9787535769244",{id:"9787535769244",title:"数学证明之美",imgSrc:"/images/books/9787535769244.jpg",author:"博卡德·波斯特",publisher:"湖南科学技术出版社",publishDate:"2012-1",pages:61,category:"culture"}),"9787535769213",{id:"9787535769213",title:"几何天才的杰作",imgSrc:"/images/books/9787535769213.jpg",author:"[英] 道尔德·萨顿",publisher:"湖南科学技术出版社",publishDate:"2012-1",pages:58,category:"culture"}),"9787535769251",{id:"9787535769251",title:"透视与错觉",imgSrc:"/images/books/9787535769251.jpg",author:"佛比·麦克劳顿",publisher:"湖南科学技术出版社",publishDate:"2012-1-1",pages:58,category:"culture"}),"9787535769237",{id:"9787535769237",title:"神圣的数",imgSrc:"/images/books/9787535769237.jpg",author:"米兰达·伦迪",publisher:"湖南科学技术出版社",publishDate:"2012-1-1",pages:58,category:"culture"}),"9787535792914",{id:"9787535792914",title:"创世神话",imgSrc:"/images/books/9787535792914.jpg",author:"[英]格拉德·切谢尔",publisher:"湖南科学技术出版社",publishDate:"2017-8",pages:61,category:"culture"}),"9787535792921",{id:"9787535792921",title:"龙图腾",imgSrc:"/images/books/9787535792921.jpg",author:"[美] 乔伊斯·哈格里弗",publisher:"湖南科学技术出版社",publishDate:"2017-8",pages:65,category:"culture"}),"9787535789815",{id:"9787535789815",title:"我是谁",imgSrc:"/images/books/9787535789815.jpg",author:"奥拉维·胡达瑞",publisher:"湖南科学技术出版社",publishDate:"2016-11",pages:61,category:"culture"}),"9787535769268",{id:"9787535769268",title:"谐振仪",imgSrc:"/images/books/9787535769268.jpg",author:"安东尼·艾希顿",publisher:"湖南科学技术出版社",publishDate:"2012-1",pages:58,category:"culture"}),"9787535777478",{id:"9787535777478",title:"超越感官的探测术",imgSrc:"/images/books/9787535777478.jpg",author:"哈米斯·米勒",publisher:"湖南科学技术出版社",publishDate:"2013-9-5",pages:72,category:"culture"}),t(t(t(t(t(t(t(t(t(t(e,"9787535777461",{id:"9787535777461",title:"巨石阵",imgSrc:"/images/books/9787535777461.jpg",author:"罗宾·希思",publisher:"湖南科学技术出版社",publishDate:"2013-9-9",pages:60,category:"culture"}),"9787535789785",{id:"9787535789785",title:"UFO寻踪",imgSrc:"/images/books/9787535789785.jpg",author:"保罗•怀特海德乔治•温菲尔德",publisher:"湖南科学技术出版社",publishDate:"2016-11-1",pages:65,category:"culture"}),"9787535792907",{id:"9787535792907",title:"极简 极美",imgSrc:"/images/books/9787535792907.jpg",author:"乔纳森·霍宁",publisher:"湖南科学技术出版社",publishDate:"2017-8-1",pages:58,category:"culture"}),"9787535739636",{id:"9787535739636",title:"典雅的几何",imgSrc:"/images/books/9787535739636.jpg",author:"M·伦迪",publisher:"湖南科学技术出版社",publishDate:"2004-5-1",pages:75,category:"culture"}),"9787535769220",{id:"9787535769220",title:"玛雅历法及其它古代历法",imgSrc:"/images/books/9787535769220.jpg",author:"杰弗·斯垂伊",publisher:"湖南科学技术出版社",publishDate:"2012-1",pages:58,category:"culture"}),"9787535769206",{id:"9787535769206",title:"基本元素",imgSrc:"/images/books/9787535769206.jpg",author:"迈特·迈维德",publisher:"湖南科学技术出版社",publishDate:"2012-1-1",pages:58,category:"culture"}),"9787535739650",{id:"9787535739650",title:"太阳、月亮和地球",imgSrc:"/images/books/9787535739650.jpg",author:"R·希思",publisher:"湖南科学技术出版社",publishDate:"2004-5-1",pages:92,category:"culture"}),"9787535775894",{id:"9787535775894",title:"炼金师的厨房",imgSrc:"/images/books/9787535775894.jpg",author:"盖伊·欧吉维",publisher:"湖南科学技术出版社",publishDate:"2013-4",pages:58,category:"culture"}),"9787562492368",{id:"9787562492368",title:"天文之书",imgSrc:"/images/books/9787562492368.jpg",author:"[美] Jim Bell",publisher:"重庆大学出版社",publishDate:"2015-9",pages:304,category:"culture"}),"9787562493266",{id:"9787562493266",title:"数学之书",imgSrc:"/images/books/9787562493266.jpg",author:"克利福德·皮寇弗",publisher:"重庆大学出版社",publishDate:"2015-10-19",pages:280,category:"culture"}),t(t(t(t(t(t(t(t(t(t(e,"9787568900478",{id:"9787568900478",title:"生物学之书",imgSrc:"/images/books/9787568900478.jpg",author:"[美] 迈克尔• C. 杰拉尔德",publisher:"重庆大学出版社",publishDate:"2016-12-2",pages:288,category:"culture"}),"9787568903523",{id:"9787568903523",title:"工程学之书",imgSrc:"/images/books/9787568903523.jpg",author:"[美] 马歇尔·布莱恩",publisher:"重庆大学出版社",publishDate:"2016-12-2",pages:288,category:"culture"}),"9787568918039",{id:"9787568918039",title:"医学之书",imgSrc:"/images/books/9787568918039.jpg",author:"[美] 克利福德·皮寇弗",publisher:"重庆大学出版社",publishDate:"2020-5-20",pages:388,category:"culture"}),"9787568910576",{id:"9787568910576",title:"化学之书",imgSrc:"/images/books/9787568910576.jpg",author:"[美]德里克·B.罗威",publisher:"重庆大学出版社有限公司",publishDate:"2018-12-31",pages:288,category:"culture"}),"9787513334068",{id:"9787513334068",title:"大自然有条隐形线",imgSrc:"/images/books/9787513334068.jpg",author:"[意] 詹翁贝托·阿奇内利 著 / [意] 塞雷娜·维奥拉 绘",publisher:"新星出版社",publishDate:"2020-1",pages:123,category:"culture"}),"9787800096389",{id:"9787800096389",title:"PC游戏",imgSrc:"/images/books/9787800096389.png",author:"李洪",publisher:"时事出版社",publishDate:"2001-5-1",pages:401,category:"game"}),"9787806768679",{id:"9787806768679",title:"上帝掷骰子: 欧美角色扮演游戏史",imgSrc:"/images/books/9787806768679.jpg",author:"陈灼",publisher:"文汇出版社",publishDate:"2005-12",pages:272,category:"game"}),"9787516105740",{id:"9787516105740",title:"游戏的哲学",imgSrc:"/images/books/9787516105740.jpg",author:"付立峰",publisher:"中国社会科学出版社",publishDate:"2012-3",pages:293,category:"game"}),"9787513332750",{id:"9787513332750",title:"红白机视觉史",imgSrc:"/images/books/9787513332750.jpg",author:"Bitmap Books Ltd",translator:"林延平",publisher:"新星出版社",publishDate:"2019-2-28",pages:536,category:"game"}),"9787513338752",{id:"9787513338752",title:"超级任天堂视觉史",imgSrc:"/images/books/9787513338752.jpg",author:"Bitmap Books Ltd",translator:"林延平",publisher:"新星出版社",publishDate:"2021-7",pages:536,category:"game"}),t(t(t(t(t(t(t(t(t(t(e,"9780993012921",{id:"9780993012921",title:"Sinclair ZX Spectrum",imgSrc:"/images/books/9780993012921.jpg",author:"Clive Sinclair",publisher:"Bitmap Books Ltd",publishDate:"2015-9-17",pages:304,category:"game"}),"9780993012983",{id:"9780993012983",title:"Commodore 64",imgSrc:"/images/books/9780993012983.jpg",author:"Steve Jarratt / Sam Dyer",publisher:"Bitmap Books Ltd",publishDate:"2016-1-9",pages:476,category:"game"}),"9787573101242",{id:"9787573101242",title:"电子游戏微历史",imgSrc:"/images/books/9787573101242.jpg",author:"[英]伊恩·西蒙斯 / [英]詹姆斯·纽曼",translator:"陈厚力 / 王栋",publisher:"吉林出版集团股份有限公司",publishDate:"2021-9",pages:224,category:"game"}),"9787513933407",{id:"9787513933407",title:"电子游戏机完全指南",imgSrc:"/images/books/9787513933407.jpg",author:"[英]Future出版公司 编著",translator:"李龙",publisher:"民主与建设出版社",publishDate:"2021-3",pages:208,category:"game"}),"9787115327772",{id:"9787115327772",title:"通关! 游戏设计之道",imgSrc:"/images/books/9787115327772.jpg",author:"[美] Scott Rogers",translator:"孙懿",publisher:"人民邮电出版社",publishDate:"2016-3",pages:368,category:"game"}),"9787201094601",{id:"9787201094601",title:"故事",imgSrc:"/images/books/9787201094601.jpg",author:"罗伯特・麦基",publisher:"天津人民出版社",publishDate:"2016-1",pages:508,category:"game"}),"9787805646954",{id:"9787805646954",title:"大型电子游戏必胜玩法",imgSrc:"/images/books/9787805646954.jpg",author:"夏凉",publisher:"三环出版社(北京)",publishDate:"1991-09-01",pages:189,category:"game"}),"9787533504830",{id:"9787533504830",title:"电视游戏一点通",imgSrc:"/images/books/9787533504830.jpg",author:"傅瓒 编著",publisher:"福建科学技术出版社",publishDate:"1991-8",pages:205,category:"game"}),"9787110018095",{id:"9787110018095",title:"任天堂－游戏攻关秘诀",imgSrc:"/images/books/9787110018095.jpg",author:"傅瓒 / 献辉 / 王皓 / 赵晓叶 / 孙百英",publisher:"科学普及出版社",publishDate:"1990-10",pages:88,category:"game"}),"9787805067650",{id:"9787805067650",title:"MAGIC地带",imgSrc:"/images/books/9787805067650.jpg",author:"电子游戏软件杂志社",publisher:"内蒙古文化出版社",publishDate:"1999-3",pages:204,category:"game"}),t(t(t(t(t(t(t(t(t(t(e,"9787514352689",{id:"9787514352689",title:"第九区·社交理毛",imgSrc:"/images/books/9787514352689.jpg",author:"腾云智库 / 译言",publisher:"现代出版社",publishDate:"2016-10",pages:171,category:"game"}),"9787560896014",{id:"9787560896014",title:"街机游戏字体",imgSrc:"/images/books/9787560896014.jpg",author:"[日] 大曲都市",translator:"严安若",publisher:"同济大学出版社",publishDate:"2021-2",pages:280,category:"game"}),"9787121342660",{id:"9787121342660",title:"树莓派开始，玩转Linux",imgSrc:"/images/books/9787121342660.jpg",author:"Vamei / 周昕梓",publisher:"电子工业出版社",publishDate:"2018-6-27",pages:356,category:"game"}),"9787568517577",{id:"9787568517577",title:"平面国",imgSrc:"/images/books/9787568517577.jpg",author:"[英] 埃德温·A·艾勃特",translator:"陈凤洁",publisher:"大连理工大学出版社",publishDate:"2018-11",pages:144,category:"design"}),"9787102028835",{id:"9787102028835",title:"平面构成",imgSrc:"/images/books/9787102028835.jpg",author:"满懿",publisher:"人民美术出版社",publishDate:"2016-3",pages:368,category:"design"}),"9787559619433",{id:"9787559619433",title:"非平面",imgSrc:"/images/books/9787559619433.jpg",author:"[美] 尼克·索萨尼斯",translator:"严安若",publisher:"北京联合出版公司",publishDate:"2018-11",pages:208,category:"design"}),"9783836560931",{id:"9783836560931",title:"Jamie Hewlett",imgSrc:"/images/books/9783836560931.jpg",author:"Jamie Hewlett",publisher:"TASCHEN",publishDate:"2017-12-29",pages:424,category:"design"}),"9781940878423",{id:"9781940878423",title:"Gorillaz Almanac",imgSrc:"/images/books/9781940878423.jpg",author:"Gorillaz",publisher:"Z2 Comics",publishDate:"2020-12-22",pages:288,category:"design"}),"9783836548403",{id:"9783836548403",title:"Fritz Kahn",imgSrc:"/images/books/9783836548403.jpg",author:"Uta and Thilo von Debschitz",publisher:"TASCHEN",publishDate:"2013-11-15",pages:360,category:"design"}),"9780500021880",{id:"9780500021880",title:"Stanley Donwood: There Will Be No Quiet",imgSrc:"/images/books/9780500021880.jpg",author:"Thom Yorke / Stanley Donwood",publisher:"Harry N. Abrams",publishDate:"2019-10-22",pages:368,category:"design"}),t(t(t(t(t(t(t(t(t(t(e,"9783836561853",{id:"9783836561853",title:"Horror Cinema",imgSrc:"/images/books/9783836561853.jpg",author:"Penner, Jonathan",publisher:"Taschen",publishDate:"2017-5-25",pages:640,category:"design"}),"9780062380746",{id:"9780062380746",title:"Gilliamesque",imgSrc:"/images/books/9780062380746.jpg",author:"Terry Gilliam",publisher:"Harper Design",publishDate:"2015-10-20",pages:352,category:"design"}),"9780648227311",{id:"9780648227311",title:"SNAPSCRACKPOP!",imgSrc:"/images/books/9780648227311.jpeg",author:"JOHN FOY",publisher:"RED EYE RECORDS",publishDate:"2018",pages:295,category:"design"}),"9780998140742",{id:"9780998140742",title:"Color X Color the Sperry poster archive",imgSrc:"/images/books/9780998140742.jpg",author:"Chuck Sperry",publisher:"Paragon Press",publishDate:"2021",pages:751,category:"design"}),"9780826367358",{id:"9780826367358",title:"Dreams Unreal",imgSrc:"/images/books/9780826367358.jpg",author:"Titus O'Brien",publisher:"UNM Press",publishDate:"2024-11-5",pages:392,category:"design"}),"9781780672984",{id:"9781780672984",title:"The Modern Magazine",imgSrc:"/images/books/9781780672984.jpg",author:"Jeremy Leslie",publisher:"Laurence King Publishers",publishDate:"2013-10-8",pages:240,category:"design"}),"9789881747273",{id:"9789881747273",title:"Big Idea",imgSrc:"/images/books/9789881747273.jpg",author:"三度文化傳媒",publisher:"三度文化傳媒",publishDate:"2008-12",pages:400,category:"design"}),"9781856697668",{id:"9781856697668",title:"Protest Stencil Toolkit",imgSrc:"/images/books/9781856697668.jpg",author:"Patrick Thomas",publisher:"Laurence King Publishing",publishDate:"2011-5-25",pages:144,category:"design"}),"9780789324634",{id:"9780789324634",title:"Ripped",imgSrc:"/images/books/9780789324634.jpg",author:"Cesar Padilla / Lydia Lunch / Betsey Johnson",publisher:"UNIVERSE PUBLISHING",publishDate:"2012-9",pages:208,category:"design"}),"9781454921387",{id:"9781454921387",title:"Punk Tees",imgSrc:"/images/books/9781454921387.jpg",author:"Martin Popoff",publisher:"Union Square & Co.",publishDate:"2016-10-18",pages:192,category:"design"}),t(t(t(t(t(t(t(t(t(t(e,"9780500023792",{id:"9780500023792",title:"Vivienne Westwood",imgSrc:"/images/books/9780500023792.jpg",author:"Alexander Fury",publisher:"Thames & Hudson Ltd",publishDate:"2021-5",pages:632,category:"design"}),"9780500515006",{id:"9780500515006",title:"The Worldwide History of Beads",imgSrc:"/images/books/9780500515006.png",author:"Kiyoshi Togashi / Lois Sherr Dubin",publisher:"Thames & Hudson Ltd",publishDate:"2010-2",pages:396,category:"design"}),"9787514619232",{id:"9787514619232",title:"世界花纹与图案大典",imgSrc:"/images/books/9787514619232.jpg",author:"Elizabeth Wilhide",publisher:"中国画报出版社",publishDate:"2020-8",pages:660,category:"design"}),"9784766132595",{id:"9784766132595",title:"マッチ・ラベル",imgSrc:"/images/books/9784766132595.jpg",author:"たるみ燐寸博物館 小野 隆弘",publisher:"グラフィック社",publishDate:"2019-4",pages:144,category:"design"}),"9789887711094",{id:"9789887711094",title:"Textilepedia",imgSrc:"/images/books/9789887711094.jpg",author:"",publisher:"Fashionary International Limited",publishDate:"2018-6",pages:220,category:"design"}),"9789887710974",{id:"9789887710974",title:"fashion business manual",imgSrc:"/images/books/9789887710974.jpg",author:"",publisher:"Fashionary International Limited",publishDate:"2018-6",pages:220,category:"design"}),"9787108021144",{id:"9787108021144",title:"角色符号",imgSrc:"/images/books/9787108021144.jpg",author:"栾冠桦",publisher:"生活·读书·新知三联书店",publishDate:"2005-01",pages:227,category:"design"}),"9787505407909",{id:"9787505407909",title:"中国京剧脸谱",imgSrc:"/images/books/9787505407909.jpg",author:"赵梦林",publisher:"朝华出版社",publishDate:"2003-1",pages:168,category:"design"}),"9787539400440",{id:"9787539400440",title:"二十世纪视觉传达设计史",imgSrc:"/images/books/9787539400440.jpg",author:"(美)梅格斯",publisher:"湖北美术出版社",publishDate:"1989-09",pages:262,category:"design"}),"8114-6",{id:"8114-6",title:"刊头题花图案",imgSrc:"/images/books/8114-6.jpg",author:"江胜全",publisher:"重庆出版社",publishDate:"1982-01",pages:96,category:"design"}),t(t(t(t(t(t(t(t(t(t(e,"9787539410050",{id:"9787539410050",title:"平面设计八人",imgSrc:"/images/books/9787539410050.jpg",author:"泛克",publisher:"湖北美术出版社",publishDate:"2000-06",pages:158,category:"design"}),"9787500673651",{id:"9787500673651",title:"今日文字设计",imgSrc:"/images/books/9787500673651.jpg",author:"赫尔穆特·施密德",publisher:"中国青年出版社",publishDate:"2007-6",pages:186,category:"design"}),"9787202007877",{id:"9787202007877",title:"丑语大观",imgSrc:"/images/books/9787202007877.jpg",author:"余云华",publisher:"河北人民出版社",publishDate:"1990-10",pages:261,category:"design"}),"10071-260",{id:"10071-260",title:"大跃进之歌",imgSrc:"/images/books/10071-260.jpg",author:"北京出版社",publisher:"北京出版社",publishDate:"1958-07",pages:203,category:"design"}),"7538714421",{id:"7538714421",title:"民谣下的中国",imgSrc:"/images/books/7538714421.jpg",author:"武阿蒙",publisher:"时代文艺出版社",publishDate:"2000",pages:301,category:"design"}),"9787800818004",{id:"9787800818004",title:"古今中外兵器大观",imgSrc:"/images/books/9787800818004.jpg",author:"陈学建 / 金永吉",publisher:"蓝天出版社",publishDate:"1998",pages:288,category:"design"}),"9789863444336",{id:"9789863444336",title:"法醫科學研究室",imgSrc:"/images/books/9789863444336.jpg",author:"道格拉斯·萊爾",publisher:"麥田",publishDate:"2017-3-18",pages:512,category:"design"}),"9789863444091",{id:"9789863444091",title:"毒物研究室",imgSrc:"/images/books/9789863444091.jpg",author:"席瑞塔·史蒂文斯 / 安妮·班農",publisher:"麥田",publishDate:"2018-2-3",pages:446,category:"design"}),"9787100196192",{id:"9787100196192",title:"众神的植物",imgSrc:"/images/books/9787100196192.jpg",author:"[美]理查德·伊文斯·舒尔兹 / [瑞士]艾伯特·霍夫曼 / [德]克里斯汀·拉奇",publisher:"商务印书馆",publishDate:"2021-9",pages:209,category:"design"}),"9787513330848",{id:"9787513330848",title:"魔药课",imgSrc:"/images/books/9787513330848.jpg",author:"(法) 蒂博·维拉诺瓦",publisher:"新星出版社",publishDate:"2018-8",pages:184,category:"design"}),t(t(t(t(t(t(t(t(t(t(e,"9789863443513",{id:"9789863443513",title:"餐桌上的語言學家",imgSrc:"/images/books/9789863443513.jpg",author:"任韶堂(Dan Jurafsky)",publisher:"麥田",publishDate:"2016-6-2",pages:301,category:"design"}),"9783836520294",{id:"9783836520294",title:"Menu Design in America",imgSrc:"/images/books/9783836520294.jpg",author:"Steven Heller / John Mariani",publisher:"Taschen GmbH",publishDate:"2018-10-23",pages:592,category:"design"}),"9780714873985",{id:"9780714873985",title:"THE WORLD IS YOUR BURGER",imgSrc:"/images/books/9780714873985.jpeg",author:"David Michaels",publisher:"Phaidon",publishDate:"2013-10-8",pages:432,category:"design"}),"9787805016993",{id:"9787805016993",title:"茶饮笔记",imgSrc:"/images/books/9787805016993.jpg",author:"作山若子",publisher:"北京美术摄影出版社",publishDate:"2015-5",pages:208,category:"design"}),"9787806073278",{id:"9787806073278",title:"箱男",imgSrc:"/images/books/9787806073278.jpg",author:"[日本] 安部公房",publisher:"珠海出版社",publishDate:"1997-7",pages:347,category:"design"}),"15747-110",{id:"15747-110",title:"他人的脸",imgSrc:"/images/books/15747-110.jpg",author:"[日本] 安部公房",publisher:"珠海出版社",publishDate:"1997-7",pages:446,category:"design"}),"9787308225236",{id:"9787308225236",title:"私密感的诞生",imgSrc:"/images/books/9787308225236.jpg",author:"[法] 安尼克·帕尔代赫－加拉布隆",publisher:"浙江大学出版社",publishDate:"2022-7-1",pages:404,category:"design"}),"9780810997417",{id:"9780810997417",title:"The Wes Anderson Collection",imgSrc:"/images/books/9780810997417.jpg",author:"Matt Zoller Seitz",publisher:"Harry N. Abrams",publishDate:"2013-10-8",pages:336,category:"design"}),"9787805212043",{id:"9787805212043",title:"白天鹅宾馆管理实务",imgSrc:"/images/books/9787805212043.jpg",author:"杨小鹏",publisher:"广东旅游出版社",publishDate:"2002-12",pages:942,category:"design"}),"9781911026600",{id:"9781911026600",title:"Around the World in 80 Record Stores",imgSrc:"/images/books/9781911026600.jpg",author:"Marcus Barnes",publisher:"Art & Photography",publishDate:"2018",pages:144,category:"design"}),t(t(t(t(t(t(t(t(t(t(e,"9789881470331",{id:"9789881470331",title:"Cartographics",imgSrc:"/images/books/9789881470331.jpg",author:"SendPoints",publisher:"SendPoints",publishDate:"2017-1-16",pages:256,category:"design"}),"9789869406932",{id:"9789869406932",title:"偏見地圖１",imgSrc:"/images/books/9789869406932.jpg",author:"[保加利亞]楊科·茨維可夫（Yanko Tsvetkov）",publisher:"行路出版",publishDate:"2017-3",pages:84,category:"design"}),"9789869406949",{id:"9789869406949",title:"偏見地圖2",imgSrc:"/images/books/9789869406949.jpg",author:"[保加利亞]楊科·茨維可夫（Yanko Tsvetkov）",publisher:"行路出版",publishDate:"2017-3",pages:84,category:"design"}),"9787521720402",{id:"9787521720402",title:"地图3000年：从神秘符号到谷歌地图",imgSrc:"/images/books/9787521720402.jpg",author:"[挪威] Thomas Reinertsen Berg",publisher:"中信出版社",publishDate:"2021-1-31",pages:356,category:"design"}),"9789869577533",{id:"9789869577533",title:"妖怪地圖",imgSrc:"/images/books/9789869577533.jpg",author:"Sandra Lawrence",publisher:"大家出版",publishDate:"2018-6-6",pages:64,category:"design"}),"9780500519509",{id:"9780500519509",title:"The Writer's Map",imgSrc:"/images/books/9780500519509.jpg",author:"LEWIS-JONES HUW",publisher:"Thames & Hudson",publishDate:"2018-10-3",pages:256,category:"design"}),"9787559201737",{id:"9787559201737",title:"哥特艺术",imgSrc:"/images/books/9787559201737.jpg",author:"[英]克里斯·布鲁克斯",publisher:"华南理工大学出版社",publishDate:"2018-10",pages:448,category:"design"}),"9787562330578",{id:"9787562330578",title:"何镜堂建筑创作",imgSrc:"/images/books/9787562330578.jpg",author:"何镜堂",publisher:"华南理工大学出版社",publishDate:"2010-4",pages:276,category:"design"}),"9787518067459",{id:"9787518067459",title:"松田纱和的绳结服饰包袋",imgSrc:"/images/books/9787518067459.jpg",author:" [日] 松田纱和",publisher:"中国纺织出版社",publishDate:"2019",pages:96,category:"design"}),"9787543066762",{id:"9787543066762",title:"终极结绳技巧全图解",imgSrc:"/images/books/9787543066762.jpg",author:"[澳] 内维尔·奥利菲",publisher:"武汉出版社",publishDate:"2013-09-01",pages:144,category:"design"})),window.getBooksDataByCategory=function(e){return Object.values(window.BOOKS_DATA).filter(function(t){return t.category===e})},window.getBookById=function(e){return window.BOOKS_DATA[e]||null})}()},5230:(e,t,r)=>{"use strict";var n,a=r(6129),i=r.n(a);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function h(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function i(r,n,a,i){var u=n&&n.prototype instanceof s?n:s,c=Object.create(u.prototype);return m(c,"_invoke",function(r,n,a){var i,s,u,c=0,l=a||[],d=!1,p={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,o}};function g(r,n){for(s=r,u=n,t=0;!d&&c&&!a&&t<l.length;t++){var a,i=l[t],g=p.p,h=i[2];r>3?(a=h===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=g&&((a=r<2&&g<i[1])?(s=0,p.v=n,p.n=i[1]):g<h&&(a=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,p.n=h,s=0))}if(a||r>1)return o;throw d=!0,n}return function(a,l,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&g(l,h),s=l,u=h;(t=s<2?e:u)||!d;){i||(s?s<3?(s>1&&(p.n=-1),g(s,u)):p.n=u:p.v=u);try{if(c=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=p.n<0)?u:r.call(n,p))!==o)break}catch(t){i=e,s=1,u=t}finally{c=1}}return{value:t,done:d}}}(r,a,i),!0),c}var o={};function s(){}function u(){}function c(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(m(t={},n,function(){return this}),t),d=c.prototype=s.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,m(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return u.prototype=c,m(d,"constructor",c),m(c,"constructor",u),u.displayName="GeneratorFunction",m(c,a,"GeneratorFunction"),m(d),m(d,a,"Generator"),m(d,n,function(){return this}),m(d,"toString",function(){return"[object Generator]"}),(h=function(){return{w:i,m:p}})()}function m(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}m=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){m(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}},m(e,t,r,n)}function f(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function b(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function o(e){f(i,n,a,o,s,"next",e)}function s(e){f(i,n,a,o,s,"throw",e)}o(void 0)})}}function y(){var e,t,r,n=document.getElementById("manifesto"),a=(e=b(h().m(function e(){var t;return h().w(function(e){for(;;)switch(e.n){case 0:if(!(t=this.value.trim())){e.n=2;break}return e.n=1,v(t);case 1:e.n=3;break;case 2:return e.n=3,v("MANIFESTOCLUB");case 3:return e.a(2)}},e,this)})),t=300,function(){var n=this,a=arguments;clearTimeout(r),r=setTimeout(function(){e.apply(n,a)},t)});n.addEventListener("input",a)}function v(e){return w.apply(this,arguments)}function w(){return w=b(h().m(function e(t){var r,n,a,o,s,u=arguments;return h().w(function(e){for(;;)switch(e.n){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:"barcode",n="ManifestoClub",a="MANIFESTOCLUB",!t||"MANIFESTOCLUB"===t){e.n=2;break}return e.n=1,k(t);case 1:o=e.v,n=o.slice(0,15),a=o,e.n=4;break;case 2:return e.n=3,k("MANIFESTOCLUB");case 3:a=e.v;case 4:try{(s=document.getElementById(r)).innerHTML="",i(),i()(s,a,{format:"CODE128",displayValue:!0,text:n,font:'"Lucida Console"',width:2,height:80,margin:0}),s.setAttribute("data-barcode",a)}catch(e){}return e.a(2,a)}},e)})),w.apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return(S=b(h().m(function e(t){var r,n,a,i,o;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:if("undefined"==typeof crypto||!crypto.subtle){e.n=4;break}return e.p=1,r=new TextEncoder,n=r.encode(t),e.n=2,crypto.subtle.digest("SHA-256",n);case 2:return a=e.v,i=Array.from(new Uint8Array(a)),o=i.map(function(e){return e.toString(16).padStart(2,"0")}).join(""),e.a(2,o.slice(0,15));case 3:return e.p=3,e.v,e.a(2,j(t));case 4:return e.a(2,j(t));case 5:return e.a(2)}},e,null,[[1,3]])}))).apply(this,arguments)}function j(e){for(var t=0,r=e+"MANIFESTOCLUB_SALT",n=0;n<r.length;n++){t=(t<<5)-t+r.charCodeAt(n),t&=t}for(var a=Math.abs(t),i=a.toString(16).padStart(8,"0");i.length<15;)i+=a.toString(16);return i.slice(0,15)}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;return new Promise(function(r,n){var a=document.getElementById(e);if(a)r(a);else{var i=Date.now(),o=function(){var a=document.getElementById(e);a?r(a):Date.now()-i>t?n(new Error("Element ".concat(e," not found within ").concat(t,"ms"))):setTimeout(o,50)};o()}})}n=0,document.addEventListener("visibilitychange",function(){if(!document.hidden){var e=Date.now();if(e-n<2e3)return;n=e,setTimeout(b(h().m(function e(){var t,r;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,"undefined"==typeof supabase){e.n=3;break}return e.n=1,supabase.auth.getSession();case 1:if(t=e.v,!(r=t.data.session)){e.n=3;break}return e.n=2,supabase.auth.setSession({access_token:r.access_token,refresh_token:r.refresh_token});case 2:setTimeout(function(){return M()},300);case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[0,4]])})),300)}}),window.addEventListener("load",function(){setTimeout(b(h().m(function e(){var t,r;return h().w(function(e){for(;;)switch(e.n){case 0:if("undefined"==typeof supabase){e.n=2;break}return e.n=1,supabase.auth.getSession();case 1:if(t=e.v,!(r=t.data.session)){e.n=2;break}return e.n=2,supabase.auth.setSession({access_token:r.access_token,refresh_token:r.refresh_token});case 2:return e.a(2)}},e)})),1e3)}),window.addEventListener("load",function(){v("MANIFESTOCLUB"),y()});var I=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=new Map,this.isReady=!0},t=[{key:"generateBarcodeImage",value:(o=b(h().m(function e(t,r){var n,a,i,o=arguments;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:"member-barcode-complete",e.p=1,e.n=2,E(n,5e3);case 2:return a=e.v,e.n=3,this.createBarcodeCanvas(t,r,a);case 3:return i=e.v,a&&i&&(a.style.width="100%",a.style.height="auto",a.style.objectFit="contain",a.style.display="block"),e.a(2,i);case 4:e.p=4,e.v;case 5:return e.a(2)}},e,this,[[1,4]])})),function(e,t){return o.apply(this,arguments)})},{key:"createBarcodeCanvas",value:(a=b(h().m(function e(t,r,n){var a,o,s,u,c,l,d,p,g,m,f,b,y,v,w,k,S,j,E;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a="barcode_".concat(t,"_").concat(r),!this.cache.has(a)){e.n=1;break}return o=this.cache.get(a),n.src=o,n.style.display="block",e.a(2,o);case 1:if(e.p=1,s=function(e,t,r,n,a,i){for(var o=t.split(" "),s="",c=[],l=0;l<o.length;l++){var d=s+o[l]+" ";e.measureText(d).width>a&&l>0?(c.push(s.trim()),s=o[l]+" "):s=d}c.push(s.trim());var p=[];c.forEach(function(t){if(e.measureText(t).width>a){for(var r="",n=0;n<t.length;n++){var i=r+t[n];e.measureText(i).width>a&&r.length>0?(p.push(r),r=t[n]):r=i}r&&p.push(r)}else p.push(t)});var g=p.length*i,h=n-g/2+i/2,m=u.width,f=0;return p.forEach(function(t,n){var a=h+n*i;e.fillText(t,r,a);var o=e.measureText(t).width,s=r-o/2,u=r+o/2;m=Math.min(m,s),f=Math.max(f,u)}),{endY:h+g,minX:m,maxX:f,startY:h,height:g}},u=document.createElement("canvas"),c=u.getContext("2d"),u.width=1500,u.height=800,c.fillStyle="#000000",c.font="".concat(90,"px Arial, sans-serif"),c.textAlign="center",l=u.width,d=s(c,t,u.width/2,200,l,108),p=Math.max(d.endY-65,-200),(g=document.createElement("canvas")).width=1500,g.height=500,g.getContext("2d").clearRect(0,0,g.width,g.height),i()(g,r,{format:"CODE128",displayValue:!0,width:10,height:300,margin:0,background:"transparent",font:'"Lucida Console"',fontSize:100}),m=(u.width-g.width)/2,c.drawImage(g,m,p),!(f=this.getContentBounds(c,u.width,u.height))){e.n=2;break}return b=Math.max(0,f.minX-20),y=Math.max(0,f.minY-20),v=Math.min(u.width,f.maxX+20)-b,w=Math.min(u.height,f.maxY+20)-y,(k=document.createElement("canvas")).width=v,k.height=w,k.getContext("2d").drawImage(u,b,y,v,w,0,0,v,w),S=k.toDataURL("image/png"),this.cache.size>50&&(j=this.cache.keys().next().value,this.cache.delete(j)),this.cache.set(a,S),n.src=S,n.style.display="block",e.a(2,S);case 2:return E=u.toDataURL("image/png"),this.cache.set(a,E),n.src=E,n.style.display="block",e.a(2,E);case 3:return e.p=3,e.v,e.a(2,null)}},e,this,[[1,3]])})),function(e,t,r){return a.apply(this,arguments)})},{key:"getContentBounds",value:function(e,t,r){try{for(var n=e.getImageData(0,0,t,r).data,a=t,i=0,o=r,s=0,u=!1,c=0;c<r;c++)for(var l=0;l<t;l++){var d=4*(c*t+l),p=n[d],g=n[d+1],h=n[d+2];n[d+3]>0&&(p<250||g<250||h<250)&&(u=!0,a=Math.min(a,l),i=Math.max(i,l),o=Math.min(o,c),s=Math.max(s,c))}return u?{minX:a,maxX:i,minY:o,maxY:s}:null}catch(e){return null}}},{key:"preloadBarcode",value:(n=b(h().m(function e(t,r){var n,a;return h().w(function(e){for(;;)switch(e.n){case 0:if(n="barcode_".concat(t,"_").concat(r),this.cache.has(n)){e.n=1;break}return a=document.createElement("img"),e.n=1,this.createBarcodeCanvas(t,r,a);case 1:return e.a(2)}},e,this)})),function(e,t){return n.apply(this,arguments)})}],t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,a,o}());function D(){return C.apply(this,arguments)}function C(){return(C=b(h().m(function e(){var t,r,n,a;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t=null,r=null,void 0!==window.authManager&&(t=window.authManager.getCurrentUser(),r=window.authManager.getToken()),t){e.n=1;break}return e.a(2);case 1:return e.n=2,fetch("https://diydajlvfdvujiogryte.supabase.co/rest/v1/profiles?user_id=eq.".concat(t.id,"&select=manifesto,barcode"),{headers:l({apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpeWRhamx2ZmR2dWppb2dyeXRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyNjc0MDMsImV4cCI6MjA4MDg0MzQwM30.dqqhQ2QT5aUnweLAEQrfilsrkqdCj096oDUeg92TqNs"},r?{Authorization:"Bearer ".concat(r)}:{})});case 2:return n=e.v,e.n=3,n.json();case 3:if(!((a=e.v)&&a.length>0&&a[0].barcode)){e.n=5;break}return e.n=4,I.generateBarcodeImage(a[0].manifesto||"No manifesto",a[0].barcode,"member-barcode-complete");case 4:case 5:e.n=7;break;case 6:e.p=6,e.v;case 7:return e.a(2)}},e,null,[[0,6]])}))).apply(this,arguments)}function O(){return T.apply(this,arguments)}function T(){return(T=b(h().m(function e(){var t,r,n;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,"undefined"!=typeof supabase&&setTimeout(b(h().m(function e(){var t;return h().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,supabase.auth.getSession();case 1:if(t=e.v,!t.data.session){e.n=2;break}if("function"!=typeof forceRefreshSession){e.n=2;break}return e.n=2,forceRefreshSession();case 2:return e.a(2)}},e)})),1500),e.n=1,v("MANIFESTOCLUB");case 1:return y(),e.n=2,M();case 2:t=new URLSearchParams(window.location.search),r="password_update"===t.get("type"),n=t.get("email"),r&&n&&(sessionStorage.setItem("resetEmail",decodeURIComponent(n)),document.getElementById("auth-modal").style.display="block",re(decodeURIComponent(n)),window.history.replaceState({},"",window.location.pathname)),$(),se(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}function M(){return B.apply(this,arguments)}function B(){return(B=b(h().m(function e(){var t,r,n,a,i,o,s,u,c,l,d,p,g,m,f,y,v,w,k;return h().w(function(e){for(;;)switch(e.n){case 0:return document.documentElement.classList.remove("lock"),e.n=1,supabase.auth.getUser();case 1:t=e.v,r=t.data.user,n=document.querySelector(".header__nav li:last-child"),a=document.querySelector(".header__nav--mobile ul"),r?(n&&(n.innerHTML='\n        <div class="user-menu">\n          <span class="user-menu-trigger">(ME)</span>\n          <div class="user-dropdown" id="user-dropdown" style="display: none;">\n            <div class="user-info">\n              <a class="profile" href="profile" data-page="profile">Profile</a>\n            </div>\n            <div class="user-actions">\n              <span class="logout-btn">LOGOUT</span>\n            </div>\n          </div>\n        </div>\n      '),a&&(i=a.querySelector("li .profile"),o=a.querySelector("li .logout-btn"),s=a.querySelector("li .cart-link"),i&&s&&o||(u=Array.from(a.querySelectorAll("li")).find(function(e){var t=e.querySelector("span");return t&&"LOGIN"===t.textContent.trim()}))&&(u.innerHTML='<a class="profile" href="profile" data-page="profile">PROFILE</a>',s||((c=document.createElement("li")).innerHTML='<div class="cart-link" href="cart" data-page="cart">CART(<span id="cartBadgeMobile">0</span>)</div>',u.insertAdjacentElement("afterend",c)),o||((l=document.createElement("li")).innerHTML='<span class="logout-btn">LOGOUT</span>',a.appendChild(l)))),setTimeout(b(h().m(function e(){return h().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,D();case 1:return e.a(2)}},e)})),100)):(n&&(n.innerHTML='<span id="login-trigger">Login</span>'),a&&(f=null===(d=a.querySelector("li .profile"))||void 0===d?void 0:d.parentElement,y=null===(p=a.querySelector("li .cart-link"))||void 0===p?void 0:p.parentElement,v=null===(g=a.querySelector("li .logout-btn"))||void 0===g?void 0:g.parentElement,f&&f.remove(),y&&y.remove(),v&&v.remove(),"LOGIN"===(null===(m=a.querySelector("li span"))||void 0===m?void 0:m.textContent.trim())||((w=document.createElement("li")).innerHTML="<span>LOGIN</span>",a.appendChild(w))),(k=document.getElementById("member-barcode-complete"))&&(k.style.display="none",k.src=""));case 2:return e.a(2)}},e)}))).apply(this,arguments)}function _(){return P.apply(this,arguments)}function P(){return(P=b(h().m(function e(){var t,r,n,a,i;return h().w(function(e){for(;;)switch(e.n){case 0:if(t=document.getElementById("manifesto"),r=document.querySelector(".check-manifesto"),(n=document.getElementById("manifesto-error")).style.display="none",r.innerHTML="",t.value.trim()){e.n=1;break}return n.textContent="Please enter your manifesto",n.style.display="block",e.a(2,!1);case 1:return e.n=2,L(t.value);case 2:return a=e.v,(i=r.querySelector("img"))||((i=document.createElement("img")).alt=a?"Valid":"Invalid",r.appendChild(i)),a?(i.src="/images/yes.png",n.style.display="none"):(i.src="/images/no.png",n.textContent="This manifesto already exists",n.style.display="block"),e.a(2,a)}},e)}))).apply(this,arguments)}function L(e){return A.apply(this,arguments)}function A(){return(A=b(h().m(function e(t){var r,n;return h().w(function(e){for(;;)switch(e.n){case 0:if(t.trim()){e.n=1;break}return e.a(2,!1);case 1:return e.n=2,supabase.from("profiles").select("manifesto").eq("manifesto",t);case 2:if(r=e.v,n=r.data,!r.error){e.n=3;break}return e.a(2,!1);case 3:return e.a(2,0===n.length)}},e)}))).apply(this,arguments)}function x(){return q.apply(this,arguments)}function q(){return(q=b(h().m(function e(){var t,r,n,a,i;return h().w(function(e){for(;;)switch(e.n){case 0:return t=document.getElementById("signup-email"),r=document.querySelector(".check-email"),n=document.getElementById("email-error"),r.innerHTML="",n.style.display="none",e.n=1,U(t.value);case 1:if((a=e.v).valid){e.n=7;break}i=a.reason,e.n="empty"===i?2:"invalid_format"===i?3:"registered"===i?4:5;break;case 2:return e.a(2,!1);case 3:return n.textContent="Please enter a valid email address",e.a(3,6);case 4:return n.textContent="This email is already registered",e.a(3,6);case 5:n.textContent="Validation error";case 6:return n.style.display="block",r.innerHTML='<img src="/images/no.png" alt="Invalid">',e.a(2,!1);case 7:return r.innerHTML='<img src="/images/yes.png" alt="Valid">',e.a(2,!0)}},e)}))).apply(this,arguments)}function U(e){return R.apply(this,arguments)}function R(){return(R=b(h().m(function e(t){var r,n;return h().w(function(e){for(;;)switch(e.n){case 0:if(t.trim()){e.n=1;break}return e.a(2,{valid:!1,reason:"empty"});case 1:if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){e.n=2;break}return e.a(2,{valid:!1,reason:"invalid_format"});case 2:return e.n=3,supabase.from("profiles").select("email").eq("email",t);case 3:if(r=e.v,n=r.data,!r.error){e.n=4;break}return e.a(2,{valid:!1,reason:"error"});case 4:return e.a(2,{valid:0===n.length,reason:0===n.length?"available":"registered"})}},e)}))).apply(this,arguments)}function N(){return F.apply(this,arguments)}function F(){return(F=b(h().m(function e(){var t,r,n,a,i;return h().w(function(e){for(;;)switch(e.n){case 0:if(t=document.getElementById("signup-password"),r=document.querySelector(".check-password"),n=document.getElementById("password-error"),r.innerHTML="",n.style.display="none",0!==(a=t.value.trim()).length){e.n=1;break}return e.a(2,!1);case 1:return(i=a.length>=8)?r.innerHTML='<img src="/images/yes.png" alt="Valid">':(r.innerHTML='<img src="/images/no.png" alt="Invalid">',n.textContent="Password must be longer than 8 characters",n.style.display="block"),e.a(2,i)}},e)}))).apply(this,arguments)}function z(){return G.apply(this,arguments)}function G(){return(G=b(h().m(function e(){var t,r,n,a,i,o,u,c,l,d,p,g,m,f,b;return h().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Promise.all([_(),x(),N()]);case 1:if(t=e.v,r=s(t,3),n=r[0],a=r[1],i=r[2],n&&a&&i){e.n=2;break}return o=function(e){e.style.display="none",setTimeout(function(){return e.style.display="block"},10)},n||(o(document.getElementById("manifesto-error")),document.getElementById("manifesto").focus()),a||(o(document.getElementById("email-error")),document.getElementById("signup-email").focus()),i||(o(document.getElementById("password-error")),document.getElementById("signup-password").focus()),e.a(2);case 2:return u=document.getElementById("signup-email").value,c=document.getElementById("signup-password").value,l=document.getElementById("manifesto").value,e.n=3,v(l);case 3:return d=e.v,e.n=4,supabase.auth.signUp({email:u,password:c,options:{data:{manifesto:l,barcode:d}}});case 4:if(p=e.v,g=p.data,!(m=p.error)){e.n=5;break}throw m;case 5:return e.n=6,supabase.from("profiles").upsert({user_id:g.user.id,email:u,manifesto:l,barcode:d,created_at:new Date});case 6:if(f=e.v,!(b=f.error)){e.n=7;break}throw b;case 7:H({email:u,manifesto:l});case 8:return e.a(2)}},e)}))).apply(this,arguments)}function H(e){document.querySelector(".auth-modal-header").style.display="none",document.getElementById("login-form").style.display="none",document.getElementById("signup-form").style.display="none",document.getElementById("password-reset-form").style.display="none",document.getElementById("signup-success-form").style.display="block",document.getElementById("manifesto-code").textContent=e.manifesto,document.getElementById("success-email").textContent=e.email,v(e.manifesto,"barcode-success")}function J(){return W.apply(this,arguments)}function W(){return(W=b(h().m(function e(){var t,r,n,a;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=document.getElementById("success-email").textContent,r=document.getElementById("resend-button"),e.p=1,r.disabled=!0,r.textContent="Sending...",e.n=2,new Promise(function(e){return setTimeout(e,50)});case 2:return e.n=3,supabase.auth.resend({type:"signup",email:t});case 3:if(n=e.v,!(a=n.error)){e.n=4;break}throw a;case 4:r.textContent="✓ Email Resent",e.n=6;break;case 5:e.p=5,e.v,r.textContent="Resend Verification Email",r.disabled=!1;case 6:return e.a(2)}},e,null,[[1,5]])}))).apply(this,arguments)}function Q(){document.getElementById("auth-modal").style.display="none",V()}function V(){document.querySelector(".auth-modal-header").style.display="block",document.getElementById("login-form").style.display="block",document.getElementById("signup-form").style.display="none",document.getElementById("signup-success-form").style.display="none",document.getElementById("password-reset-form").style.display="none",document.getElementById("signup-email").value="",document.getElementById("signup-password").value="",document.getElementById("manifesto").value="",document.getElementById("login-email").value="",document.getElementById("login-password").value="",document.querySelectorAll(".check-icon").forEach(function(e){e.innerHTML=""}),document.querySelectorAll(".error-message").forEach(function(e){e.style.display="none"}),v("MANIFESTOCLUB")}function Y(){document.getElementById("login-form").style.display="none",document.getElementById("password-reset-form").style.display="block"}function X(){document.getElementById("login-form").style.display="block",document.getElementById("signup-form").style.display="none",document.getElementById("password-reset-form").style.display="none",document.getElementById("update-password-form").style.display="none"}function K(){document.getElementById("login-form").style.display="none",document.getElementById("signup-form").style.display="block"}document.addEventListener("visibilitychange",function(){document.hidden||"profile"!==window.currentPage||setTimeout(b(h().m(function e(){return h().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,D();case 1:return e.a(2)}},e)})),100)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".member-code-container");e&&(e.style.width="100%",e.style.boxSizing="border-box");var t=document.querySelector(".barcode-wrapper");t&&(t.style.width="100%")}),document.addEventListener("DOMContentLoaded",O),"undefined"!=typeof window&&(window.barcodeGenerator=I,window.generateBarcode=v),window.openAuthModal=function(){var e=document.getElementById("auth-modal");if(e){e.style.display="block";var t=sessionStorage.getItem("resetEmail"),r=new URLSearchParams(window.location.search),n="password_update"===r.get("type"),a=r.get("email");n&&a?(re(decodeURIComponent(a)),window.history.replaceState({},document.title,window.location.pathname)):t?re(t):r.has("login")&&X()}},window.handleModalClick=function(e){e.target===document.getElementById("auth-modal")&&(document.getElementById("auth-modal").style.display="none",V())};var Z;sessionStorage.getItem("resetEmail");function $(){var e=new URLSearchParams(window.location.search),t=e.get("email"),r="password_update"===e.get("type");t&&r&&sessionStorage.setItem("resetEmail",decodeURIComponent(t))}function ee(){return te.apply(this,arguments)}function te(){return(te=b(h().m(function e(){var t,r,n,a,i,o,s,u;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=document.getElementById("reset-email").value.trim(),r=document.getElementById("reset-link"),(n=document.getElementById("reset-error")).style.display="none",n.textContent="",t){e.n=1;break}return n.textContent="Please enter your email address",n.style.display="block",e.a(2);case 1:if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){e.n=2;break}return n.textContent="Please enter a valid email address",n.style.display="block",e.a(2);case 2:return e.p=2,r.disabled=!0,r.textContent="Sending...",e.n=3,supabase.from("profiles").select("email").eq("email",t).single();case 3:if(a=e.v,i=a.data,!a.error&&i){e.n=4;break}throw n.textContent="This email is not registered",n.style.display="block",new Error("Email not registered");case 4:return o="".concat(window.location.origin,"/?type=password_update&email=").concat(encodeURIComponent(t)),e.n=5,supabase.auth.resetPasswordForEmail(t,{redirectTo:o});case 5:if(s=e.v,!(u=s.error)){e.n=6;break}throw u;case 6:r.textContent="✓ Email Sent",sessionStorage.setItem("resetEmail",t),setTimeout(function(){r.textContent="SEND RESET LINK",r.disabled=!1},3e3),e.n=8;break;case 7:e.p=7,e.v,n.textContent="Failed to send reset link. Please try again.",n.style.display="block",r.textContent="SEND RESET LINK",r.disabled=!1;case 8:return e.a(2)}},e,null,[[2,7]])}))).apply(this,arguments)}function re(e){document.getElementById("login-form").style.display="none",document.getElementById("signup-form").style.display="none",document.getElementById("password-reset-form").style.display="none",document.getElementById("update-password-form").style.display="block",document.getElementById("reset-email-display").value=e,document.getElementById("new-password").value="",document.getElementById("confirm-password").value="",document.getElementById("update-password-error").style.display="none",document.getElementById("confirm-password-error").style.display="none",ne()}function ne(){var e=document.getElementById("new-password").value,t=document.getElementById("confirm-password").value,r=document.querySelector(".check-new-password"),n=document.querySelector(".check-confirm-password"),a=document.getElementById("update-password-error"),i=document.getElementById("confirm-password-error"),o=document.getElementById("update-password");a.style.display="none",i.style.display="none",r.innerHTML="",n.innerHTML="";var s=!0;return e.length>0&&e.length<8?(ae(r,!1),a.textContent="Password must be at least 8 characters",a.style.display="block",s=!1):e.length>=8&&ae(r,!0),e&&t&&e!==t?(ae(n,!1),i.textContent="Passwords do not match",i.style.display="block",s=!1):t&&e===t&&ae(n,!0),o.disabled=!s,s}function ae(e,t){e.innerHTML="";var r=document.createElement("img");r.src=t?".../images/yes.png":".../images/no.png",r.alt=t?"Valid":"Invalid",e.appendChild(r)}function ie(){return oe.apply(this,arguments)}function oe(){return(oe=b(h().m(function e(){var t,r,n,a,i,o,s,u,c,l,d;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:if(ne()){e.n=1;break}return e.a(2);case 1:return t=document.getElementById("new-password").value,r=document.getElementById("update-password"),n=document.getElementById("update-password-error"),e.p=2,r.disabled=!0,r.textContent="Updating...",e.n=3,supabase.auth.getSession();case 3:if(a=e.v,i=a.data.session,!(o=a.error)){e.n=4;break}throw new Error("Session error: "+o.message);case 4:if(i){e.n=7;break}return e.n=5,new Promise(function(e){return setTimeout(e,500)});case 5:return e.n=6,supabase.auth.getSession();case 6:if(s=e.v,u=s.data.session,!s.error&&u){e.n=7;break}throw new Error("Your password reset link has expired. Please request a new one.");case 7:return e.n=8,supabase.auth.updateUser({password:t});case 8:if(c=e.v,!(l=c.error)){e.n=9;break}throw l;case 9:r.textContent="✓ Password Updated",sessionStorage.removeItem("resetEmail"),setTimeout(function(){X(),document.getElementById("new-password").value="",document.getElementById("confirm-password").value="",Q(),alert("Password updated successfully! Please log in with your new password.")},1500),e.n=11;break;case 10:e.p=10,d=e.v,n.textContent=d.message.includes("expired")||d.message.includes("Auth session missing")?"Your password reset link has expired. Please request a new one.":"Error: ".concat(d.message),n.style.display="block",r.textContent="UPDATE PASSWORD",r.disabled=!1;case 11:return e.a(2)}},e,null,[[2,10]])}))).apply(this,arguments)}function se(){document.getElementById("new-password").addEventListener("input",function(){clearTimeout(Z),Z=setTimeout(ne,300)}),document.getElementById("confirm-password").addEventListener("input",function(){clearTimeout(Z),Z=setTimeout(ne,300)})}function ue(){return ce.apply(this,arguments)}function ce(){return(ce=b(h().m(function e(){var t,r,n,a,i,o,s,u;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=document.getElementById("login-email").value.trim(),r=document.getElementById("login-password").value,document.getElementById("login-error"),de(),t&&r){e.n=1;break}return le("Please enter both email/manifesto and password"),e.a(2);case 1:if(e.p=1,n=t,t.includes("@")){e.n=8;break}return e.p=2,e.n=3,fetch("https://diydajlvfdvujiogryte.supabase.co/rest/v1/profiles?manifesto=eq.".concat(encodeURIComponent(t),"&select=email"),{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpeWRhamx2ZmR2dWppb2dyeXRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyNjc0MDMsImV4cCI6MjA4MDg0MzQwM30.dqqhQ2QT5aUnweLAEQrfilsrkqdCj096oDUeg92TqNs"}});case 3:return a=e.v,e.n=4,a.json();case 4:if(!((i=e.v)&&i.length>0)){e.n=5;break}n=i[0].email,e.n=6;break;case 5:return le("Manifesto not found"),e.a(2);case 6:e.n=8;break;case 7:return e.p=7,e.v,le("Failed to lookup manifesto"),e.a(2);case 8:return e.n=9,supabase.auth.signInWithPassword({email:n,password:r});case 9:if(o=e.v,s=o.data,!(u=o.error)){e.n=10;break}u.message.includes("Invalid login credentials")?le("Invalid credentials. Please check your password."):u.message.includes("Email not confirmed")?le("Please verify your email address first."):le("Login failed: "+u.message),e.n=12;break;case 10:if(void 0===window.authManager){e.n=11;break}return e.n=11,window.authManager.onLoginSuccess({data:s});case 11:return de(),Q(),e.n=12,M();case 12:e.n=14;break;case 13:e.p=13,e.v,le("An error occurred during login. Please try again.");case 14:return e.a(2)}},e,null,[[2,7],[1,13]])}))).apply(this,arguments)}function le(e){var t=document.getElementById("login-error");t&&(t.textContent=e,t.style.display="block",t.style.opacity="0",setTimeout(function(){t.style.opacity="1"},10))}function de(){var e=document.getElementById("login-error");e&&(e.style.display="none",e.textContent="")}function pe(){var e=document.getElementById("login-email"),t=document.getElementById("login-password");e&&(e.addEventListener("blur",function(){var e=function(e){if(!e.trim())return{valid:!1,message:"Please enter your email or manifesto"};if(e.includes("@")&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return{valid:!1,message:"Please enter a valid email address"};return{valid:!0}}(this.value);!e.valid&&this.value.trim()&&le(e.message)}),e.addEventListener("input",function(){de()})),t&&t.addEventListener("input",function(){de()})}function ge(){var e=document.getElementById("user-dropdown");"none"===e.style.display||""===e.style.display?e.style.display="block":e.style.display="none"}function he(){return me.apply(this,arguments)}function me(){return(me=b(h().m(function e(){return h().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,void 0!==window.authManager&&window.authManager.logout(),"undefined"==typeof supabase){e.n=1;break}return e.n=1,supabase.auth.signOut();case 1:return e.n=2,M();case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}function fe(){document.addEventListener("keydown",function(e){if("Enter"===e.code||"Enter"===e.key){var t=document.getElementById("auth-modal"),r=document.getElementById("login-form"),n=t&&"block"===t.style.display,a=r&&"none"!==r.style.display,i=document.activeElement,o=i&&("login-email"===i.id||"login-password"===i.id);n&&a&&o&&(e.preventDefault(),ue())}})}function be(){return(be=b(h().m(function e(){var t,r;return h().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,supabase.auth.getUser();case 1:if(t=e.v,r=t.data.user,!t.error&&r){e.n=2;break}return"function"==typeof openAuthModal&&openAuthModal(),X(),e.a(2,null);case 2:return e.a(2,r)}},e)}))).apply(this,arguments)}document.addEventListener("DOMContentLoaded",b(h().m(function e(){var t,r,n,a,i,o;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,M();case 1:if(!(t=window.location.hash).includes("access_token")&&!t.includes("refresh_token")){e.n=6;break}return e.p=2,e.n=3,supabase.auth.getSession();case 3:r=e.v,n=r.data,r.error||n.session&&(a=new URLSearchParams(window.location.search),i="password_update"===a.get("type"),o=a.get("email"),i&&o&&re(decodeURIComponent(o))),e.n=5;break;case 4:e.p=4,e.v;case 5:window.history.replaceState({},"",window.location.pathname);case 6:$(),se();case 7:return e.a(2)}},e,null,[[2,4]])}))),document.addEventListener("DOMContentLoaded",b(h().m(function e(){return h().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,new Promise(function(e){if("undefined"!=typeof supabase)e();else var t=setInterval(function(){"undefined"!=typeof supabase&&(clearInterval(t),e())},100)});case 1:return e.n=2,O();case 2:pe(),fe();case 3:return e.a(2)}},e)}))),document.addEventListener("click",function(e){var t=document.querySelector(".user-menu"),r=document.getElementById("user-dropdown");t&&!t.contains(e.target)&&r&&(r.style.display="none")}),document.addEventListener("DOMContentLoaded",function(){pe(),fe();var e=document.getElementById("auth-modal"),t=document.querySelector(".auth-modal-container");function r(){var e=document.getElementById("auth-modal");e&&(e.style.display="none"),V(),document.documentElement.classList.remove("lock")}e&&t&&(e.addEventListener("click",function(t){t.target===e&&r()}),t.addEventListener("click",function(e){e.stopPropagation()})),document.addEventListener("click",function(t){var r=t.target.closest("#login-trigger"),n=t.target.closest(".header__nav--mobile span");if(r||n&&n.textContent.includes("LOGIN"))return t.preventDefault(),e&&(e.style.display="block",document.documentElement.classList.add("lock")),void closeMobileMenu();if(t.target.closest(".user-menu-trigger"))return t.preventDefault(),void ge();if(t.target.closest(".logout-btn"))return t.preventDefault(),he(),void closeMobileMenu();if(t.target.closest(".header__nav--mobile .profile"))closeMobileMenu();else if(t.target.closest(".header__mob-toggle")){var a=document.getElementById("mobileNav");a&&(a.style.display="block"===a.style.display?"none":"block")}});var n=document.getElementById("login-button");n&&n.addEventListener("click",ue);var a=document.querySelector(".auth-form-toggle.signup");a&&a.addEventListener("click",K);var i=document.getElementById("signup-button");i&&i.addEventListener("click",z);var o=document.querySelector("#signup-form .auth-form-toggle");o&&o.addEventListener("click",X);var s=document.querySelector(".forgot-password-link");s&&s.addEventListener("click",Y);var u=document.getElementById("reset-link");u&&u.addEventListener("click",ee);var c=document.querySelector("#password-reset-form .auth-form-toggle");c&&c.addEventListener("click",X);var l=document.getElementById("update-password");l&&l.addEventListener("click",ie);var d=document.getElementById("resend-button");d&&d.addEventListener("click",J);var p=document.getElementById("verify-button");p&&p.addEventListener("click",r);var g=document.getElementById("manifesto");g&&g.addEventListener("input",_);var h=document.getElementById("signup-email");h&&h.addEventListener("input",x);var m=document.getElementById("signup-password");m&&m.addEventListener("input",N)}),"undefined"!=typeof window&&(window.displayUserProfile=D,window.generateBarcode=v,window.barcodeGenerator=I),"undefined"!=typeof window&&(window.login=ue,window.signup=z,window.logout=he,window.openAuthModal=openAuthModal,window.closeAuthModal=Q,window.handleModalClick=handleModalClick,window.showLoginForm=X,window.showSignupForm=K,window.showPasswordReset=Y,window.showUpdatePasswordForm=re,window.checkManifesto=_,window.checkEmail=x,window.checkPassword=N,window.validateManifesto=L,window.validateEmail=U,window.sendResetLink=ee,window.updatePassword=ie,window.resendVerificationEmail=J,window.toggleUserMenu=ge,window.showSuccessForm=H,window.resetAuthForms=V,window.showLoginError=le,window.hideLoginError=de,window.setupLoginValidation=pe,window.setupEnterKeyLogin=fe,window.checkUserLogin=function(){return be.apply(this,arguments)})},7283:(e,t,r)=>{"use strict";var n=r(2578);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function p(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function i(r,n,a,i){var u=n&&n.prototype instanceof s?n:s,c=Object.create(u.prototype);return g(c,"_invoke",function(r,n,a){var i,s,u,c=0,l=a||[],d=!1,p={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,o}};function g(r,n){for(s=r,u=n,t=0;!d&&c&&!a&&t<l.length;t++){var a,i=l[t],g=p.p,h=i[2];r>3?(a=h===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=g&&((a=r<2&&g<i[1])?(s=0,p.v=n,p.n=i[1]):g<h&&(a=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,p.n=h,s=0))}if(a||r>1)return o;throw d=!0,n}return function(a,l,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&g(l,h),s=l,u=h;(t=s<2?e:u)||!d;){i||(s?s<3?(s>1&&(p.n=-1),g(s,u)):p.n=u:p.v=u);try{if(c=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=p.n<0)?u:r.call(n,p))!==o)break}catch(t){i=e,s=1,u=t}finally{c=1}}return{value:t,done:d}}}(r,a,i),!0),c}var o={};function s(){}function u(){}function c(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(g(t={},n,function(){return this}),t),d=c.prototype=s.prototype=Object.create(l);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,g(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return u.prototype=c,g(d,"constructor",c),g(c,"constructor",u),u.displayName="GeneratorFunction",g(c,a,"GeneratorFunction"),g(d),g(d,a,"Generator"),g(d,n,function(){return this}),g(d,"toString",function(){return"[object Generator]"}),(p=function(){return{w:i,m:h}})()}function g(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}g=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){g(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}},g(e,t,r,n)}function h(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function m(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function o(e){h(i,n,a,o,s,"next",e)}function s(e){h(i,n,a,o,s,"throw",e)}o(void 0)})}}var f="https://diydajlvfdvujiogryte.supabase.co",b="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpeWRhamx2ZmR2dWppb2dyeXRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyNjc0MDMsImV4cCI6MjA4MDg0MzQwM30.dqqhQ2QT5aUnweLAEQrfilsrkqdCj096oDUeg92TqNs",y="manifesto-auth-data",v=null,w=0,k=null,S=(0,n.UU)(f,b,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1,flowType:"pkce",storage:{getItem:function(){return null},setItem:function(){},removeItem:function(){}}},global:{headers:{"Content-Type":"application/json"}}});function j(){return E.apply(this,arguments)}function E(){return E=m(p().m(function e(){var t,r,n,a,i,o=arguments;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],r=Date.now(),!(!t&&v&&r-w<3e4)){e.n=1;break}return e.a(2,!0);case 1:if(window.authManager){e.n=2;break}return e.a(2,!1);case 2:if(window.authManager.isAuthenticated()){e.n=3;break}return e.a(2,!1);case 3:if(n=window.authManager.getToken(),a=window.authManager.getCurrentUser(),n&&a){e.n=4;break}return e.a(2,!1);case 4:return e.p=4,e.n=5,S.auth.setSession({access_token:n,refresh_token:window.authManager.refreshToken||"",expires_at:window.authManager.expiresAt||0,token_type:"bearer",user:a});case 5:if(i=e.v,!i.error){e.n=6;break}return e.a(2,!1);case 6:return v={user:a,token:n,timestamp:r},w=r,I(),e.a(2,!0);case 7:return e.p=7,e.v,e.a(2,!1)}},e,null,[[4,7]])})),E.apply(this,arguments)}function I(){k&&clearInterval(k),k=setInterval(m(p().m(function e(){var t,r;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!document.hidden){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,S.auth.getSession();case 2:if(r=e.v,!r.error||null===(t=window.authManager)||void 0===t||!t.isAuthenticated()){e.n=3;break}return e.n=3,j(!0);case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[1,4]])})),3e5)}var D=function(){return l(function e(){u(this,e),this.user=null,this.token=null,this.refreshToken=null,this.expiresAt=null,this.storageKey=y,this.isInitialized=!1,this.initPromise=null},[{key:"init",value:(s=m(p().m(function e(){var t=this;return p().w(function(e){for(;;)switch(e.n){case 0:if(!this.initPromise){e.n=1;break}return e.a(2,this.initPromise);case 1:return this.initPromise=m(p().m(function e(){return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.loadFromStorage(),!t.token||!t.isTokenExpired()){e.n=4;break}return e.p=1,e.n=2,t.refreshAccessToken();case 2:e.n=4;break;case 3:e.p=3,e.v,t.logout();case 4:return setTimeout(function(){t.user&&document.dispatchEvent(new CustomEvent("authStateChanged",{detail:{user:t.user,isAuthenticated:t.isAuthenticated()}})),document.dispatchEvent(new CustomEvent("authReady",{detail:{authManager:t,isReady:!0}}))},100),t.isInitialized=!0,e.a(2,t)}},e,null,[[1,3]])}))(),e.a(2,this.initPromise)}},e,this)})),function(){return s.apply(this,arguments)})},{key:"loadFromStorage",value:function(){try{var e=localStorage.getItem(this.storageKey);if(!e)return!1;var t=JSON.parse(e);return(Date.now()-(t.savedAt||0))/864e5>7?(localStorage.removeItem(this.storageKey),!1):(this.user=t.user,this.token=t.token,this.refreshToken=t.refreshToken,this.expiresAt=t.expiresAt,!0)}catch(e){try{localStorage.removeItem(this.storageKey)}catch(e){}return!1}}},{key:"saveToStorage",value:function(){try{return localStorage.setItem(this.storageKey,JSON.stringify({user:this.user,token:this.token,refreshToken:this.refreshToken,expiresAt:this.expiresAt,savedAt:Date.now()})),!0}catch(e){return!1}}},{key:"isTokenExpired",value:function(){if(!this.expiresAt)return!0;var e=Math.floor(Date.now()/1e3);return this.expiresAt-60<e}},{key:"isAuthenticated",value:function(){return this.token&&!this.isTokenExpired()}},{key:"onLoginSuccess",value:(i=m(p().m(function e(t){var r,n,a,i;return p().w(function(e){for(;;)switch(e.n){case 0:if(null===(r=t.data)||void 0===r||!r.session){e.n=1;break}return n=t.data,a=n.session,i=n.user,this.user=i,this.token=a.access_token,this.refreshToken=a.refresh_token,this.expiresAt=a.expires_at,this.saveToStorage(),Promise.all([j(!0),new Promise(function(e){document.dispatchEvent(new CustomEvent("authStateChanged",{detail:{user:i,isAuthenticated:!0,source:"login"}})),document.dispatchEvent(new CustomEvent("loginSuccess",{detail:{user:i}})),e()})]),e.a(2,!0);case 1:return e.a(2,!1)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"onSignupSuccess",value:(a=m(p().m(function e(t){var r,n,a;return p().w(function(e){for(;;)switch(e.n){case 0:if(null===(r=t.data)||void 0===r||!r.user){e.n=2;break}if(n=t.data,a=n.user,!n.session){e.n=1;break}return e.a(2,this.onLoginSuccess(t));case 1:return this.user=a,this.token=null,this.refreshToken=null,this.expiresAt=null,document.dispatchEvent(new CustomEvent("signupSuccess",{detail:{user:a}})),e.a(2,!0);case 2:return e.a(2,!1)}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"logout",value:function(){var e=this.user;this.user=null,this.token=null,this.refreshToken=null,this.expiresAt=null,v=null;try{localStorage.removeItem(this.storageKey),localStorage.removeItem("supabase.auth.token")}catch(e){}document.dispatchEvent(new CustomEvent("authStateChanged",{detail:{user:null,isAuthenticated:!1,source:"logout",oldUser:e}})),document.dispatchEvent(new CustomEvent("logout",{detail:{oldUser:e}}))}},{key:"getCurrentUser",value:function(){return this.user}},{key:"getToken",value:function(){return this.token}},{key:"getAuthHeaders",value:function(){var e={apikey:b,"Content-Type":"application/json"};return this.token&&(e.Authorization="Bearer ".concat(this.token)),e}},{key:"refreshAccessToken",value:(n=m(p().m(function e(){var t,r;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.refreshToken){e.n=1;break}return e.a(2,!1);case 1:return e.p=1,e.n=2,fetch("https://diydajlvfdvujiogryte.supabase.co/auth/v1/token?grant_type=refresh_token",{method:"POST",headers:{"Content-Type":"application/json",apikey:b},body:JSON.stringify({refresh_token:this.refreshToken})});case 2:if((t=e.v).ok){e.n=3;break}return 400===t.status&&this.logout(),e.a(2,!1);case 3:return e.n=4,t.json();case 4:return r=e.v,this.token=r.access_token,this.refreshToken=r.refresh_token,this.expiresAt=Math.floor(Date.now()/1e3)+r.expires_in,this.saveToStorage(),document.dispatchEvent(new CustomEvent("tokenRefreshed",{detail:{user:this.user,expiresAt:this.expiresAt}})),e.a(2,!0);case 5:return e.p=5,e.v,e.a(2,!1)}},e,this,[[1,5]])})),function(){return n.apply(this,arguments)})},{key:"supabaseRequest",value:(r=m(p().m(function e(t){var r,n,a,i,s=arguments;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.p=1,n=this.getAuthHeaders(),Object.assign(n,r.headers||{}),a="https://diydajlvfdvujiogryte.supabase.co/rest/v1/".concat(t),e.n=2,fetch(a,o(o({},r),{},{headers:n}));case 2:if(401!==(i=e.v).status||!this.refreshToken){e.n=5;break}return e.n=3,this.refreshAccessToken();case 3:if(!e.v){e.n=5;break}return n.Authorization="Bearer ".concat(this.token),e.n=4,fetch(a,o(o({},r),{},{headers:n}));case 4:i=e.v;case 5:return e.a(2,i);case 6:throw e.p=6,e.v;case 7:return e.a(2)}},e,this,[[1,6]])})),function(e){return r.apply(this,arguments)})},{key:"getUserProfile",value:(t=m(p().m(function e(){var t,r;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.user){e.n=1;break}return e.a(2,null);case 1:return e.p=1,e.n=2,this.supabaseRequest("profiles?user_id=eq.".concat(this.user.id,"&select=*"),{method:"GET"});case 2:if(!(t=e.v).ok){e.n=4;break}return e.n=3,t.json();case 3:return r=e.v,e.a(2,r[0]||null);case 4:e.n=6;break;case 5:e.p=5,e.v;case 6:return e.a(2,null)}},e,this,[[1,5]])})),function(){return t.apply(this,arguments)})},{key:"updateUserProfile",value:(e=m(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:if(this.user){e.n=1;break}return e.a(2,null);case 1:return e.a(2,this.supabaseRequest("profiles?user_id=eq.".concat(this.user.id),{method:"PATCH",body:JSON.stringify(t)}))}},e,this)})),function(t){return e.apply(this,arguments)})}]);var e,t,r,n,a,i,s}(),C=function(){return l(function e(){u(this,e),this.isConnected=!1},[{key:"ensureConnection",value:(e=m(p().m(function e(){var t,r;return p().w(function(e){for(;;)switch(e.n){case 0:if(!this.isConnected){e.n=1;break}return e.a(2,!0);case 1:if(null===(t=window.authManager)||void 0===t||!t.isAuthenticated()){e.n=3;break}return e.n=2,j();case 2:r=e.v,this.isConnected=r,e.n=4;break;case 3:this.isConnected=!0;case 4:return e.a(2,this.isConnected)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"disconnect",value:function(){this.isConnected=!1,v=null}},{key:"handleVisibilityChange",value:function(){var e=this;document.addEventListener("visibilitychange",function(){document.hidden||e.ensureConnection().catch(console.error)})}}]);var e}(),O=function(){return l(function e(){u(this,e),this.loadedScripts=new Set},[{key:"loadScript",value:(e=m(p().m(function e(t){var r=this;return p().w(function(e){for(;;)switch(e.n){case 0:if(!this.loadedScripts.has(t)){e.n=1;break}return e.a(2);case 1:return e.a(2,new Promise(function(e){var n=document.createElement("script");n.src="/js/".concat(t),n.async=!1,n.onload=function(){r.loadedScripts.add(t),e()},n.onerror=function(){e()},document.body.appendChild(n)}))}},e,this)})),function(t){return e.apply(this,arguments)})}]);var e}(),T=null,M=null,B=null;function _(){return T||(T=new D,"undefined"!=typeof window&&(window.authManager=T),T.init()),T}function P(){return M||(M=new C,"undefined"!=typeof window&&(window.supabaseManager=M,M.handleVisibilityChange())),M}function L(){return B||(B=new O,"undefined"!=typeof window&&(window.pageScriptManager=B)),B}function A(){return x.apply(this,arguments)}function x(){return(x=m(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:_(),P(),L(),"undefined"!=typeof window&&(window.supabase=S,window.restoreSupabaseSession=j,window.updateSupabaseAuth=function(){var e;if(null!==(e=window.authManager)&&void 0!==e&&e.isAuthenticated()){var t=window.authManager.getToken();S.auth.setSession({access_token:t,refresh_token:window.authManager.refreshToken||"",expires_at:window.authManager.expiresAt||0,token_type:"bearer",user:window.authManager.getCurrentUser()}).catch(function(e){}),v={token:t,user:window.authManager.getCurrentUser(),timestamp:Date.now()}}else S.auth.setSession(null),v=null}),document.addEventListener("authStateChanged",function(){window.updateSupabaseAuth&&window.updateSupabaseAuth()}),document.addEventListener("visibilitychange",function(){var e;!document.hidden&&null!==(e=window.authManager)&&void 0!==e&&e.isAuthenticated()&&j().catch(console.error)});case 1:return e.a(2)}},e)}))).apply(this,arguments)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",A):A()},8399:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,r||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function u(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function i(r,n,a,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return c(l,"_invoke",function(r,n,a){var i,s,u,c=0,l=a||[],d=!1,p={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,o}};function g(r,n){for(s=r,u=n,t=0;!d&&c&&!a&&t<l.length;t++){var a,i=l[t],g=p.p,h=i[2];r>3?(a=h===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=g&&((a=r<2&&g<i[1])?(s=0,p.v=n,p.n=i[1]):g<h&&(a=r<3||i[0]>n||n>h)&&(i[4]=r,i[5]=n,p.n=h,s=0))}if(a||r>1)return o;throw d=!0,n}return function(a,l,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&g(l,h),s=l,u=h;(t=s<2?e:u)||!d;){i||(s?s<3?(s>1&&(p.n=-1),g(s,u)):p.n=u:p.v=u);try{if(c=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=p.n<0)?u:r.call(n,p))!==o)break}catch(t){i=e,s=1,u=t}finally{c=1}}return{value:t,done:d}}}(r,a,i),!0),l}var o={};function s(){}function l(){}function d(){}t=Object.getPrototypeOf;var p=[][n]?t(t([][n]())):(c(t={},n,function(){return this}),t),g=d.prototype=s.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e}return l.prototype=d,c(g,"constructor",d),c(d,"constructor",l),l.displayName="GeneratorFunction",c(d,a,"GeneratorFunction"),c(g),c(g,a,"Generator"),c(g,n,function(){return this}),c(g,"toString",function(){return"[object Generator]"}),(u=function(){return{w:i,m:h}})()}function c(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}c=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){c(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}},c(e,t,r,n)}function l(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function o(e){l(i,n,a,o,s,"next",e)}function s(e){l(i,n,a,o,s,"throw",e)}o(void 0)})}}!function(){"use strict";function e(){return n.apply(this,arguments)}function n(){return(n=d(u().m(function e(){var t,r;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!window.authManager||!window.authManager.isAuthenticated()){e.n=1;break}return e.a(2,window.authManager.getCurrentUser());case 1:return e.p=1,e.n=2,supabase.auth.getUser();case 2:return t=e.v,r=t.data.user,e.a(2,r);case 3:return e.p=3,e.v,e.a(2,null)}},e,null,[[1,3]])}))).apply(this,arguments)}window.CartManager||(window.TSHIRT_PRICING={blank:{white:69,black:69,colored:69},"single-sided":{white:79,black:89,colored:89},"double-sided":{white:89,black:99,colored:99}},window.CartManager=s(s(s(s(s(s(s(s(s(s({initialized:!1,getCart:function(t){return d(u().m(function t(){var r,n,a,i;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e();case 1:if(r=t.v){t.n=2;break}return t.a(2,[]);case 2:if(n=r.id,window.supabase){t.n=3;break}return t.a(2,[]);case 3:return t.n=4,supabase.from("cart_items").select("*").eq("user_id",n);case 4:if(a=t.v,i=a.data,!a.error){t.n=5;break}return t.a(2,[]);case 5:return t.a(2,i||[]);case 6:return t.p=6,t.v,t.a(2,[])}},t,null,[[0,6]])}))()},generateMergeKey:function(e,t,r){return"blank-tshirt"===e?"blank-tshirt-".concat(t):r?"custom-design":"tshirt"},addOrUpdateCartItem:function(t){var n=this;return d(u().m(function a(){var i,s,c,l,d,p,g,h,m,f,b,y,v,w,k,S,j,E,I,D,C,O,T,M,B,_,P,L,A;return u().w(function(a){for(;;)switch(a.p=a.n){case 0:if(i=t.draftId,s=t.itemData,c=t.sizes,l=t.userId,a.p=1,l){a.n=4;break}return a.n=2,e();case 2:if(d=a.v){a.n=3;break}return a.a(2,{success:!1,error:"请先登录"});case 3:l=d.id;case 4:if(p=null,!i){a.n=6;break}return a.n=5,supabase.from("cart_items").select("*").eq("user_id",l).eq("draft_id",i);case 5:g=a.v,(h=g.data)&&h.length>0&&(p=h[0]),a.n=8;break;case 6:if("blank-tshirt"!==s.type){a.n=8;break}return m="blank-tshirt-".concat(s.color),a.n=7,supabase.from("cart_items").select("*").eq("user_id",l).eq("type",m);case 7:f=a.v,(b=f.data)&&b.length>0&&(p=b[0]);case 8:if(y=s.unitPrice||29.99,v=Object.values(c).reduce(function(e,t){return e+t},0),!p){a.n=16;break}if(0!==v){a.n=12;break}return a.n=9,supabase.from("cart_items").delete().eq("id",p.id).eq("user_id",l);case 9:if(w=a.v,!(k=w.error)){a.n=10;break}return a.a(2,{success:!1,error:k.message});case 10:return a.n=11,n.updateCartBadge();case 11:return a.a(2,{success:!0,action:"removed",itemId:p.id});case 12:for(S=o({},p.sizes),j=0,E=Object.entries(c);j<E.length;j++)I=r(E[j],2),D=I[0],C=I[1],S[D]=(S[D]||0)+C;return O=y*v,a.n=13,supabase.from("cart_items").update({sizes:S,quantity:v,total_price:O,price:y,updated_at:(new Date).toISOString()}).eq("id",p.id).eq("user_id",l).select().single();case 13:if(T=a.v,T.data,!(M=T.error)){a.n=14;break}return a.a(2,{success:!1,error:M.message});case 14:return a.n=15,n.updateCartBadge();case 15:return n.showCartAddedEffect(),a.a(2,{success:!0,action:"updated",itemId:p.id,totalQuantity:v});case 16:if(0!==v){a.n=17;break}return a.a(2,{success:!1,error:"Please select at least one size"});case 17:return B={user_id:l,sizes:c,quantity:v,price:y,total_price:y*v,type:"blank-tshirt"===s.type?"blank-tshirt-".concat(s.color):s.type,draft_id:i||null,added_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},a.n=18,supabase.from("cart_items").insert([B]).select().single();case 18:if(_=a.v,P=_.data,!(L=_.error)){a.n=19;break}return a.a(2,{success:!1,error:L.message});case 19:return a.n=20,n.updateCartBadge();case 20:return n.showCartAddedEffect(),a.a(2,{success:!0,action:"added",itemId:P.id,totalQuantity:v});case 21:a.n=23;break;case 22:return a.p=22,A=a.v,a.a(2,{success:!1,error:A.message});case 23:return a.a(2)}},a,null,[[1,22]])}))()},syncDraftFromCart:function(e,t){return d(u().m(function r(){var n,a,i,s,c,l;return u().w(function(r){for(;;)switch(r.p=r.n){case 0:return r.p=0,r.n=1,supabase.from("cart_items").select("*").eq("id",e).single();case 1:if(n=r.v,a=n.data,!n.error&&a){r.n=2;break}return r.a(2,!1);case 2:if(!a.draft_id){r.n=7;break}return r.n=3,supabase.from("drafts").select("*").eq("id",a.draft_id).single();case 3:if(i=r.v,s=i.data,!i.error&&s){r.n=4;break}return r.a(2,!1);case 4:return c=o(o({},s.data),{},{sizeQuantities:t}),r.n=5,supabase.from("drafts").update({data:c,sizes:t,updated_at:(new Date).toISOString()}).eq("id",a.draft_id);case 5:if(l=r.v,!l.error){r.n=6;break}return r.a(2,!1);case 6:case 7:return r.a(2,!0);case 8:return r.p=8,r.v,r.a(2,!1)}},r,null,[[0,8]])}))()},updateCartItemQuantity:function(e,t){var r=this;return d(u().m(function n(){var a,i,o,s,c,l,d;return u().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,supabase.auth.getUser();case 1:if(a=n.v,i=a.data.user){n.n=2;break}return n.a(2,!1);case 2:if(o=0,Object.values(t).forEach(function(e){o+=e}),0!==o){n.n=4;break}return n.n=3,r.syncDraftFromCart(e,{});case 3:return n.a(2,r.removeFromCart(e));case 4:return n.n=5,supabase.from("cart_items").select("price").eq("id",e).single();case 5:return s=n.v,c=s.data,l=((null==c?void 0:c.price)||29.99)*o,n.n=6,supabase.from("cart_items").update({quantity:o,sizes:t,total_price:l,updated_at:(new Date).toISOString()}).eq("id",e).eq("user_id",i.id);case 6:if(d=n.v,!d.error){n.n=7;break}return n.a(2,!1);case 7:return n.n=8,r.syncDraftFromCart(e,t);case 8:return n.n=9,r.updateCartBadge();case 9:return n.a(2,!0);case 10:return n.p=10,n.v,n.a(2,!1)}},n,null,[[0,10]])}))()},addToCart:function(t,n){var a=this;return d(u().m(function i(){var s,c,l,d,p,g,h,m,f,b,y,v,w,k,S,j,E,I,D,C,O,T,M,B,_,P,L,A,x;return u().w(function(i){for(;;)switch(i.p=i.n){case 0:return i.p=0,i.n=1,e();case 1:if(s=i.v){i.n=2;break}return alert("请先登录"),i.a(2,!1);case 2:if(c=null,l=null,d={},"string"!=typeof t||!t.startsWith("blank-")){i.n=3;break}p=t.replace("blank-",""),c="blank-tshirt",l="blank-tshirt-".concat(p),d={type:"blank-tshirt",color:p,title:"空白T恤 (".concat(p,")")},i.n=7;break;case 3:if("string"!=typeof t||!t.startsWith("console-")){i.n=4;break}c="console-product",l=t,d={type:t,title:"产品 ".concat(t)},i.n=7;break;case 4:return i.n=5,supabase.from("drafts").select("*").eq("id",t).single();case 5:if(h=i.v,m=h.data,!h.error&&m){i.n=6;break}return alert("无法获取产品信息"),i.a(2,!1);case 6:c="custom-design",l="draft-".concat(t),d={type:"custom-design",color:(null===(g=m.data)||void 0===g?void 0:g.color)||"white",title:m.title||"自定义T恤设计"};case 7:if(f=null,"custom-design"!==c){i.n=9;break}return i.n=8,supabase.from("cart_items").select("*").eq("user_id",s.id).eq("draft_id",t);case 8:b=i.v,(y=b.data)&&y.length>0&&(f=y[0]),i.n=11;break;case 9:return i.n=10,supabase.from("cart_items").select("*").eq("user_id",s.id).eq("type",l);case 10:v=i.v,(w=v.data)&&w.length>0&&(f=w[0]);case 11:if(!f){i.n=15;break}for(k=o({},f.sizes),S=0,j=Object.entries(n||{});S<j.length;S++)E=r(j[S],2),I=E[0],D=E[1],k[I]=(k[I]||0)+D;return C=Object.values(k).reduce(function(e,t){return e+t},0),O=f.price||29.99,T=O*C,i.n=12,supabase.from("cart_items").update({sizes:k,quantity:C,total_price:T,updated_at:(new Date).toISOString()}).eq("id",f.id).eq("user_id",s.id);case 12:if(M=i.v,!M.error){i.n=13;break}return i.a(2,!1);case 13:return i.n=14,a.updateCartBadge();case 14:return a.showCartAddedEffect(),i.a(2,!0);case 15:if(0!==(B=Object.values(n||{}).reduce(function(e,t){return e+t},0))){i.n=16;break}return alert("请选择尺码和数量"),i.a(2,!1);case 16:return _=d.unitPrice||29.99,P=_*B,L={user_id:s.id,type:l,price:_,quantity:B,total_price:P,sizes:n||{},draft_id:"custom-design"===c?t:null,item_data:d,added_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},i.n=17,supabase.from("cart_items").insert([L]).select().single();case 17:if(A=i.v,x=A.data,!A.error){i.n=18;break}return i.a(2,!1);case 18:return i.n=19,a.updateCartBadge();case 19:return a.showCartAddedEffect(),i.a(2,x);case 20:i.n=22;break;case 21:return i.p=21,i.v,alert("操作失败，请重试"),i.a(2,!1);case 22:return i.a(2)}},i,null,[[0,21]])}))()},getCartItems:function(){return d(u().m(function r(){var n,a,i,s,c,l,d,p,g,h,m,f,b;return u().w(function(r){for(;;)switch(r.p=r.n){case 0:return r.p=0,r.n=1,e();case 1:if(n=r.v){r.n=2;break}return r.a(2,[]);case 2:return r.n=3,supabase.from("cart_items").select("*").eq("user_id",n.id).order("added_at",{ascending:!1});case 3:if(a=r.v,i=a.data,!a.error){r.n=4;break}return r.a(2,[]);case 4:s=[],c=t(i),r.p=5,c.s();case 6:if((l=c.n()).done){r.n=11;break}if(d=l.value,p=o({},d),!d.draft_id){r.n=8;break}return r.n=7,supabase.from("drafts").select("*").eq("id",d.draft_id).single();case 7:g=r.v,(h=g.data)&&(p.draft=h,p.title=h.title||"自定义T恤设计",p.previewImage=h.front_preview_image,p.color=(null===(m=h.data)||void 0===m?void 0:m.color)||"white"),r.n=9;break;case 8:d.type&&d.type.startsWith("blank-tshirt-")&&(f=d.type.replace("blank-tshirt-",""),p.title="空白T恤 (".concat(f,")"),p.color=f,p.previewImage=null,p.isBlankTshirt=!0);case 9:s.push(p);case 10:r.n=6;break;case 11:r.n=13;break;case 12:r.p=12,b=r.v,c.e(b);case 13:return r.p=13,c.f(),r.f(13);case 14:return r.a(2,s);case 15:return r.p=15,r.v,r.a(2,[])}},r,null,[[5,12,13,14],[0,15]])}))()},getCartCount:function(){return d(u().m(function t(){var r,n,a;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e();case 1:if(r=t.v){t.n=2;break}return t.a(2,0);case 2:return t.n=3,supabase.from("cart_items").select("quantity").eq("user_id",r.id);case 3:if(n=t.v,a=n.data,!n.error&&a){t.n=4;break}return t.a(2,0);case 4:return t.a(2,a.reduce(function(e,t){return e+(t.quantity||0)},0));case 5:return t.p=5,t.v,t.a(2,0)}},t,null,[[0,5]])}))()}},"updateCartItemQuantity",function(e,t){var r=this;return d(u().m(function n(){var a,i,o,s,c,l,d;return u().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,supabase.auth.getUser();case 1:if(a=n.v,i=a.data.user){n.n=2;break}return n.a(2,!1);case 2:if(o=0,Object.values(t).forEach(function(e){o+=e}),0!==o){n.n=3;break}return n.a(2,r.removeFromCart(e));case 3:return n.n=4,supabase.from("cart_items").select("price").eq("id",e).single();case 4:return s=n.v,c=s.data,l=((null==c?void 0:c.price)||29.99)*o,n.n=5,supabase.from("cart_items").update({quantity:o,sizes:t,total_price:l,updated_at:(new Date).toISOString()}).eq("id",e).eq("user_id",i.id);case 5:if(d=n.v,!d.error){n.n=6;break}return n.a(2,!1);case 6:return n.n=7,r.updateCartBadge();case 7:return n.a(2,!0);case 8:return n.p=8,n.v,n.a(2,!1)}},n,null,[[0,8]])}))()}),"removeFromCart",function(e){var t=this;return d(u().m(function r(){var n,a,i;return u().w(function(r){for(;;)switch(r.p=r.n){case 0:return r.p=0,r.n=1,supabase.auth.getUser();case 1:if(n=r.v,a=n.data.user){r.n=2;break}return r.a(2,!1);case 2:if(confirm("确定要从购物车中移除这个商品吗？")){r.n=3;break}return r.a(2,!1);case 3:return r.n=4,supabase.from("cart_items").delete().eq("id",e).eq("user_id",a.id);case 4:if(i=r.v,!i.error){r.n=5;break}return r.a(2,!1);case 5:return r.n=6,t.updateCartBadge();case 6:return r.a(2,!0);case 7:return r.p=7,r.v,r.a(2,!1)}},r,null,[[0,7]])}))()}),"clearCart",function(){var e=this;return d(u().m(function t(){var r,n,a;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,supabase.auth.getUser();case 1:if(r=t.v,n=r.data.user){t.n=2;break}return t.a(2,!1);case 2:if(confirm("确定要清空购物车吗？")){t.n=3;break}return t.a(2,!1);case 3:return t.n=4,supabase.from("cart_items").delete().eq("user_id",n.id);case 4:if(a=t.v,!a.error){t.n=5;break}return t.a(2,!1);case 5:return t.n=6,e.updateCartBadge();case 6:return t.a(2,!0);case 7:return t.p=7,t.v,t.a(2,!1)}},t,null,[[0,7]])}))()}),"getCartTotal",function(){return d(u().m(function e(){var t,r,n,a;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,supabase.auth.getUser();case 1:if(t=e.v,r=t.data.user){e.n=2;break}return e.a(2,0);case 2:return e.n=3,supabase.from("cart_items").select("total_price").eq("user_id",r.id);case 3:if(n=e.v,a=n.data,!n.error&&a){e.n=4;break}return e.a(2,0);case 4:return e.a(2,a.reduce(function(e,t){return e+(t.total_price||0)},0));case 5:return e.p=5,e.v,e.a(2,0)}},e,null,[[0,5]])}))()}),"checkout",function(){var e=this;return d(u().m(function t(){var r,n,a,i,o,s,c;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,supabase.auth.getUser();case 1:if(r=t.v,n=r.data.user){t.n=2;break}return alert("请先登录"),t.a(2,null);case 2:return t.n=3,e.getCartItems();case 3:if(0!==(a=t.v).length){t.n=4;break}return alert("购物车是空的"),t.a(2,null);case 4:return t.n=5,e.getCartTotal();case 5:return i=t.v,o="ORD-"+Date.now()+"-"+Math.random().toString(36).substr(2,9).toUpperCase(),t.n=6,supabase.from("orders").insert([{user_id:n.id,order_number:o,items:a,total_amount:i,status:"pending"}]).select().single();case 6:if(s=t.v,c=s.data,!s.error){t.n=7;break}return alert("创建订单失败"),t.a(2,null);case 7:return t.n=8,supabase.from("cart_items").delete().eq("user_id",n.id);case 8:return t.n=9,e.updateCartBadge();case 9:return alert("订单创建成功！\n订单号: ".concat(o,"\n总金额: ¥").concat(i.toFixed(2))),t.a(2,c);case 10:return t.p=10,t.v,alert("结账失败，请重试"),t.a(2,null)}},t,null,[[0,10]])}))()}),"initCartIcon",function(){var e=this;return d(u().m(function t(){var r,n,a,i,o;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!e.initialized){t.n=1;break}return t.a(2);case 1:if(t.p=2,window.authManager&&window.supabase){t.n=4;break}return t.n=3,new Promise(function(e){var t=setInterval(function(){window.authManager&&window.supabase&&(clearInterval(t),e())},100);setTimeout(function(){return clearInterval(t)},3e3)});case 3:if(window.authManager&&window.supabase){t.n=4;break}return e.hideCartIcon(),e.initialized=!0,t.a(2);case 4:if(r=null,window.authManager&&(r=window.authManager.getCurrentUser())&&window.authManager.isAuthenticated(),r){t.n=10;break}return t.p=5,t.n=6,supabase.auth.getUser();case 6:if(n=t.v,!(a=n.data.user)){t.n=8;break}if(r=a,!window.authManager){t.n=8;break}return t.n=7,supabase.auth.getSession();case 7:if(i=t.v,!(o=i.data).session){t.n=8;break}return t.n=8,window.authManager.onLoginSuccess({data:{user:a,session:o.session}});case 8:t.n=10;break;case 9:t.p=9,t.v;case 10:if(!r){t.n=12;break}return t.n=11,e.updateCartBadge();case 11:e.showCartIcon(),t.n=13;break;case 12:e.hideCartIcon();case 13:e.initialized=!0,document.addEventListener("authStateChanged",d(u().m(function t(){return u().w(function(t){for(;;)switch(t.n){case 0:if(!window.authManager){t.n=3;break}if(!window.authManager.getCurrentUser()||!window.authManager.isAuthenticated()){t.n=2;break}return t.n=1,e.updateCartBadge();case 1:e.showCartIcon(),t.n=3;break;case 2:e.hideCartIcon();case 3:return t.a(2)}},t)}))),document.addEventListener("loginSuccess",d(u().m(function t(){return u().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e.updateCartBadge();case 1:e.showCartIcon();case 2:return t.a(2)}},t)}))),document.addEventListener("logout",function(){e.hideCartIcon()}),document.addEventListener("visibilitychange",d(u().m(function t(){return u().w(function(t){for(;;)switch(t.n){case 0:if(document.hidden){t.n=1;break}return t.n=1,e.updateCartBadge();case 1:return t.a(2)}},t)}))),t.n=15;break;case 14:t.p=14,t.v,e.hideCartIcon(),e.initialized=!0;case 15:return t.a(2)}},t,null,[[5,9],[2,14]])}))()}),"updateCartBadge",function(){var e=this;return d(u().m(function t(){var r,n,a,i;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.getCartCount();case 1:r=t.v,n=document.getElementById("cartIcon"),a=document.getElementById("cartBadge"),i=document.getElementById("cartBadgeMobile"),a&&(a.textContent=r,a.classList.add("updated"),setTimeout(function(){a.classList.remove("updated")},200)),n&&(r>0?e.showCartIcon():e.hideCartIcon()),i&&(i.textContent=r,i.classList.add("updated"),setTimeout(function(){return i.classList.remove("updated")},200)),t.n=3;break;case 2:t.p=2,t.v,e.hideCartIcon();case 3:return t.a(2)}},t,null,[[0,2]])}))()}),"showCartIcon",function(){var e=document.getElementById("cartIcon");window.innerWidth<=899?e&&(e.style.display="none"):e&&(e.style.display="block",e.classList.add("show"),e.classList.add("bounce"),setTimeout(function(){e.classList.remove("bounce")},300))}),"hideCartIcon",function(){var e=document.getElementById("cartIcon");window.innerWidth<=899?e&&(e.style.display="none"):e&&(e.style.display="none",e.classList.remove("show"))}),"showCartAddedEffect",function(){var e=document.createElement("div");e.className="cart-notification",e.textContent="Added to cart!",e.style.cssText="\n            position: fixed;\n            top: 0px;\n            right: 0px;\n            background: black;\n            color: white;\n            z-index: 9999;\n            font-size: 20px;\n            animation: slideIn 0.3s ease-out;\n            ",document.body.appendChild(e),setTimeout(function(){e.style.animation="slideOut 0.3s ease",setTimeout(function(){document.body.contains(e)&&document.body.removeChild(e)},300)},2e3)}),window.addToCart=CartManager.addToCart.bind(CartManager),window.getCartItems=CartManager.getCartItems.bind(CartManager),window.getCartCount=CartManager.getCartCount.bind(CartManager),window.updateCartItemQuantity=CartManager.updateCartItemQuantity.bind(CartManager),window.removeFromCart=CartManager.removeFromCart.bind(CartManager),window.clearCart=CartManager.clearCart.bind(CartManager),window.getCartTotal=CartManager.getCartTotal.bind(CartManager),window.checkout=CartManager.checkout.bind(CartManager),window.updateCartBadge=CartManager.updateCartBadge.bind(CartManager))}(),document.addEventListener("DOMContentLoaded",function(){setTimeout(d(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:if(!window.CartManager||"function"!=typeof window.CartManager.initCartIcon){e.n=2;break}return e.n=1,window.CartManager.initCartIcon();case 1:e.n=3;break;case 2:case 3:return e.a(2)}},e)})),500)}),"loading"!==document.readyState&&setTimeout(d(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:if(!window.CartManager||"function"!=typeof window.CartManager.initCartIcon){e.n=1;break}return e.n=1,window.CartManager.initCartIcon();case 1:return e.a(2)}},e)})),100)}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return n[e].call(r.exports,r,r.exports,i),r.exports}i.m=n,e=[],i.O=(t,r,n,a)=>{if(!r){var o=1/0;for(l=0;l<e.length;l++){for(var[r,n,a]=e[l],s=!0,u=0;u<r.length;u++)(!1&a||o>=a)&&Object.keys(i.O).every(e=>i.O[e](r[u]))?r.splice(u--,1):(s=!1,a<o&&(o=a));if(s){e.splice(l--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[r,n,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var a=Object.create(null);i.r(a);var o={};t=t||[null,r({}),r([]),r(r)];for(var s=2&n&&e;("object"==typeof s||"function"==typeof s)&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach(t=>o[t]=()=>e[t]);return o.default=()=>e,i.d(a,o),a},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.j=682,(()=>{var e={682:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[o,s,u]=r,c=0;if(o.some(t=>0!==e[t])){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(u)var l=u(i)}for(t&&t(r);c<o.length;c++)a=o[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(l)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),i.O(void 0,[96,869],()=>i(6443)),i.O(void 0,[96,869],()=>i(1)),i.O(void 0,[96,869],()=>i(2238)),i.O(void 0,[96,869],()=>i(5230)),i.O(void 0,[96,869],()=>i(8399));var o=i.O(void 0,[96,869],()=>i(7283));o=i.O(o)})();